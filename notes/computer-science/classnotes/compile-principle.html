<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>编译原理 课程笔记 | 小灰灰灰灰的博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/theme/favicon.png">
    <link rel="alternate" type="application/rss+xml" href="https://blog.lyh543.cn/rss.xml" title="小灰灰灰灰的博客 RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://blog.lyh543.cn/feed.atom" title="小灰灰灰灰的博客 Atom Feed">
    <link rel="alternate" type="application/json" href="https://blog.lyh543.cn/feed.json" title="小灰灰灰灰的博客 JSON Feed">
    <meta name="description" content="

一到四章的概念也就图一乐，真学习还得看第五章

引言

语言

语言：一组规则的组合

字母表的定义
词法规则：单词符号的形成规则
语法规则：（短语、从句、句子、段落、文章）语法单位的形成规则
语义规则：单词符号和语法单位的含义规则
语用规则：语义规则的发展和 ...">
    
    <link rel="preload" href="/assets/css/0.styles.94ecd5c7.css" as="style"><link rel="preload" href="/assets/js/app.ba06a0b0.js" as="script"><link rel="preload" href="/assets/js/33.924560b9.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.94ecd5c7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-app="true" id="app" class="v-application v-application--is-ltr theme--light"><div class="v-application--wrap"><!----> <main id="main-content" class="v-main" style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;"><div class="v-main__wrap"><div><div class="container"><div class="row justify-center"><div class="col-sm-9 col-12"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><div class="v-card v-sheet theme--light"><div class="container"><div itemprop="articleBody" class="markdown-body content__default"><h2 id="第一章-绪论"><a href="#第一章-绪论" class="header-anchor">#</a> 第一章 绪论</h2> <p>一到四章的概念也就图一乐，真学习还得看第五章</p> <h3 id="引言"><a href="#引言" class="header-anchor">#</a> 引言</h3> <h4 id="语言"><a href="#语言" class="header-anchor">#</a> 语言</h4> <p><strong>语言：一组规则的组合</strong></p> <ol><li><strong>字母表</strong>的定义</li> <li><strong>词法规则</strong>：<strong>单词符号</strong>的形成规则</li> <li><strong>语法规则</strong>：（短语、从句、句子、段落、文章）<strong>语法单位</strong>的形成规则</li> <li><strong>语义规则</strong>：<strong>单词符号</strong>和<strong>语法单位</strong>的<strong>含义</strong>规则</li> <li><strong>语用规则</strong>：语义规则的发展和延伸。在一定的语境中，单词和语法单位体现出来的具体意义，需要根据上下文进行明确</li></ol> <h4 id="机器语言、汇编语言、高级语言"><a href="#机器语言、汇编语言、高级语言" class="header-anchor">#</a> 机器语言、汇编语言、高级语言</h4> <p><code>机器语言 -&gt; 汇编语言 -&gt; 高级语言</code></p> <ul><li><strong>机器语言</strong>：由二进制指令组成。计算机可以直接执行</li> <li><strong>汇编语言</strong>：将机器语言符号化的结果</li> <li><strong>低级语言</strong>：与机器有关的语言（指令的操作码、指令格式、寻址方式、数据格式）</li> <li><strong>高级语言</strong>：和机器无关的语言</li></ul> <h4 id="翻译"><a href="#翻译" class="header-anchor">#</a> 翻译</h4> <ul><li>翻译：等价的变换</li></ul> <blockquote><p>计算机只可直接执行用机器语言编写的程序。而用汇编语言和高级语言编写的程序，机器不能直接执行。必须将它们翻译成完全等价的机器语言程序才能执行。</p></blockquote> <ul><li>翻译过程：</li></ul> <p>机器语言 &lt;--<code>汇编程序</code>-- 汇编语言 &lt;--<code>编译程序</code>-- 高级语言</p> <ul><li>实现：编写一个高级语言的编译程序的工作，通常称为对这个语言的实现</li></ul> <hr> <p>与编译有关的三种语言、三种程序：</p> <ul><li>源语言、宿主语言、目标语言</li> <li>源程序、编译程序、目标程序
高级语言涉及的三类人：</li> <li>设计者、实现者、使用者</li></ul> <h4 id="解释"><a href="#解释" class="header-anchor">#</a> 解释</h4> <ul><li>BASIC 是最简单的高级语言。BASIC 程序不是编译执行，而是对源程序进行解释（分析），直接计算出结果。</li> <li><strong>解释</strong>需要解释程序(解释器)</li> <li>LISP，ML，Prolog 和 Smalltalk 均是解释型的语言。</li> <li>Java 被当作一种解释型语言。翻译产生字节码的中间代码，  可以在 Java 虚拟机上运行。</li></ul> <hr> <ul><li>解释执行特别适合于<strong>动态语言</strong>和<strong>交互式环境</strong>，便于人机对话。</li> <li>重复执行的语句需要重复翻译，比编译执行要花去更多的时间，执行效率较低。</li></ul> <h3 id="强制式语言、函数式语言、逻辑式语言、对象式语言"><a href="#强制式语言、函数式语言、逻辑式语言、对象式语言" class="header-anchor">#</a> 强制式语言、函数式语言、逻辑式语言、对象式语言</h3> <p>程序设计语言按设计的理论基础分为四类语言:</p> <ol><li>强制式语言:基础是冯·诺依曼模型</li> <li>函数式语言:基础是数学函数(函数运算)</li> <li>逻辑式语言:基础是数理逻辑、谓词演算</li> <li>对象式语言:基础是抽象数据类型</li></ol> <h4 id="绑定"><a href="#绑定" class="header-anchor">#</a> 绑定</h4> <ol><li><strong>实体</strong>：程序的组成部分，如变量，表达式、程序单元等</li> <li><strong>属性</strong>：实体具有的特性</li> <li><strong>绑定</strong>：实体与其各种属性建立起联系的过程称为绑定（约束）</li> <li><strong>描述符(表)</strong>：描述实体属性的表格</li></ol> <h4 id="静态和动态"><a href="#静态和动态" class="header-anchor">#</a> 静态和动态</h4> <ul><li>静态特性：编译时能确定的特性</li> <li>动态特性：运行时才能确定的特性</li></ul> <hr> <ul><li>静态绑定：绑定在编译时完成，且在运行时不会改变。</li> <li>动态绑定：绑定在运行时完成。</li></ul> <hr> <ul><li>静态作用域绑定:按照程序的结构定义变量的作用域（C语言等）。依据定义变量的位置进行确定。</li> <li>动态作用域绑定:按照过程的调用关系动态地定义变量的作用域（SNOBL4 语言等）</li></ul> <h4 id="变量的四个属性"><a href="#变量的四个属性" class="header-anchor">#</a> 变量的四个属性</h4> <ol><li>作用域：全局变量、局部变量、非局部变量</li> <li>生存期</li> <li>值</li> <li>类型</li></ol> <p>快进到第四章</p> <h2 id="第二章-数据类型"><a href="#第二章-数据类型" class="header-anchor">#</a> 第二章 数据类型</h2> <p>略</p> <h2 id="第三章-控制结构"><a href="#第三章-控制结构" class="header-anchor">#</a> 第三章 控制结构</h2> <p>略</p> <h2 id="第四章-程序语言的设计"><a href="#第四章-程序语言的设计" class="header-anchor">#</a> 第四章 程序语言的设计</h2> <h3 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h3> <p>语言 = 语法 + 语义</p> <p>描述语法的方法：文法 or 语法图</p> <blockquote><p>文法和语法图是语言语法的等价表示。</p></blockquote> <p>文法：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;标识符&gt;→&lt;字母&gt;
&lt;标识符&gt;→&lt;标识符&gt;&lt;字母&gt;
&lt;标识符&gt;→&lt;标识符&gt;&lt;数字&gt;
&lt;字母&gt;→A|…|Z|a|…|z
&lt;数字&gt;→0|…|9
</code></pre></div><p><img src="/images/cad0024c4ccba28d40dffcca5cafd4140554b36ff01bccc8234bbf86499d9d90.png" alt="语法图"></p> <hr> <p>描述语义的方法：许多语言仍采用自然语言描述语义。</p> <h3 id="文法"><a href="#文法" class="header-anchor">#</a> 文法</h3> <h4 id="文法的形式定义"><a href="#文法的形式定义" class="header-anchor">#</a> 文法的形式定义</h4> <p>文法的形式定义： <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>V</mi><mi>T</mi></msub><mo separator="true">,</mo><msub><mi>V</mi><mi>N</mi></msub><mo separator="true">,</mo><mi>S</mi><mo separator="true">,</mo><mi>P</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G = (V_T, V_N, S, P)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mclose">)</span></span></span></span></span></p> <ul><li><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">V_T</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 为<strong>终结符</strong>的非空有限集；</li> <li><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">V_N</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 为<strong>非终结符</strong>的非空有限集；</li> <li><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>=</mo><msub><mi>V</mi><mi>T</mi></msub><mo>⋃</mo><msub><mi>V</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">V=V_T \bigcup V_N</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⋃</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></li> <li><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span></span> 是文法的<strong>开始符号</strong>，有 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>∈</mo><msub><mi>V</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">S\in V_N</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> ；</li> <li><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span></span></span> 为产生式 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>→</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">\alpha\to\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span></span> 的非空有限集，其中：</li> <li><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span></span> 和 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span></span> 是由终结符、非终结符组成的串，且 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span></span> 至少应含有一个非终结符。即 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>=</mo><msup><mi>V</mi><mo>∗</mo></msup><msub><mi>V</mi><mi>N</mi></msub><msup><mi>V</mi><mo>∗</mo></msup><mo separator="true">,</mo><mi>β</mi><mo>=</mo><msup><mi>V</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">\alpha=V^*V_NV^*, \beta=V^*</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.688696em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span></li> <li><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow></mrow><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">^*</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.688696em;vertical-align:0em;"></span><span class="mord"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span> 表示前面的符号重复零次或多次（这很正则表达式）</li></ul> <blockquote><p>G: Grammar<br>
T: Terminal Symbols<br>
N: Non-Terminal Symbols<br>
S: Start Symbol<br>
P: Production</p></blockquote> <h4 id="产生式的简化"><a href="#产生式的简化" class="header-anchor">#</a> 产生式的简化</h4> <section><div class="vuepress-eqn"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>α</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>→</mo><msub><mi>β</mi><mn>1</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>α</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>→</mo><msub><mi>β</mi><mn>2</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>α</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>→</mo><msub><mi>β</mi><mi>n</mi></msub></mrow></mstyle></mtd></mtr></mtable><mo fence="true">}</mo></mrow><mi>α</mi><mo>→</mo><msub><mi>β</mi><mn>1</mn></msub><mi mathvariant="normal">∣</mi><msub><mi>β</mi><mn>2</mn></msub><mi mathvariant="normal">∣</mi><msub><mi>β</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">\left.\begin{aligned}
\alpha&amp;\to\beta_1 \\
\alpha&amp;\to\beta_2 \\
&amp;...\\
\alpha&amp;\to\beta_n
\end{aligned}\right\}
\alpha\to\beta_1|\beta_2|\beta_n
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:6.00004em;vertical-align:-2.75002em;"></span><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span><span style="top:-2.4099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-0.9099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500000000000004em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span></span></span><span style="top:-0.9099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500200000000006em;"><span style="top:-1.2999899999999998em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎭</span></span></span><span style="top:-1.2949899999999999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-1.58999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-1.8849900000000002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-2.17999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-2.2049900000000004em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-3.1500100000000004em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎬</span></span></span><span style="top:-4.29501em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.59001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.885010000000001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-5.180010000000001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-5.205010000000001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-5.50002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎫</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.75002em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></div></section><p><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>β</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>β</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>β</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">\beta_1, \beta_2, \beta_n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 称为 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span></span> 的候选式。</p> <h4 id="文法的表示"><a href="#文法的表示" class="header-anchor">#</a> 文法的表示</h4> <p>描述文法，直接给出产生式集合 (P) 即可。</p> <section><div class="vuepress-eqn"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>E</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>→</mo><mi>E</mi><mo>+</mo><mi>T</mi><mi mathvariant="normal">∣</mi><mi>E</mi><mo>−</mo><mi>T</mi><mi mathvariant="normal">∣</mi><mi>T</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>T</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>→</mo><mi>T</mi><mo>∗</mo><mi>F</mi><mi mathvariant="normal">∣</mi><mi>T</mi><mi mathvariant="normal">/</mi><mi>F</mi><mi mathvariant="normal">∣</mi><mi>F</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>F</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>→</mo><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><mi>i</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
E &amp;→ E+T | E-T | T \\
T &amp;→ T*F | T/F | F \\
F &amp;→ (E) | i
\end{aligned}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:4.500000000000002em;vertical-align:-2.000000000000001em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span><span style="top:-1.6599999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span><span style="top:-1.6599999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mord">∣</span><span class="mord mathdefault">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span></span></span></span></span></span></span></div></section><h4 id="文法的分类"><a href="#文法的分类" class="header-anchor">#</a> 文法的分类</h4> <p>分为 0 型文法、1 型文法、2 型文法、3 型文法。数字越大，规定越严格，越规范。</p> <table><thead><tr><th>文法</th> <th>（在上一级基础上增加）限制</th> <th>中文</th></tr></thead> <tbody><tr><td>0型文法(PSG)</td> <td><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>→</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">\alpha\to\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span></span></td> <td>无限制</td></tr> <tr><td>1型文法(上下文有关文法CSG)</td> <td><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span></span> 长度小于 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span></span> 长度（<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>→</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">S→\varepsilon</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span></span>例外）</td> <td>右边的表达式长于左边</td></tr> <tr><td>2型文法(上下文无关文法CFG)</td> <td><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">A→\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span></span></td> <td>左边是独立的非标识符</td></tr> <tr><td>3型文法(正则文法RG,或右线性文法RLG)</td> <td><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>u</mi></mrow><annotation encoding="application/x-tex">A→u</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">u</span></span></span></span></span>或<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>w</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">A→wB</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></span>, <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>∈</mo><msubsup><mi>V</mi><mi>T</mi><mo>∗</mo></msubsup><mo separator="true">,</mo><mi>w</mi><mo>∈</mo><msubsup><mi>V</mi><mi>T</mi><mo>+</mo></msubsup></mrow><annotation encoding="application/x-tex">u\in V_T^*, w\in V_T^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.964027em;vertical-align:-0.275331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-2.424669em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.275331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.104993em;vertical-align:-0.293531em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.811462em;"><span style="top:-2.4064690000000004em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.293531em;"><span></span></span></span></span></span></span></span></span></span></span></td> <td>右边不以非标识符开头</td></tr></tbody></table> <h4 id="推导的表示"><a href="#推导的表示" class="header-anchor">#</a> 推导的表示</h4> <ul><li>直接推导（由产生式右边替换产生式左边）： <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi>α</mi><mi>γ</mi><mo>⇒</mo><mi>w</mi><mi>β</mi><mi>γ</mi></mrow><annotation encoding="application/x-tex">w\alphaγ\Rightarrow w\betaγ</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span></span></span></span></span></li> <li>任意步推导（0 步或多步）：<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><msup><mo>⇒</mo><mo>∗</mo></msup><mi>z</mi></mrow><annotation encoding="application/x-tex">y \Rightarrow^* z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8831359999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel">⇒</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></span></li> <li>多步推导（1 步或多步）：<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><msup><mo>⇒</mo><mo>+</mo></msup><mi>z</mi></mrow><annotation encoding="application/x-tex">y \Rightarrow^+ z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.9657709999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel">⇒</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span></span></li></ul> <p><img src="/images/178c61ae36fa6424f3e4747af31496f4ddd9190ae81c39d2ca58a3610788390c.png" alt="例 1"></p> <p><img src="/images/432cd31bec2dbaa809608bd6a42e9ea278f336d37947802aea941e1ef337e7c4.png" alt="例 2 -- 最右推导"></p> <p><strong>最右推导：总是展开最右边的非终结符</strong></p> <h4 id="句型、句子、语言"><a href="#句型、句子、语言" class="header-anchor">#</a> 句型、句子、语言</h4> <p><span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>V</mi><mi>T</mi></msub><mo separator="true">,</mo><msub><mi>V</mi><mi>N</mi></msub><mo separator="true">,</mo><mi>S</mi><mo separator="true">,</mo><mi>P</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G = (V_T, V_N, S, P)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mclose">)</span></span></span></span></span></p> <ul><li>句型：S 能推导出的 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span></li> <li>句子：S 能推导出的只含终结符的 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span></li> <li>语言：G 产生的所有句子的集合 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>α</mi><mi mathvariant="normal">∣</mi><mi>S</mi><msup><mo>⇒</mo><mo>+</mo></msup><mi>α</mi></mrow><annotation encoding="application/x-tex">L(G)=\{\alpha|S\Rightarrow^+\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault">G</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel">⇒</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span></span> 且 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>∈</mo><msubsup><mi>V</mi><mi>T</mi><mo>∗</mo></msubsup><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\alpha\in V_T^*\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.025331em;vertical-align:-0.275331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-2.424669em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.275331em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></span></li></ul> <p><img src="/images/70560e24331fbd6a8df89efe334b9c7fdd4c613941bfe82bf5129fd2d64f5aa0.png" alt="例 2 -- 标识符"></p> <p><img src="/images/17bba6eade947d132a8ff0515517bda718dadd79b19133067bd67a98c4d9030e.png" alt="例 3"></p> <p>例 4 有点难。</p> <p><img src="/images/2441ab6c27f48a4c6d35ec8049508aaba00b476543b458a03c25f33a985ab1c1.png" alt="例 4，需要上下有关文法表示，难点"></p> <h4 id="文法等价"><a href="#文法等价" class="header-anchor">#</a> 文法等价</h4> <p>两个文法 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 和 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>G</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">G'</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span>，如果有 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo><mo>=</mo><mi>L</mi><mo stretchy="false">(</mo><msup><mi>G</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L(G)=L(G')</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault">G</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>，则称 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 和 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>G</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">G'</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span> 等价</p> <h4 id="推导树"><a href="#推导树" class="header-anchor">#</a> 推导树</h4> <p>对于文法 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>→</mo><mi>E</mi><mo>+</mo><mi>E</mi><mi mathvariant="normal">∣</mi><mi>E</mi><mo>∗</mo><mi>E</mi><mi mathvariant="normal">∣</mi><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><mi>i</mi></mrow><annotation encoding="application/x-tex">E→E+E|E*E|(E)|i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">∣</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mord">∣</span><span class="mord mathdefault">i</span></span></span></span></span>，句子 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>+</mo><mi>i</mi><mo>∗</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">i+i*i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span></span>，其两棵推导树：</p> <p><img src="/images/8578c2ceb519abfa4881bec4bfd880bf6837d93c7d948d2a0a986503934950a4.png" alt="i+i*i 的推导树"></p> <p>文法的二义性：一个句子有两棵不同的推导树。</p> <h2 id="第五章-编译"><a href="#第五章-编译" class="header-anchor">#</a> 第五章 编译</h2> <h3 id="复习概念"><a href="#复习概念" class="header-anchor">#</a> 复习概念</h3> <ul><li>源语言、宿主语言、目标语言</li> <li>源程序、编译程序、目标程序</li></ul> <hr> <ul><li>自驻留：若<strong>编译程序</strong>生成<strong>宿主机执行</strong>的机器代码，称为自驻留的编译程序</li> <li>自编译：若<strong>编译程序</strong>是<strong>用源语言编写</strong>的，则为自编译的编译程序</li> <li>交叉编译：若<strong>编译程序生成</strong>的<strong>不是宿主机(别的机器)执行</strong>的机器代码，称为交叉编译</li></ul> <h3 id="编译步骤"><a href="#编译步骤" class="header-anchor">#</a> 编译步骤</h3> <p>逻辑上：</p> <ol><li>源程序的分析</li> <li>目标程序的合成</li></ol> <p>具体：</p> <ol><li><strong>词法分析</strong></li> <li><strong>语法分析</strong></li> <li><strong>语义分析与中间代码生成</strong></li> <li><strong>中间代码优化</strong></li> <li><strong>目标代码生成</strong></li></ol> <p>编译的每个步骤都需要进行<strong>符号表管理</strong>和<strong>出错处理</strong>。</p> <h4 id="词法分析"><a href="#词法分析" class="header-anchor">#</a> 词法分析</h4> <ul><li>分析输入字符串</li> <li>根据词法规则识别出<strong>单词符号</strong>：基本字、标识符、字面常量、运算符和界符</li></ul> <h4 id="语法分析"><a href="#语法分析" class="header-anchor">#</a> 语法分析</h4> <ul><li>根据语法规则，识别各类<strong>语法单位</strong>：表达式、语句、程序单元和程序</li> <li>进行<strong>语法检查</strong></li></ul> <h4 id="语义分析与中间代码生成"><a href="#语义分析与中间代码生成" class="header-anchor">#</a> 语义分析与中间代码生成</h4> <ul><li>根据语义规则，对语法正确的语法单位进行<strong>翻译</strong></li> <li>可以直接生成目标程序</li> <li>但目标程序的执行效率低</li> <li>因此，生成中间代码</li></ul> <p>中间代码：</p> <ul><li>大多数编译器采用中间代码来描述源程序的语义。</li> <li>这种中间语言对应某种<strong>抽象机</strong></li> <li>结构简单，语义明确，易于翻译成目标代码，同时也便于优化和移植。</li></ul> <h4 id="优化"><a href="#优化" class="header-anchor">#</a> 优化</h4> <ul><li>对中间代码进行等价变换，提高代码的时空效率。</li> <li>语义分析产生的中间代码不依赖于实际机器，易于实现一些等价变换，使生成的目标程序占用空间更少，执行更快。</li></ul> <h4 id="目标代码生成"><a href="#目标代码生成" class="header-anchor">#</a> 目标代码生成</h4> <ul><li>根据优化后的中间代码及有关信息，可生成较为有效的目标代码：</li> <li>目标机的机器语言程序或汇编语言程序</li> <li>若生成的是汇编语言程序，还需由将其汇编成机器语言程序。</li></ul> <p><img src="/images/66dcc4c9a903a20d3ba45a636158cf97795c97dd8671b7d93304d457cd17a031.png" alt="编译器的结构"></p> <h3 id="完整的程序处理过程"><a href="#完整的程序处理过程" class="header-anchor">#</a> 完整的程序处理过程</h3> <p>从分析源程序到建立一个可执行的目标程序，处理过程还需要其它工具程序的配合：</p> <ol><li><strong>预处理器</strong></li> <li><strong>汇编器</strong></li> <li><strong>连接器</strong></li> <li><strong>装入器</strong></li></ol> <p><img src="/images/b330b44234a4757fbc4870570b34ca3987c4bc98ec296c8f65dca455c6a46b55.png" alt="完整的程序处理过程"></p> <h3 id="编译前端和后端"><a href="#编译前端和后端" class="header-anchor">#</a> 编译前端和后端</h3> <ul><li>在现代编译器中，通常将编译过程划分为前端和后端两大部分，分别加以实现。</li> <li>前端和后端通过<strong>中间代码</strong>连接，可极大的提高编译器设计与实现的效率。</li> <li><strong>前端</strong>：主要是与源程序相关的部分，包括<strong>词法、语法分析、语义分析和中间代码生成</strong>等。</li> <li><strong>后端</strong>：主要是与目标程序相关的部分，包括<strong>优化、目标代码生成</strong>等。</li></ul> <h2 id="第六章-词法分析"><a href="#第六章-词法分析" class="header-anchor">#</a> 第六章 词法分析</h2> <p>从这里才开始变难。</p> <h3 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h3> <p>词法分析：扫描源程序的字符串,按照词法规则,识别出单词符号作为输出；对识别过程中发现的<strong>词法错误</strong>(非法的字符、不正确常量、程序括号等) 进行处理。</p> <p><img src="/images/75b326881ed95ec07a34d871141b80b78772ffe445dfcaf28aad0621f2ce854c.png" alt="词法分析器和编译器的关系（1）"></p> <p><img src="/images/1594ddf18d4910aece338ce8f89b8543509c58bd1d0a1b0f9ac4b96869bb5cfe.png" alt="词法分析器和编译器的关系（2）"></p> <h3 id="单词的种类"><a href="#单词的种类" class="header-anchor">#</a> 单词的种类</h3> <ul><li>标识符</li> <li>关键字</li> <li>常量</li> <li>运算符</li> <li>分界符</li></ul> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">*</span>pointer<span class="token operator">!=</span><span class="token char">'\0'</span><span class="token punctuation">)</span> pointer<span class="token operator">++</span><span class="token punctuation">;</span>

<span class="token keyword">while</span>       关键字   	 
<span class="token punctuation">(</span>           界符	 
<span class="token operator">*</span>           运算符 	 
pointer     标识符   	 
<span class="token operator">!=</span>          运算符	 
<span class="token char">'\0'</span>        常量     	 
<span class="token punctuation">)</span>	        界符	 
pointer     标识符
<span class="token operator">++</span>          运算符   	 
<span class="token punctuation">;</span>           界符	 
<span class="token char">'\n'</span>        界符
</code></pre></div><h3 id="单词的输出形式"><a href="#单词的输出形式" class="header-anchor">#</a> 单词的输出形式</h3> <p>采用二元式：<code>(单词类别，单词)</code></p> <ul><li>单词类别：区分单词所属的类(整数编码)</li> <li>单词：单词的属性值</li></ul> <h3 id="单词类别的划分"><a href="#单词类别的划分" class="header-anchor">#</a> 单词类别的划分</h3> <p>单词的编码随类别不同而不同。<br> <strong>基本字、运算符、界符</strong>的数目是确定的，<strong>一字一码</strong>，它的<strong>第二元可以空缺</strong>。</p> <ul><li><strong>标识符</strong>通归一类。</li> <li><strong>常量</strong>可按整型、实型、字符型、布尔型等分类。</li> <li>常量或标识符将由第二元----单词的属性值来区别：
<ul><li>通常将常数在常量表中的位置（编号）作为常量的属性值；</li> <li>将标识符在符号表中的位置（编号）作为标识符的属性值。</li></ul></li></ul> <p><img src="/images/80efc08eb7a4adbecf01ffb2aad7bcb32b7836055f3203191cd6463834ade49e.png" alt="单词符号的编码表"></p> <h3 id="状态转换图"><a href="#状态转换图" class="header-anchor">#</a> 状态转换图</h3> <p><img src="/images/a5a38fe7beb30e1299a0346bc52cd3971de32325b5bfa7d767dd1231ca77d78b.png" alt="状态转换图 例"></p> <p><img src="/images/f2478ea60f0be8e12256c571d286f6d6d2daf7effc7302a540bbc9e29f1b40bd.png" alt="标识符的状态转换图"></p> <p><img src="/images/48b34d90c503ae70ce92e2063205b9f4413eeea61ba01f46322dbfb7145ccda5.png" alt="整数的状态转换图"></p> <h3 id="词法分析器的转换图"><a href="#词法分析器的转换图" class="header-anchor">#</a> 词法分析器的转换图</h3> <p><img src="/images/03a4f7b8def408a0bb18b2748262a6fc2a32fbbea295ecd0cb5b9c924b9019db.png" alt="词法分析器的转换图(1)"></p> <p><img src="/images/ca5f7f0b1f95adf78a0d6d8e97b84d5ee2ced17ae0271c07f8351fcd3d929efc.png" alt="词法分析器的转换图(2)"></p> <h3 id="词法分析器"><a href="#词法分析器" class="header-anchor">#</a> 词法分析器</h3> <p>略，看 PPT 吧</p> <h2 id="第七章-自上而下的语法分析"><a href="#第七章-自上而下的语法分析" class="header-anchor">#</a> 第七章 自上而下的语法分析</h2> <ul><li>编译理论中，语法分析是对高级语言的语法单位的结构进行分析。</li> <li>语法单位结构可以用<strong>上下文无关文法</strong>来描述。</li> <li><strong>下推自动机</strong>可用于识别上下文无关文法所描述的语法单位。</li> <li>上下文无关文法及下推自动机是语法分析的理论基础。</li></ul> <p>语法分析：对无关文法 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>V</mi><mi>T</mi></msub><mo separator="true">,</mo><msub><mi>V</mi><mi>N</mi></msub><mo separator="true">,</mo><mi>S</mi><mo separator="true">,</mo><mi>P</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G = (V_T, V_N, S, P)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mclose">)</span></span></span></span></span> 及符号串 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span>，判断 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span> 是否是文法 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 的一个合法句子，即：
<span class="vuepress-eq"><span title="ParseError: KaTeX parse error: Can&amp;#x27;t use function &amp;#x27;$1#x27; in math mode at position 1: $̲S\Rightarrow^*w" class="katex-error" style="color:#cc0000;">$S\Rightarrow^*w</span></span>$</p> <h3 id="引言-2"><a href="#引言-2" class="header-anchor">#</a> 引言</h3> <p><img src="/images/ff3d3427cffb959c3f4d23e4668ddb2fa5aae0d785ebf936c8c01822e35fecae.png" alt="语法分析的功能"></p> <p>语法分析的方法通常有两类：</p> <ul><li>自上而下(自顶向下)的分析方法（第七章）：从 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span></span> 出发，能否找到一个<strong>最左推导</strong>序列，使得 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><msup><mo>⇒</mo><mo>∗</mo></msup><mi>w</mi></mrow><annotation encoding="application/x-tex">S\Rightarrow^*w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.688696em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel">⇒</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span>；或者从根结点 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span></span> 开始，能否构造一棵<strong>语法树</strong>，使得该语法树的叶结点自左至右的连接正好是 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span>。</li> <li>自下而上(自底向上)的分析方法（第八章）：从 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span></span> 出发，能否找到一个最左规约（最右推导的逆过程）序列，逐步进行规约，直至文法的开始符号 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span></span>。</li></ul> <hr> <p>自上而下的语法分析可分为不确定和确定的两类。</p> <ul><li><strong>回溯分析法</strong>是不确定的分析方法。</li> <li><strong>递归下降分析法</strong>和<strong>预测分析</strong>法属于确定的分析方法。</li></ul> <h3 id="回溯分析法"><a href="#回溯分析法" class="header-anchor">#</a> 回溯分析法</h3> <p>其实就是 <strong>DFS</strong>。</p> <p>实例：</p> <section><div class="vuepress-eqn"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>S</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>→</mo><mi>x</mi><mi>A</mi><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>A</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>→</mo><mi>a</mi><mi>b</mi><mi mathvariant="normal">∣</mi><mi>a</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
S&amp;→xAy \\
A&amp;→ab|a
\end{aligned}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:3.0000000000000004em;vertical-align:-1.2500000000000002em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord">∣</span><span class="mord mathdefault">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em;"><span></span></span></span></span></span></span></span></span></span></span></span></div></section><p>输入串为 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi>a</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">xay</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></span>。</p> <p>回溯分析的动画过程看 PPT。</p> <ul><li>采取试探<strong>的</strong>方法来分析每一个候选式，分析的过程很可能产生<strong>回溯</strong>。</li> <li>可能产生回溯的原因有： (1)公共左因子 (2)左递归 (3)<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ε</span></span></span></span></span> 产生式</li></ul> <h4 id="公共左因子"><a href="#公共左因子" class="header-anchor">#</a> 公共左因子</h4> <p>公共左因子，是指在文法的产生式集合中，某个非终结符的多个候选式具有相同的前缀。</p> <section><div class="vuepress-eqn"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>α</mi><msub><mi>β</mi><mn>1</mn></msub><mi mathvariant="normal">∣</mi><mi>α</mi><msub><mi>β</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">A→\alpha\beta_1|\alpha\beta_2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></div></section><ul><li>若所有候选式都没有公共左因子，就可以选择惟一匹配的候选式，减少不必要的回溯</li></ul> <h4 id="左递归"><a href="#左递归" class="header-anchor">#</a> 左递归</h4> <ul><li>左递归：<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><msup><mo>⇒</mo><mo>+</mo></msup><mi>A</mi><mi>β</mi></mrow><annotation encoding="application/x-tex">A\Rightarrow^+A\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel">⇒</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span></span></li> <li>直接左递归：<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>⇒</mo><mi>A</mi><mi>β</mi></mrow><annotation encoding="application/x-tex">A\Rightarrow A\beta</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span></span></li></ul> <h4 id="回溯分析法特点"><a href="#回溯分析法特点" class="header-anchor">#</a> 回溯分析法特点</h4> <p>回溯分析法是一种<strong>不确定</strong>的方法：使用试探的方法穷举每一种可能，当分析不成功时，则回退到适当位置再重新试探其余可能的推导。穷尽所有可能的推导，仍不成功，才能确认输入串不是该文法的句子。</p> <h4 id="主要缺陷"><a href="#主要缺陷" class="header-anchor">#</a> 主要缺陷</h4> <ol><li>选择候选式进行推导是<strong>盲目</strong>的</li> <li>若文法存在左递归，语法分析还可能产生无限<strong>递归</strong></li> <li>引起时间和空间的大量<strong>消耗</strong></li> <li>无法指出语法错误的<strong>确切位置</strong></li></ol> <p>针对产生回溯的原因，提出消除回溯的方法：引进确定的语法分析方法——<strong>递归下降分析法</strong>和<strong>预测分析法</strong>。</p> <p>为了消除回溯，对任何一个非终结符和当前的待匹配符号，期望</p> <ul><li>要么只有一个候选式可用</li> <li>要么没有候选式可用</li></ul> <h3 id="递归下降分析法"><a href="#递归下降分析法" class="header-anchor">#</a> 递归下降分析法</h3> <h4 id="方法步骤"><a href="#方法步骤" class="header-anchor">#</a> 方法步骤</h4> <ol><li>提取公共左因子（看 PPT）</li> <li>消除左递归</li></ol> <ul><li><strong>消除直接左递归</strong>（改写为右递归）</li> <li>间接左递归（<span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><msup><mo>⇒</mo><mo>+</mo></msup><mi>A</mi><mi>α</mi></mrow><annotation encoding="application/x-tex">A\Rightarrow^+A\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel">⇒</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span></span>）的消除利用算法进行
a. 将文法 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span></span> 的所有非终结符按任一给定的顺序排列为 <span class="vuepress-eq"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">A_1, A_2, ..., A_n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>
b. 消除可能的左递归（算法见后）
c. 化简：删除多余产生式</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// 消除左递归
for i:=1 to n do
  for j:=1 to i-1 do
    把形如Ai→Ajα的产生式改写为
      Ai→δ1α|δ2α|...|δkα
    消除Ai产生式可能的直接左递归
</code></pre></div><p>消除例子中的左递归：</p> <section><div class="vuepress-eqn"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>S</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>→</mo><mi>Q</mi><mi>c</mi><mi mathvariant="normal">∣</mi><mi>c</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>Q</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>→</mo><mi>R</mi><mi>b</mi><mi mathvariant="normal">∣</mi><mi>b</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>R</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>→</mo><mi>S</mi><mi>a</mi><mi mathvariant="normal">∣</mi><mi>a</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
S&amp;→Qc|c \\
Q&amp;→Rb|b \\
R&amp;→Sa|a \\
\end{aligned}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:4.500000000000002em;vertical-align:-2.000000000000001em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">Q</span></span></span><span style="top:-1.6599999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">Q</span><span class="mord mathdefault">c</span><span class="mord">∣</span><span class="mord mathdefault">c</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault">b</span><span class="mord">∣</span><span class="mord mathdefault">b</span></span></span><span style="top:-1.6599999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">a</span><span class="mord">∣</span><span class="mord mathdefault">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span></span></span></span></span></span></span></div></section><p><img src="/images/6cd6733161bb9b970ba6592c141ad763fd2d43f06a4855c3ef61cb3eec772de4.png" alt="题解"></p> <p><img src="/images/fd7cb0551e7ab76b07749e4ff8189a838023025f3a957fd63b22db1294d42d72.png" alt="题解 2"></p> <h4 id="递归下降分析器的构造"><a href="#递归下降分析器的构造" class="header-anchor">#</a> 递归下降分析器的构造</h4> <p>在文法 G 中，如果</p> <ul><li>没有任何公共左因子</li> <li>没有任何左递归
则有可能构造出不带回溯的分析程序</li></ul> <h3 id="预测分析法"><a href="#预测分析法" class="header-anchor">#</a> 预测分析法</h3> <h4 id="构造-first-集"><a href="#构造-first-集" class="header-anchor">#</a> 构造 First 集</h4> <ol><li><code>A -&gt; aB</code>，A 就有 <code>{a}</code></li> <li><code>A -&gt; B</code>，A 可以把 B 的复制过来</li> <li><code>A -&gt; BC</code>，若 B 可以为 \varepsilon，A 就还能复制 C 的</li></ol> <h4 id="构造-follow-集"><a href="#构造-follow-集" class="header-anchor">#</a> 构造 Follow 集</h4> <ol><li>S</li></ol> <p>FIRSTVT
E + ( * i
T * ( i
F ( i</p> <h2 id="第八章-自下而上语法分析"><a href="#第八章-自下而上语法分析" class="header-anchor">#</a> 第八章 自下而上语法分析</h2> <h3 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h3> <ul><li>短语：某个祖先的所有没孩子的子孙组成的语句</li> <li>直接短语：某个没有孙子的爸爸的孩子组成的语句</li> <li>句柄：最左直接短语</li> <li>素短语：短语至少有一个终结符，且不不含更小的素短语（若 <code>i</code> 是素短语，则 <code>Fi*</code> 不是素短语）</li></ul> <h3 id="算符优先分析法"><a href="#算符优先分析法" class="header-anchor">#</a> 算符优先分析法</h3> <h4 id="构造-firstvt-集"><a href="#构造-firstvt-集" class="header-anchor">#</a> 构造 FIRSTVT 集</h4> <ol><li><code>A -&gt; aBc</code> 或 <code>A -&gt; Bac</code>，A 就有 <code>{a}</code></li> <li><code>A -&gt; BC</code>，A 可以把 B 的复制过来</li> <li><code>A -&gt; BC</code>，若 B 可以为 \varepsilon，A 就还能复制 C 的</li></ol> <h4 id="构造-lastvt-集"><a href="#构造-lastvt-集" class="header-anchor">#</a> 构造 LASTVT 集</h4> <ol><li><code>A -&gt; caB</code> 或 <code>A -&gt; cBa</code>，A 就有 <code>{a}</code></li> <li><code>A -&gt; BC</code>，A 可以把 C 的复制过来</li> <li><code>A -&gt; BC</code>，若 C 可以为 \varepsilon，A 就还能复制 B 的</li></ol> <h4 id="算符优先关系表"><a href="#算符优先关系表" class="header-anchor">#</a> 算符优先关系表</h4> <ol><li>优先：先归约的符号被称为优先级高。</li> <li>先看行，再看列。如 <code>+</code> 行 <code>i</code> 列为 <code>&gt;</code>，则 <code>+</code> &gt; <code>i</code>。</li> <li>规则：若 <code>E+T</code>，则 <code>LASTVT(E)</code> &gt; <code>+</code>，<code>+</code> &lt; <code>FIRSTVT(T)</code>。
<ul><li>还要添加 <code>#S#</code> 这个文法</li> <li>这里的大于、小于没有对称性（<code>a&gt;b</code> 不能推出 <code>b&lt;a</code>）</li> <li>推荐先填等号，再按行填小于，再按列填大于</li></ul></li></ol> <h3 id="lr-分析法"><a href="#lr-分析法" class="header-anchor">#</a> LR 分析法</h3> <h2 id="第九章-语义分析"><a href="#第九章-语义分析" class="header-anchor">#</a> 第九章 语义分析</h2> <h3 id="符号表"><a href="#符号表" class="header-anchor">#</a> 符号表</h3> <p>符号表：</p> <div class="language- extra-class"><pre class="language-text"><code>名字 | 信息
</code></pre></div><p>常用的符号表结构：线性表、Hash 表</p> <h3 id="语义分析概论"><a href="#语义分析概论" class="header-anchor">#</a> 语义分析概论</h3> <h4 id="语义分析的主要工作"><a href="#语义分析的主要工作" class="header-anchor">#</a> 语义分析的主要工作</h4> <p>语义分析 = <strong>静态语义检查</strong> + <strong>语义处理</strong></p> <p>静态语义检查：<br>
(1) <strong>类型检查</strong>：数据的使用应与类型匹配<br>
(2) <strong>控制流检查</strong>：用以保证控制语句有合法的转向点:<br>
如不允许goto语句转入case语句流; break语句需要在switch或循环语句.<br>
(3) <strong>一致性检查</strong>：如数组维数是否正确; 变量是否已经定义；变量是否重名；case常量不能相同等。</p> <p>语义处理：
<strong>说明语句</strong>: 登记信息；<br> <strong>执行语句</strong>：生成中间代码。</p> <h4 id="语法制导翻译"><a href="#语法制导翻译" class="header-anchor">#</a> 语法制导翻译</h4> <p>为<strong>每个产生式</strong>配上一个<strong>语义子程序</strong></p> <p>在<strong>语法分析过程中</strong>，根据每个产生式对应的语义子程序（语义动作）进行翻译（生成中间代码）的方法称为语法制导翻译。</p> <p><img src="/images/a0344c8c9f6ad776273480ce590c395acd95a650547933a6f77752adff5a6b9f.png" alt="语法分析采用自底向上的LR分析法(1)"></p> <p><img src="/images/94d3547dac8976074a9b511683636260f1ffacec8418e229cbab5b49c72b9c82.png" alt="语法分析采用自底向上的LR分析法(2)"></p> <p><img src="/images/9f8cce28aa0229a6b030564baddc00e0386a3cdec303deebeea3b71112f14812.png" alt="语法分析采用自底向上的LR分析法(3)"></p> <h4 id="语义值"><a href="#语义值" class="header-anchor">#</a> 语义值</h4> <p>在描述语义动作时，需要赋予每个文法符号以各种不同的“值”，这些值统称为“语义值”.如，“类型”，“种属”，“地址”或“代码”等。通常用X.TYPE,X.CAT,X.VAL来表示这些值。</p> <p><img src="/images/1c314a57a9e71476f2abc0c4f27e1f91d5a9d5cda971552f4276e7fa05ca3068.png" alt="picture 7"></p> <h4 id="中间代码"><a href="#中间代码" class="header-anchor">#</a> 中间代码</h4> <p>中间代码一种与具体机器无关的抽象代码，有多种形式。四元式形式: <code>(op,ARG1,ARG2,RESULT)</code></p> <p>op—运算符<br>
ARG1—第一运算量<br>
ARG2—第二运算量<br>
RESULT—结果</p> <p>如: <code>A:=（-B）*(C+D)</code> 翻译成</p> <div class="language- extra-class"><pre class="language-text"><code>(@,B,_,t1)
(+,C,D,t2)
(*,t1,t2,t3)
(:=,t3,_,A)
</code></pre></div><p>四元式出现顺序和表达式计值顺序一致;四元式之间的联系通过<strong>临时变量</strong>来实现。</p> <h3 id="简单赋值语法分析的翻译"><a href="#简单赋值语法分析的翻译" class="header-anchor">#</a> 简单赋值语法分析的翻译</h3> <h4 id="语义变量及过程"><a href="#语义变量及过程" class="header-anchor">#</a> 语义变量及过程</h4> <ul><li><code>X.a</code>：文法符X相应属性a,如i.name,E.place。E.place:表示E所代表的变量在符号表的入口地址。</li> <li><code>newtemp</code>：语义函数，每调用一次产生一个新的临时变量。</li> <li><code>entry(i)</code>：语义函数，查符号表，返回变量i的入口。</li> <li><code>IP</code>：指令指针，初始化为0，也可以是指定的初值。</li> <li><code>gen(OP,ARG1,ARG2,RESULT)</code>：语义过程，生成一个四元式<code>(OP,ARG1,ARG2,RESULT)</code>,并填入四元式表中。同时 <code>ip:=ip+1</code></li></ul> <h4 id="翻译方案"><a href="#翻译方案" class="header-anchor">#</a> 翻译方案</h4> <div class="language- extra-class"><pre class="language-text"><code>A → i:=E
E → E1 op E2 | -E1 |(E1)| i
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>A→i:=E
{
    P=entry(i.NAME);
    If(P!=0) 
        gen ( :=, E.place, _, P)
    Else error();
}

E→E1 op E2
{
    E.place:=newtemp;
    gen(op,E1.place,E2.place,E.place)
}

E →-E1 
{
    E.place:=newtemp; 
    gen(@,E1.place,_,E.place)
}

E →(E1)
{  E.place:= E1.place  }

E →i  
{  P=entry(i.NAME);
  If(P!=0)  E.place:=P
  Else error();

</code></pre></div><p><img src="/images/f0363638550a136fc970e43b7c2ca65be864f7f616d93128d7e076e71ef2fea2.png" alt="a:=-b*(c+d)的移进-归约过程"></p> <h4 id="类型转换"><a href="#类型转换" class="header-anchor">#</a> 类型转换</h4> <p>对表达式E增加类型属性<code>E.type</code>;
引进类型转换指令 <code>(itr,x,_,t)</code></p> <div class="language- extra-class"><pre class="language-text"><code>t:=newtemp;
if E1.type=integer 
   and E2.type=integer 
then begin
  gen(opi,E1.place,E2,place,t);
  E.type:=integer
  end

else if E1.type=real and E2.type=real 
then begin 
  gen(opr,E1.place,E2.place,t);
  E.type:=real  
  end

else if E1.type=integer then
  begin t1:=newtemp;
    gen(itr,E1.place,_,t1);
    gen(opr,t1,E2.place,t);
    E.type:=real
  end

else begin t1:=newtemp;
  gen(itr,E2.place,_,t1);
  gen(opr,E1.place,t1,t);
  E.type:=real
end;

E.place:=t;
</code></pre></div><h3 id="说明语句的翻译"><a href="#说明语句的翻译" class="header-anchor">#</a> 说明语句的翻译</h3> <p>不产生可执行指令
仅负责填表：将被说明对象的类型及相对存储位置记入各自的符号表中</p> <h4 id="文法-2"><a href="#文法-2" class="header-anchor">#</a> 文法</h4> <div class="language- extra-class"><pre class="language-text"><code>D→D;D|i:T
T→real|integer|array[num] of T1|↑T1
</code></pre></div><h4 id="语义变量和过程"><a href="#语义变量和过程" class="header-anchor">#</a> 语义变量和过程</h4> <p>负责填下面两个东西！</p> <p>(1)<code>offset</code>:相对位移量,初值为0,是一个全局变量
(2)<code>T.type</code>:数据类型
(3)<code>T.width</code>:数据宽度
(4)<code>enter</code>:语义过程,将变量名及其类型和相对存储位置记入符号表中。</p> <h4 id="翻译方案-2"><a href="#翻译方案-2" class="header-anchor">#</a> 翻译方案</h4> <div class="language- extra-class"><pre class="language-text"><code>S →MD
M →\varepsilon        { offset:=0 }
D → D1;D2
D →i:T      { enter(i.name,T.type,offset); offset := offset+T.width }
T→integer {  T.type:=integer;  T.width:=4  }
</code></pre></div><h3 id="控制语句的翻译"><a href="#控制语句的翻译" class="header-anchor">#</a> 控制语句的翻译</h3> <h3 id="布尔表达式的翻译"><a href="#布尔表达式的翻译" class="header-anchor">#</a> 布尔表达式的翻译</h3> <h4 id="文法-3"><a href="#文法-3" class="header-anchor">#</a> 文法</h4> <div class="language- extra-class"><pre class="language-text"><code>B→i
B→i1 rop i2

（1）if  B  then  S
（2）if  B  then  S else S
（3）while B do S
</code></pre></div><h4 id="语义变量"><a href="#语义变量" class="header-anchor">#</a> 语义变量</h4> <ul><li><code>B.T</code>：真出口，记录B为真的转移语句的地址；</li> <li><code>B.F</code>：假出口，记录B为假的转移语句的地址。</li></ul> <h4 id="转移语句的四元式"><a href="#转移语句的四元式" class="header-anchor">#</a> 转移语句的四元式</h4> <div class="language- extra-class"><pre class="language-text"><code>(jrop,P1,P2,0) 
(jnz,P1,-,0)
(j,-,-,0)
</code></pre></div><p>0 是转移地址，从上往下分析的时候可能不知道要转义到哪里，所以会挖坑，后面会填坑。</p> <h4 id="翻译方案-3"><a href="#翻译方案-3" class="header-anchor">#</a> 翻译方案</h4> <div class="language- extra-class"><pre class="language-text"><code>B→i
{
    B.T:=ip;
    gen(jnz,entry(i),-,0);
    B.F:=ip;
    gen(j,-,-,0)
}

B→i1 rop i2
{
    B.T:=ip;
    gen(jrop,entry(i1),entry(i2),0);
    B.F:=ip;
    gen(j,-,-,0)
}
</code></pre></div><h3 id="无条件转移语句翻译"><a href="#无条件转移语句翻译" class="header-anchor">#</a> 无条件转移语句翻译</h3> <h4 id="goto-l-l-已经定义"><a href="#goto-l-l-已经定义" class="header-anchor">#</a> goto L，L 已经定义</h4> <div class="language-cpp extra-class"><pre class="language-cpp"><code>…
L<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>   <span class="token comment">/*此时，将L登记入符号表*/</span>
…
<span class="token keyword">goto</span> L<span class="token punctuation">;</span>  <span class="token comment">/*查表，发现L已定义，生成四元式*/</span>
</code></pre></div><h4 id="goto-l-l-未定义"><a href="#goto-l-l-未定义" class="header-anchor">#</a> goto L，L 未定义</h4> <div class="language-cpp extra-class"><pre class="language-cpp"><code>…
<span class="token keyword">goto</span> L<span class="token punctuation">;</span> <span class="token comment">/*将L记入符号表，定义否标记为“否”，
         地址栏写当前IP，生产无条件转移 */</span>
…
<span class="token keyword">goto</span> L<span class="token punctuation">;</span> <span class="token comment">/*拉链，即生成向上指的链表*/</span>
…
L<span class="token operator">:</span> …   <span class="token comment">/*定义否标记改为“是”，回填，即根据链表依次改写跳转的地址栏*/</span>
…
</code></pre></div><p><img src="/images/3fd3bfb8b38f1d52b150c71435abf6a2c6f847b4593b06c4a6cd8a94b8a34d45.png" alt="拉链"></p> <h3 id="标号语句的处理方法"><a href="#标号语句的处理方法" class="header-anchor">#</a> 标号语句的处理方法</h3> <p>文法：</p> <div class="language- extra-class"><pre class="language-text"><code>label →i:
</code></pre></div><ol><li>i（假定为L）不在符号表中：则把它填入，置“类型”栏为“标号”，“定义否”栏为“已”，“地址”栏为ip的当前值；</li> <li>若L已在符号表中，“类型” 为“标号”, “定义否”栏为“否” :把“定义否”改为“已”，然后把“地址栏”中的链首q取出，同时把ip当前值填入其中，最后执行 <code>backpatch（q，ip）</code>语义过程进行回填</li> <li>若L已在符号表中，但“类型”不为“标号”,或“定义否” 为“已”：则“名字重定义”</li></ol> <p><code>backpatch（q，ip）</code>为语义过程：把q为链首的链上所有四元式的第四区段都填为ip</p> <h3 id="if-条件语句的翻译"><a href="#if-条件语句的翻译" class="header-anchor">#</a> If 条件语句的翻译</h3> <h4 id="文法-4"><a href="#文法-4" class="header-anchor">#</a> 文法</h4> <div class="language- extra-class"><pre class="language-text"><code>S→if B then S1 | if B then S1 else S2
</code></pre></div><p><code>if B then S1</code>：S1的第一条四元式
用以“回填”
<code>if B then S1 else S2</code>：S1、S2的第一条四元式用以“回填”</p> <p>(1)B具有真假出口
B为真假时的转向不同
在翻译B时其真假出口有待“回填”
(2)因if语句的嵌套,必须记录不确定转移目标的四元式的地址—拉链技术</p> <h4 id="语义变量及过程-2"><a href="#语义变量及过程-2" class="header-anchor">#</a> 语义变量及过程</h4> <ol><li><code>N.CHAIN</code>：记录不确定转移目标的四元式形成的，<strong>不确定 label 地址时就调用这个</strong>；<strong>一般来说，N.CHAIN 的含义是 N 结束以后要跳的位置</strong></li> <li><code>merge(t1,t2)</code>: 语义函数，合并链表，返回合并后的链头t2，<strong>用于合并链表/拉链</strong></li> <li><code>backpatch(t1,code)</code>: 语义过程，用code回填t1，<strong>确定 label 地址时就调用这个</strong></li></ol> <p>如:</p> <div class="language- extra-class"><pre class="language-text"><code>(p) (j, -, -, 0)     (u) (j, -, -, 0)
    ……                     ……
(q) (j, -, -, p)     (v) (j, -, -, u)
    ……                     ……
(r) (j, -, -, q)     (w) (j, -, -, v)
t1=r                   t2=w
</code></pre></div><p>执行<code>merge(t1,t2)</code>后</p> <div class="language- extra-class"><pre class="language-text"><code>(p) (j, -, -, 0)    (u) (j, -, -, r)
    ……                 ……
(q) (j, -, -, p)    (v) (j, -, -, u)
    ……                 ……
(r) (j, -, -, q)    (w) (j, -, -, v)

链头t2=w
</code></pre></div><p>执行<code>backpatch(t2,120)</code>后</p> <div class="language- extra-class"><pre class="language-text"><code>(p) (j, -, -, 120)  (u) (j, -, -, 120)
    ……                   ……
(q) (j, -, -, 120)  (v) (j, -, -, 120)
    ……                   ……
(r) (j, -, -, 120)  (w) (j, -, -, 120)
</code></pre></div><h4 id="翻译方案-4"><a href="#翻译方案-4" class="header-anchor">#</a> 翻译方案</h4> <p><strong>if-then 不负责生成四元式，只负责填 0！！！</strong></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>S→<span class="token keyword">if</span> B then S1
S→M S1
M→<span class="token keyword">if</span> B then

M→<span class="token keyword">if</span> B then
<span class="token punctuation">{</span>
    <span class="token function">backpatch</span><span class="token punctuation">(</span>B<span class="token punctuation">.</span>T<span class="token punctuation">,</span> ip<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// B.T 即为下一句的地址，所以可以直接填当前 ip</span>
    M<span class="token punctuation">.</span>CHAIN<span class="token operator">:</span><span class="token operator">=</span>B<span class="token punctuation">.</span>F        <span class="token comment">// B.F 在后面，所以创建链表</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
 * 另外,在图9-3中，整个语句翻译完成后,B.F仍不能确定,只能
 * 将它作为S的语义值S. CHAIN暂时保留下来。如果S,本身也是控
 * 制语句(比如另一个嵌套的条件语句),它也有语义值S. CHAIN未
 * 确定,则B.F和S.CHAIN应转到同一个地方,因此要将它们链
 * 接起来,组成一个新的链,链首地址记录在S的语义值S. CHAIN
 * 中,这项工作由语义函数merge()完成。
 */</span>
S→M S1
<span class="token punctuation">{</span>
    S<span class="token punctuation">.</span>CHAIN<span class="token operator">:</span><span class="token operator">=</span><span class="token function">merge</span><span class="token punctuation">(</span>M<span class="token punctuation">.</span>CHAIN<span class="token punctuation">,</span> S1<span class="token punctuation">.</span>CHAIN<span class="token punctuation">)</span>   <span class="token comment">// B.F</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/images/daa62954bdce1fc4060c12f01af573a6fbfd1f064867d4ec239afc98af315134.png" alt="例"></p> <p>这里还有一个 bug：S 执行完以后还没有回填 <code>S.CHAIN</code>。这一步其实是交给 S 后面的分号来做的，而这是执行语句的文法，已经脱离了本节讨论的控制语句文法。因此上面的例子（以及后面的例子）并没有提及。</p> <p><img src="/images/8af0d3b8f0eab8c266b20fcfcfe50699f88c43844e6c9a3801de824e3ff4b8ff.png" alt="分号时的回填"></p> <hr> <p><strong>if-then-else 只需要生成一个四元式：then 后的语句执行完以后要 jump 到 else 后</strong></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>S→<span class="token keyword">if</span> B then S1 <span class="token keyword">else</span> S2 
M→<span class="token keyword">if</span> B then
N→M S1 <span class="token keyword">else</span>
S→N S2

M→<span class="token keyword">if</span> B then
<span class="token punctuation">{</span>
    <span class="token function">backpatch</span><span class="token punctuation">(</span>B<span class="token punctuation">.</span>T<span class="token punctuation">,</span> ip<span class="token punctuation">)</span><span class="token punctuation">;</span>
    M<span class="token punctuation">.</span>CHAIN<span class="token operator">:</span><span class="token operator">=</span>B<span class="token punctuation">.</span>F
<span class="token punctuation">}</span>

N→M S1 <span class="token keyword">else</span>
<span class="token punctuation">{</span>
    q<span class="token operator">:</span><span class="token operator">=</span>ip<span class="token punctuation">;</span>
    <span class="token function">gen</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span><span class="token operator">-</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">backpatch</span><span class="token punctuation">(</span>M<span class="token punctuation">.</span>CHAIN<span class="token punctuation">,</span>ip<span class="token punctuation">)</span><span class="token punctuation">;</span>
    N<span class="token punctuation">.</span>CHAIN<span class="token operator">:</span><span class="token operator">=</span><span class="token function">merge</span><span class="token punctuation">(</span>S1<span class="token punctuation">.</span>CHAIN <span class="token punctuation">,</span> q<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

S→N S2
<span class="token punctuation">{</span>
    S<span class="token punctuation">.</span>CHAIN<span class="token operator">:</span><span class="token operator">=</span><span class="token function">merge</span><span class="token punctuation">(</span>N<span class="token punctuation">.</span>CHAIN<span class="token punctuation">,</span> S2<span class="token punctuation">.</span>CHAIN<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/images/6ca77bb3a28e8468e6cde20c3e1ac86be6c2a39771fbd9258095156baeedc7b0.png" alt="例子"></p> <h3 id="while-语句的翻译"><a href="#while-语句的翻译" class="header-anchor">#</a> While 语句的翻译</h3> <h4 id="文法-5"><a href="#文法-5" class="header-anchor">#</a> 文法</h4> <div class="language- extra-class"><pre class="language-text"><code>S→while B do S1
</code></pre></div><h4 id="翻译方案-5"><a href="#翻译方案-5" class="header-anchor">#</a> 翻译方案</h4> <p><strong>while 语句其实就是 if-then 语句多了一个 jump</strong></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>W→<span class="token keyword">while</span>
D→W B <span class="token keyword">do</span>
S→D S1

W→<span class="token keyword">while</span>
<span class="token punctuation">{</span>
    W<span class="token punctuation">.</span>code <span class="token operator">:</span><span class="token operator">=</span> ip<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

D→W B <span class="token keyword">do</span>
<span class="token punctuation">{</span>
    <span class="token function">backpatch</span><span class="token punctuation">(</span>B<span class="token punctuation">.</span>T<span class="token punctuation">,</span> ip<span class="token punctuation">)</span><span class="token punctuation">;</span>
    D<span class="token punctuation">.</span>CHAIN <span class="token operator">=</span> B<span class="token punctuation">.</span>F<span class="token punctuation">;</span>
    D<span class="token punctuation">.</span>code <span class="token operator">=</span> W<span class="token punctuation">.</span>code<span class="token punctuation">;</span>    <span class="token comment">// 子变量值传给父变量</span>
<span class="token punctuation">}</span>

S→D S1
<span class="token punctuation">{</span>
    <span class="token function">backpatch</span><span class="token punctuation">(</span>S1<span class="token punctuation">.</span>CHAIN<span class="token punctuation">,</span>D<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">gen</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span><span class="token operator">-</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token punctuation">,</span>D<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    S<span class="token punctuation">.</span>CHAIN<span class="token operator">:</span><span class="token operator">=</span>D<span class="token punctuation">.</span>CHAIN<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/images/b6085cb54bcba45d87b6b8fe2c0e9e8416743f73127e158b9dfba3e433c1fc49.png" alt="例子"></p> <blockquote><p>可以看出,许多语句的最后都有一个S.CHAIN链,然而对赋值语句来说,没有需要返填的三地址语句,为了统一，我们给赋值语句赋一个空链。语义程序如下:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>S-&gt;A
{S.CHAIN=0;}
</code></pre></div><h3 id="for-循环语句的翻译"><a href="#for-循环语句的翻译" class="header-anchor">#</a> For 循环语句的翻译</h3> <h4 id="文法-6"><a href="#文法-6" class="header-anchor">#</a> 文法</h4> <div class="language- extra-class"><pre class="language-text"><code>S→for i:=1 to N do S1
</code></pre></div><p>其语义为：</p> <div class="language- extra-class"><pre class="language-text"><code>        i:=1;
again:  if i&lt;=N then begin
            S1;
            i:=i+1;
            goto again
        end
</code></pre></div><p>代码结构可为：</p> <div class="language- extra-class"><pre class="language-text"><code>F+0:（:=，'1'，-，i）
F+1: (j&lt;=,i,N,F+3)
F+2: (j,-,-,0)
F+3: (S1的四元式序列)
...
D+0: (+,i, '1',i)
D+1: (j,-,-,F+1)
</code></pre></div><h4 id="语义变量-2"><a href="#语义变量-2" class="header-anchor">#</a> 语义变量</h4> <p>为了在生成S1的代码之前生成i:=1等三个语句,必须改写文法。</p> <div class="language- extra-class"><pre class="language-text"><code>F→for i:=1 to N do
S→F S1
</code></pre></div><ul><li><code>F.again</code>:记录F+1</li> <li><code>F.CHAIN</code>:记录前述F+2的地址</li> <li><code>F.place</code>:记录i在符号表入口</li></ul> <h4 id="翻译方案-6"><a href="#翻译方案-6" class="header-anchor">#</a> 翻译方案</h4> <div class="language- extra-class"><pre class="language-text"><code>F→for i:=1 to N do
{
    gen(:=,'1',-,entry(i));
    F.again:=ip;
    gen(j&lt;=,entry(i),N,F.again+2);
    F.CHAIN:=ip;
    gen(j,-,-,0);
    F.place:=entry(i)
}

S→F S1
{
    backpatch(S1.CHAIN,ip);
    gen(+,F.place,'1',F.place);
    gen(j,-,-,F.again);
    S.CHAIN:=F.CHAIN
}
</code></pre></div><p><img src="/images/f5db07b0db3aadac85a6068006578fb8547a300b99d7ee143604b8b7061fd16b.png" alt="例题"></p> <hr> <p>另一道例题：写出下面代码的中间代码序列。</p> <div class="language- extra-class"><pre class="language-text"><code>for i=1 to 10 do if A&gt;100 then C=C+1;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>100: (=, 1, -, i)
101: (J&lt;=, i, 10, 103)    F.again=103
102: (J, -, -, 109)
103: (J&gt;, A, 100, 105)
104: (J, -, -, 107)
105: (+, C, 1, t1)
106: (=, t1, -, C)
107: (+, i, 1, i)
108: (J, -, -, 103)
109:
</code></pre></div><hr> <p>更多例题：</p> <div class="language- extra-class"><pre class="language-text"><code>if  (A&lt;X) &amp; (B&gt;0) then while C&gt;0 do C:=C+D;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>
100 (j&lt;， A， X， 102)
101 (j， -， -，  109)
102 (j&gt;， B， 0， 104)
103 (j， -， -，  109)
104 (j&gt;， C， 0， 106)
105 (j， -， -，  109)
106 (+， C， D，   T1)
107 (:=， T1， -， C)
108 (j， -， -，  104)
109
</code></pre></div><hr> <div class="language- extra-class"><pre class="language-text"><code>z := 3;
while j&lt; 10 do 
begin  
   j := x+1;
   if x &lt;10 then  
           y:= A+m;
     	else  
           y:= A-m;
end
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>100 (=, 3, _, z)
101 (J&lt;, j, 10, 103)
102 (J, -, -, 113)
103 (+, x, 1, t1)
104 (=, t1, -, j)
105 (J&lt;, x, 10, 107)
106 (J, -, -, 110)
107 (+, A, m, t2)
108 (=, t2, -, y)
109 (J, -, -, 112)
110 (-, A, m, t3)
111 (=, t3, -, y)
112 (J, -, -, 101)
</code></pre></div><h3 id="过程的的翻译-自学"><a href="#过程的的翻译-自学" class="header-anchor">#</a> 过程的的翻译（自学）</h3> <h2 id="第十章-代码优化和目标代码生成"><a href="#第十章-代码优化和目标代码生成" class="header-anchor">#</a> 第十章 代码优化和目标代码生成</h2> <p>优化是一种<strong>等价</strong>的，<strong>有效</strong>的程序变换<br>
等价——不改变程序运行结果<br>
有效——时空效率要高</p> <p>优化按阶段分类：</p> <ol><li>源程序阶段的优化：优化数据结构和算法</li> <li>编译优化：中间代码和目标代码优化</li></ol> <p>中间代码优化：便于移植（与机器无关）。又分为：</p> <ol><li>局部优化：在基本块内的优化</li> <li>全局优化：超越基本块，基本块之间的优化</li></ol> <h3 id="局部优化"><a href="#局部优化" class="header-anchor">#</a> 局部优化</h3> <h4 id="划分基本块"><a href="#划分基本块" class="header-anchor">#</a> 划分基本块</h4> <p>(1)寻找入口语句</p> <ul><li>程序的第一条语句</li> <li>由转向语句转移到的语句</li> <li>紧跟在条件转向语句后的那个语句
(2)寻找出口语句</li> <li>转向语句</li> <li>停止语句
(3)基本块为：</li> <li>每个入口地址（含）到下一个入口地址（不含）</li> <li>每个入口地址（含）到下一个出口地址（含）
(4)不在任何基本块中的代码可以被删除</li></ul> <p><img src="/images/cc498fa6eab99b70994fa69ce76038229404764f1b57db8a85d319724c0c1814.png" alt="例题"></p> <h4 id="构造流图"><a href="#构造流图" class="header-anchor">#</a> 构造流图</h4> <p>下面是正确的废话：</p> <section class="eqno"><div class="vuepress-eqn"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><mi>N</mi><mo separator="true">,</mo><mi>E</mi><mo separator="true">,</mo><msub><mi>n</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G = (N, E, n_0)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div><span>(1)</span></section><p>(2)包含程序第一个语句的基本块，为首结点n0;
(3)设基本块 Bi , Bj ∈ N ，若满足下列条件之一，则Bi -&gt;Bj</p> <ul><li>Bj 紧跟在 Bi 之后，且 Bi 的出口语句不是无条件转向或停止语句</li> <li>Bi 的出口语句为转向语句，其转向点恰为Bj 的入口语句</li></ul> <p><img src="/images/dae87269c4dff0ba085fab374a8dccd66ef790c7f0902f510388aeb6fbd57386.png" alt="刚才那道例题"></p> <h4 id="基本块内的优化"><a href="#基本块内的优化" class="header-anchor">#</a> 基本块内的优化</h4> <h5 id="合并已知量"><a href="#合并已知量" class="header-anchor">#</a> 合并已知量</h5> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">// 优化前</span>
B <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">1</span>
C <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">2</span>
A <span class="token operator">:</span><span class="token operator">=</span> B <span class="token operator">+</span> C

<span class="token comment">// 优化后</span>
A <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">3</span>
</code></pre></div><h5 id="删除公共子表达式"><a href="#删除公共子表达式" class="header-anchor">#</a> 删除公共子表达式</h5> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">// 优化前</span>
B <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">1</span>
C <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">2</span>
A <span class="token operator">:</span><span class="token operator">=</span> B <span class="token operator">+</span> C
D <span class="token operator">:</span><span class="token operator">=</span> B <span class="token operator">+</span> C

<span class="token comment">// 优化后</span>
D <span class="token operator">:</span><span class="token operator">=</span> A
</code></pre></div><h5 id="删除无用赋值"><a href="#删除无用赋值" class="header-anchor">#</a> 删除无用赋值</h5> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">// 优化前</span>
A <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">1</span>
A <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">2</span>

<span class="token comment">// 优化后</span>
A <span class="token operator">:</span><span class="token operator">=</span><span class="token number">2</span>
</code></pre></div><h5 id="删除死代码"><a href="#删除死代码" class="header-anchor">#</a> 删除死代码</h5> <p>若某个基本块实际不可能被执行，该基本块为死代码，可以删除。</p> <h5 id="例题"><a href="#例题" class="header-anchor">#</a> 例题</h5> <p><img src="/images/cec8a73551063cae6fc453f801ff9f6458e6a8647631f2d18649e204e28c5405.png" alt="例题"></p> <h3 id="全局优化-自学"><a href="#全局优化-自学" class="header-anchor">#</a> 全局优化（自学）</h3> <p>本节只讨论对循环进行的优化。</p> <h4 id="循环的定义"><a href="#循环的定义" class="header-anchor">#</a> 循环的定义</h4> <p>循环：程序流图中，有唯一入口结点的强连通子图。</p> <p>强连通子图：子图里面任意两个结点可以互通。</p> <p><img src="/images/c22e7e12c131182563aafce26165a1862e8214cec7f3d752cacd5a4ee5b32b9d.png" alt="程序流图"></p> <p><code>{5, 6, 7, 8, 9}</code> 是循环：所有点都互通，且 5 是唯一入口。</p> <h4 id="循环的查找"><a href="#循环的查找" class="header-anchor">#</a> 循环的查找</h4> <ol><li>必经结点：从流图的首结点出发，到达结点n的任一通路都<strong>必须经过</strong>的结点d，称为n的必经结点。记为 <code>d DOM n</code></li></ol> <ul><li>每个结点是它本身的必经结点，即<code>n DOM n</code></li> <li>首结点是任一结点的必经结点，即<code>n0 DOM n</code></li></ul> <p>上图的必经节点集：</p> <div class="language- extra-class"><pre class="language-text"><code>D(1)={1}
D(2)={1,2}
D(3)={1,2,3}
D(4)={1,2,4}
D(5)={1,2,4,5}
D(6)={1,2,4,5,6}
D(7)={1,2,4,5,6,7}
D(8)={1,2,4,5,6,8}
D(9)={1,2,4,5,6,9}
D(10)={1,2,4,10}
</code></pre></div><ol start="2"><li>回边：若 d 是 n 必经节点，且存在边 n-&gt;d，则该边为回边。</li></ol> <p>上图有三条回边：</p> <div class="language- extra-class"><pre class="language-text"><code>5-&gt;4
9-&gt;5
10-&gt;2
</code></pre></div><ol start="3"><li>若 n-&gt;d 是回边，则图里能到n且不经过d的点的集合+n+d 就是由 n-&gt;d 组成的循环</li></ol> <p><img src="/images/c22e7e12c131182563aafce26165a1862e8214cec7f3d752cacd5a4ee5b32b9d.png" alt="程序流图"></p> <p>上图的循环有：</p> <div class="language- extra-class"><pre class="language-text"><code>5-&gt;4 组成 {5, 4, 6, 7, 8, 9}
9-&gt;5 组成 {9, 5, 6, 7, 8}
10-&gt;2 组成 {10, 2, 3, 4, 5, 6, 7, 8, 9}
</code></pre></div><h4 id="循环优化方法"><a href="#循环优化方法" class="header-anchor">#</a> 循环优化方法</h4> <h5 id="代码外提"><a href="#代码外提" class="header-anchor">#</a> 代码外提</h5> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 优化前</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">float</span> pi <span class="token operator">=</span> <span class="token function">acos</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 优化后</span>
<span class="token keyword">float</span> pi <span class="token operator">=</span> <span class="token function">acos</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="强度削弱"><a href="#强度削弱" class="header-anchor">#</a> 强度削弱</h5> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 优化前</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 把乘法优化成加法后</span>
<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    j <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>例子中，<code>i=循环次数+c</code> 叫做基本归纳变量；<code>j=循环次数*c1+c2</code> 叫做同族归纳变量。强度削弱把基本归纳变量变为同族归纳变量，将乘法变为加法，还可以将普通加法变为变址器加法。</p> <h5 id="删除归纳变量"><a href="#删除归纳变量" class="header-anchor">#</a> 删除归纳变量</h5> <p>即改用同族归纳变量作为判断条件</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// 优化前</span>
<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    j <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 优化后</span>
<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    j <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="例题-2"><a href="#例题-2" class="header-anchor">#</a> 例题</h5> <p>优化前：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>PROD <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>I <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>T1 <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token function">I</span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>T2 <span class="token operator">:</span><span class="token operator">=</span> a0 – <span class="token number">4</span>
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>T3 <span class="token operator">:</span><span class="token operator">=</span> T2<span class="token punctuation">[</span>T1<span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>T4 <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token function">I</span>
<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>T5 <span class="token operator">:</span><span class="token operator">=</span> b0 – <span class="token number">4</span>
<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>T6 <span class="token operator">:</span><span class="token operator">=</span> T5<span class="token punctuation">[</span>T4<span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>T7 <span class="token operator">:</span><span class="token operator">=</span> T3 <span class="token operator">*</span> <span class="token function">T6</span>
<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>PROD <span class="token operator">:</span><span class="token operator">=</span> PROD <span class="token operator">+</span> <span class="token function">T7</span>
<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>I <span class="token operator">:</span><span class="token operator">=</span> I <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token keyword">if</span>  I ≤ <span class="token number">20</span> <span class="token keyword">goto</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><p>优化后：</p> <div class="language- extra-class"><pre class="language-text"><code>(1)PROD := 0
(2)T1 = 0;
(3)T2 := a0 – 4
(4)T5 := b0 – 4
(5)T1 := T1 + 4;
(6)T3 := T2[T1]
(7)T6 := T5[T1]
(8)T7 := T3 * T6
(9)PROD := PROD + T7
(10)if T1 ≤ 80 goto (5) 
</code></pre></div><h3 id="目标代码生成-2"><a href="#目标代码生成-2" class="header-anchor">#</a> 目标代码生成</h3> <p>目标代码生成的主要问题：</p> <ol><li>选择合适的指令 生成最短的代码</li> <li>充分利用有限的寄存器</li></ol> <p>如何充分利用寄存器（自学）</p> <h2 id="第十一章-运行时存储空间的组织"><a href="#第十一章-运行时存储空间的组织" class="header-anchor">#</a> 第十一章 运行时存储空间的组织</h2> <h3 id="变量及存储分配"><a href="#变量及存储分配" class="header-anchor">#</a> 变量及存储分配</h3></div> <hr role="separator" aria-orientation="horizontal" class="ma-4 v-divider theme--light"> <div data-v-5794ffe6><script src="https://giscus.app/client.js" async="async" service="giscus" data-repo="lyh543/blog-comments" data-repo-id="R_kgDOHIb2Zg" data-category="Announcements" data-category-id="DIC_kwDOHIb2Zs4COh2z" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" data-v-5794ffe6></script></div></div></div></article></div> <!----></div></div> <div class="v-dialog__container"><button type="button" role="button" aria-haspopup="true" aria-expanded="false" class="v-btn v-btn--bottom v-btn--is-elevated v-btn--fab v-btn--fixed v-btn--has-bg v-btn--right v-btn--round theme--dark v-size--default primary"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-information-variant theme--dark"></i></span></button><!----></div></div></div></main> <footer id="footer" class="v-footer v-sheet theme--light v-footer--absolute v-footer--padless v-footer--inset" style="left:0px;right:0px;bottom:0px;"><div class="lighten-1 text-center v-card v-sheet theme--light rounded-0" style="width:100%;"><div class="v-card__text"><a href="https://github.com/lyh543/vuepress-theme-blog-material/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-github theme--light" style="font-size:24px;"></i></span></a><a href="https://blog.lyh543.cn/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-web theme--light" style="font-size:24px;"></i></span></a><a href="mailto:lyh543@outlook.com" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-email theme--light" style="font-size:24px;"></i></span></a><a href="https://weibo.com/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-sina-weibo theme--light" style="font-size:24px;"></i></span></a><a href="https://weixin.qq.com/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-wechat theme--light" style="font-size:24px;"></i></span></a><a href="https://qq.com/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-qqchat theme--light" style="font-size:24px;"></i></span></a><a href="https://bilibili.com/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><div class="v-image v-responsive theme--light" style="max-width:24px;"><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a></div> <hr role="separator" aria-orientation="horizontal" class="v-divider theme--light"> <div class="v-card__text"><span class="footer-text">lyh543 © 2019 - 2022</span>
        |
      <a href="https://beian.miit.gov.cn/" target="_blank" class="footer-link">蜀ICP备19034464号</a>
        |
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" class="footer-link">署名 - 非商业性 - 相同方式共享 4.0 国际协议</a>
        |
       <span class="footer-text">
        Theme
        <a href="https://github.com/lyh543/vuepress-theme-blog-material/" target="_blank" class="footer-link">
          vuepress-theme-blog-material
        </a></span></div></div></footer></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ba06a0b0.js" defer></script><script src="/assets/js/33.924560b9.js" defer></script>
  </body>
</html>
