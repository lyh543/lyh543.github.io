<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>编译原理 课程笔记 | 小灰灰灰灰的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="计算机科学,课程笔记,操作系统">
    <meta name="description" content="第一章 绪论一到四章的概念也就图一乐，真学习还得看第五章 引言语言语言：一组规则的组合  字母表的定义 词法规则：单词符号的形成规则 语法规则：（短语、从句、句子、段落、文章）语法单位的形成规则 语义规则：单词符号和语法单位的含义规则 语用规则：语义规则的发展和延伸。在一定的语境中，单词和语法单位体现出来的具体意义，需要根据上下文进行明确  机器语言、汇编语言、高级语言机器语言 -&gt; 汇编语">
<meta property="og:type" content="article">
<meta property="og:title" content="编译原理 课程笔记">
<meta property="og:url" content="https://blog.lyh543.cn/computer-science/compile-principle/index.html">
<meta property="og:site_name" content="小灰灰灰灰的博客">
<meta property="og:description" content="第一章 绪论一到四章的概念也就图一乐，真学习还得看第五章 引言语言语言：一组规则的组合  字母表的定义 词法规则：单词符号的形成规则 语法规则：（短语、从句、句子、段落、文章）语法单位的形成规则 语义规则：单词符号和语法单位的含义规则 语用规则：语义规则的发展和延伸。在一定的语境中，单词和语法单位体现出来的具体意义，需要根据上下文进行明确  机器语言、汇编语言、高级语言机器语言 -&gt; 汇编语">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.lyh543.cn/images/cad0024c4ccba28d40dffcca5cafd4140554b36ff01bccc8234bbf86499d9d90.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/178c61ae36fa6424f3e4747af31496f4ddd9190ae81c39d2ca58a3610788390c.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/432cd31bec2dbaa809608bd6a42e9ea278f336d37947802aea941e1ef337e7c4.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/70560e24331fbd6a8df89efe334b9c7fdd4c613941bfe82bf5129fd2d64f5aa0.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/17bba6eade947d132a8ff0515517bda718dadd79b19133067bd67a98c4d9030e.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/2441ab6c27f48a4c6d35ec8049508aaba00b476543b458a03c25f33a985ab1c1.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/8578c2ceb519abfa4881bec4bfd880bf6837d93c7d948d2a0a986503934950a4.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/66dcc4c9a903a20d3ba45a636158cf97795c97dd8671b7d93304d457cd17a031.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/b330b44234a4757fbc4870570b34ca3987c4bc98ec296c8f65dca455c6a46b55.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/75b326881ed95ec07a34d871141b80b78772ffe445dfcaf28aad0621f2ce854c.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/1594ddf18d4910aece338ce8f89b8543509c58bd1d0a1b0f9ac4b96869bb5cfe.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/80efc08eb7a4adbecf01ffb2aad7bcb32b7836055f3203191cd6463834ade49e.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/a5a38fe7beb30e1299a0346bc52cd3971de32325b5bfa7d767dd1231ca77d78b.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/f2478ea60f0be8e12256c571d286f6d6d2daf7effc7302a540bbc9e29f1b40bd.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/48b34d90c503ae70ce92e2063205b9f4413eeea61ba01f46322dbfb7145ccda5.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/03a4f7b8def408a0bb18b2748262a6fc2a32fbbea295ecd0cb5b9c924b9019db.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/ca5f7f0b1f95adf78a0d6d8e97b84d5ee2ced17ae0271c07f8351fcd3d929efc.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/ff3d3427cffb959c3f4d23e4668ddb2fa5aae0d785ebf936c8c01822e35fecae.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/6cd6733161bb9b970ba6592c141ad763fd2d43f06a4855c3ef61cb3eec772de4.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/fd7cb0551e7ab76b07749e4ff8189a838023025f3a957fd63b22db1294d42d72.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/a0344c8c9f6ad776273480ce590c395acd95a650547933a6f77752adff5a6b9f.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/94d3547dac8976074a9b511683636260f1ffacec8418e229cbab5b49c72b9c82.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/9f8cce28aa0229a6b030564baddc00e0386a3cdec303deebeea3b71112f14812.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/1c314a57a9e71476f2abc0c4f27e1f91d5a9d5cda971552f4276e7fa05ca3068.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/f0363638550a136fc970e43b7c2ca65be864f7f616d93128d7e076e71ef2fea2.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/3fd3bfb8b38f1d52b150c71435abf6a2c6f847b4593b06c4a6cd8a94b8a34d45.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/daa62954bdce1fc4060c12f01af573a6fbfd1f064867d4ec239afc98af315134.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/8af0d3b8f0eab8c266b20fcfcfe50699f88c43844e6c9a3801de824e3ff4b8ff.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/6ca77bb3a28e8468e6cde20c3e1ac86be6c2a39771fbd9258095156baeedc7b0.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/b6085cb54bcba45d87b6b8fe2c0e9e8416743f73127e158b9dfba3e433c1fc49.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/f5db07b0db3aadac85a6068006578fb8547a300b99d7ee143604b8b7061fd16b.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/cc498fa6eab99b70994fa69ce76038229404764f1b57db8a85d319724c0c1814.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/dae87269c4dff0ba085fab374a8dccd66ef790c7f0902f510388aeb6fbd57386.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/cec8a73551063cae6fc453f801ff9f6458e6a8647631f2d18649e204e28c5405.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/c22e7e12c131182563aafce26165a1862e8214cec7f3d752cacd5a4ee5b32b9d.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/c22e7e12c131182563aafce26165a1862e8214cec7f3d752cacd5a4ee5b32b9d.png">
<meta property="article:published_time" content="2021-03-02T02:51:02.000Z">
<meta property="article:modified_time" content="2021-09-11T12:19:35.019Z">
<meta property="article:author" content="lyh543">
<meta property="article:tag" content="计算机科学">
<meta property="article:tag" content="课程笔记">
<meta property="article:tag" content="操作系统">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.lyh543.cn/images/cad0024c4ccba28d40dffcca5cafd4140554b36ff01bccc8234bbf86499d9d90.png">
    
        <link rel="alternate" type="application/atom+xml" title="小灰灰灰灰的博客" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="mdi mdi-close icon-lg"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">lyh543</h5>
          <a href="mailto:lyh543@outlook.com" title="lyh543@outlook.com" class="mail">lyh543@outlook.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg mdi mdi-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg mdi mdi-archive"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg mdi mdi-tag-multiple"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg mdi mdi-format-list-bulleted-square"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/lyh543" target="_blank" >
                <i class="icon icon-lg mdi mdi-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg mdi mdi-menu"></i>
        </a>
        <div class="flex-col header-title ellipsis">编译原理 课程笔记</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg mdi mdi-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg mdi mdi-magnify"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg mdi mdi-share-variant"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">编译原理 课程笔记</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-03-02T02:51:02.000Z" itemprop="datePublished" class="page-time">
  2021-03-02
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/">计算机科学</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第一章-绪论"><span class="post-toc-text">第一章 绪论</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#引言"><span class="post-toc-text">引言</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#语言"><span class="post-toc-text">语言</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#机器语言、汇编语言、高级语言"><span class="post-toc-text">机器语言、汇编语言、高级语言</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#翻译"><span class="post-toc-text">翻译</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#解释"><span class="post-toc-text">解释</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#强制式语言、函数式语言、逻辑式语言、对象式语言"><span class="post-toc-text">强制式语言、函数式语言、逻辑式语言、对象式语言</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#绑定"><span class="post-toc-text">绑定</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#静态和动态"><span class="post-toc-text">静态和动态</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#变量的四个属性"><span class="post-toc-text">变量的四个属性</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第二章-数据类型"><span class="post-toc-text">第二章 数据类型</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第三章-控制结构"><span class="post-toc-text">第三章 控制结构</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第四章-程序语言的设计"><span class="post-toc-text">第四章 程序语言的设计</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#前言"><span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#文法"><span class="post-toc-text">文法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#文法的形式定义"><span class="post-toc-text">文法的形式定义</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#产生式的简化"><span class="post-toc-text">产生式的简化</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#文法的表示"><span class="post-toc-text">文法的表示</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#文法的分类"><span class="post-toc-text">文法的分类</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#推导的表示"><span class="post-toc-text">推导的表示</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#句型、句子、语言"><span class="post-toc-text">句型、句子、语言</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#文法等价"><span class="post-toc-text">文法等价</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#推导树"><span class="post-toc-text">推导树</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第五章-编译"><span class="post-toc-text">第五章 编译</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#复习概念"><span class="post-toc-text">复习概念</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#编译步骤"><span class="post-toc-text">编译步骤</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#词法分析"><span class="post-toc-text">词法分析</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#语法分析"><span class="post-toc-text">语法分析</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#语义分析与中间代码生成"><span class="post-toc-text">语义分析与中间代码生成</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#优化"><span class="post-toc-text">优化</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#目标代码生成"><span class="post-toc-text">目标代码生成</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#完整的程序处理过程"><span class="post-toc-text">完整的程序处理过程</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#编译前端和后端"><span class="post-toc-text">编译前端和后端</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第六章-词法分析"><span class="post-toc-text">第六章 词法分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#概述"><span class="post-toc-text">概述</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#单词的种类"><span class="post-toc-text">单词的种类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#单词的输出形式"><span class="post-toc-text">单词的输出形式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#单词类别的划分"><span class="post-toc-text">单词类别的划分</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#状态转换图"><span class="post-toc-text">状态转换图</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#词法分析器的转换图"><span class="post-toc-text">词法分析器的转换图</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#词法分析器"><span class="post-toc-text">词法分析器</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第七章-自上而下的语法分析"><span class="post-toc-text">第七章 自上而下的语法分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#引言-1"><span class="post-toc-text">引言</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#回溯分析法"><span class="post-toc-text">回溯分析法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#公共左因子"><span class="post-toc-text">公共左因子</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#左递归"><span class="post-toc-text">左递归</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#回溯分析法特点"><span class="post-toc-text">回溯分析法特点</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#主要缺陷"><span class="post-toc-text">主要缺陷</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#递归下降分析法"><span class="post-toc-text">递归下降分析法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方法步骤"><span class="post-toc-text">方法步骤</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#递归下降分析器的构造"><span class="post-toc-text">递归下降分析器的构造</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#预测分析法"><span class="post-toc-text">预测分析法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#构造-First-集"><span class="post-toc-text">构造 First 集</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#构造-Follow-集"><span class="post-toc-text">构造 Follow 集</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第八章-自下而上语法分析"><span class="post-toc-text">第八章 自下而上语法分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#概念"><span class="post-toc-text">概念</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#算符优先分析法"><span class="post-toc-text">算符优先分析法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#构造-FIRSTVT-集"><span class="post-toc-text">构造 FIRSTVT 集</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#构造-LASTVT-集"><span class="post-toc-text">构造 LASTVT 集</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#算符优先关系表"><span class="post-toc-text">算符优先关系表</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#LR-分析法"><span class="post-toc-text">LR 分析法</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第九章-语义分析"><span class="post-toc-text">第九章 语义分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#符号表"><span class="post-toc-text">符号表</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#语义分析概论"><span class="post-toc-text">语义分析概论</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#语义分析的主要工作"><span class="post-toc-text">语义分析的主要工作</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#语法制导翻译"><span class="post-toc-text">语法制导翻译</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#语义值"><span class="post-toc-text">语义值</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#中间代码"><span class="post-toc-text">中间代码</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#简单赋值语法分析的翻译"><span class="post-toc-text">简单赋值语法分析的翻译</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#语义变量及过程"><span class="post-toc-text">语义变量及过程</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#翻译方案"><span class="post-toc-text">翻译方案</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#类型转换"><span class="post-toc-text">类型转换</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#说明语句的翻译"><span class="post-toc-text">说明语句的翻译</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#文法-1"><span class="post-toc-text">文法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#语义变量和过程"><span class="post-toc-text">语义变量和过程</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#翻译方案-1"><span class="post-toc-text">翻译方案</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#控制语句的翻译"><span class="post-toc-text">控制语句的翻译</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#布尔表达式的翻译"><span class="post-toc-text">布尔表达式的翻译</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#文法-2"><span class="post-toc-text">文法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#语义变量"><span class="post-toc-text">语义变量</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#转移语句的四元式"><span class="post-toc-text">转移语句的四元式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#翻译方案-2"><span class="post-toc-text">翻译方案</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#无条件转移语句翻译"><span class="post-toc-text">无条件转移语句翻译</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#goto-L，L-已经定义"><span class="post-toc-text">goto L，L 已经定义</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#goto-L，L-未定义"><span class="post-toc-text">goto L，L 未定义</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#标号语句的处理方法"><span class="post-toc-text">标号语句的处理方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#If-条件语句的翻译"><span class="post-toc-text">If 条件语句的翻译</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#文法-3"><span class="post-toc-text">文法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#语义变量及过程-1"><span class="post-toc-text">语义变量及过程</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#翻译方案-3"><span class="post-toc-text">翻译方案</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#While-语句的翻译"><span class="post-toc-text">While 语句的翻译</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#文法-4"><span class="post-toc-text">文法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#翻译方案-4"><span class="post-toc-text">翻译方案</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#For-循环语句的翻译"><span class="post-toc-text">For 循环语句的翻译</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#文法-5"><span class="post-toc-text">文法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#语义变量-1"><span class="post-toc-text">语义变量</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#翻译方案-5"><span class="post-toc-text">翻译方案</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#过程的的翻译（自学）"><span class="post-toc-text">过程的的翻译（自学）</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第十章-代码优化和目标代码生成"><span class="post-toc-text">第十章 代码优化和目标代码生成</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#局部优化"><span class="post-toc-text">局部优化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#划分基本块"><span class="post-toc-text">划分基本块</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#构造流图"><span class="post-toc-text">构造流图</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#基本块内的优化"><span class="post-toc-text">基本块内的优化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#合并已知量"><span class="post-toc-text">合并已知量</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#删除公共子表达式"><span class="post-toc-text">删除公共子表达式</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#删除无用赋值"><span class="post-toc-text">删除无用赋值</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#删除死代码"><span class="post-toc-text">删除死代码</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#例题"><span class="post-toc-text">例题</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#全局优化（自学）"><span class="post-toc-text">全局优化（自学）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#循环的定义"><span class="post-toc-text">循环的定义</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#循环的查找"><span class="post-toc-text">循环的查找</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#循环优化方法"><span class="post-toc-text">循环优化方法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#代码外提"><span class="post-toc-text">代码外提</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#强度削弱"><span class="post-toc-text">强度削弱</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#删除归纳变量"><span class="post-toc-text">删除归纳变量</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#例题-1"><span class="post-toc-text">例题</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#目标代码生成-1"><span class="post-toc-text">目标代码生成</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第十一章-运行时存储空间的组织"><span class="post-toc-text">第十一章 运行时存储空间的组织</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#变量及存储分配"><span class="post-toc-text">变量及存储分配</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-computer-science/compile-principle"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">编译原理 课程笔记</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-03-02 10:51:02" datetime="2021-03-02T02:51:02.000Z"  itemprop="datePublished">2021-03-02</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/">计算机科学</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="第一章-绪论"><a href="#第一章-绪论" class="headerlink" title="第一章 绪论"></a>第一章 绪论</h2><p>一到四章的概念也就图一乐，真学习还得看第五章</p>
<h3 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h3><h4 id="语言"><a href="#语言" class="headerlink" title="语言"></a>语言</h4><p><strong>语言：一组规则的组合</strong></p>
<ol>
<li><strong>字母表</strong>的定义</li>
<li><strong>词法规则</strong>：<strong>单词符号</strong>的形成规则</li>
<li><strong>语法规则</strong>：（短语、从句、句子、段落、文章）<strong>语法单位</strong>的形成规则</li>
<li><strong>语义规则</strong>：<strong>单词符号</strong>和<strong>语法单位</strong>的<strong>含义</strong>规则</li>
<li><strong>语用规则</strong>：语义规则的发展和延伸。在一定的语境中，单词和语法单位体现出来的具体意义，需要根据上下文进行明确</li>
</ol>
<h4 id="机器语言、汇编语言、高级语言"><a href="#机器语言、汇编语言、高级语言" class="headerlink" title="机器语言、汇编语言、高级语言"></a>机器语言、汇编语言、高级语言</h4><p><code>机器语言 -&gt; 汇编语言 -&gt; 高级语言</code></p>
<ul>
<li><strong>机器语言</strong>：由二进制指令组成。计算机可以直接执行</li>
<li><strong>汇编语言</strong>：将机器语言符号化的结果</li>
<li><strong>低级语言</strong>：与机器有关的语言（指令的操作码、指令格式、寻址方式、数据格式）</li>
<li><strong>高级语言</strong>：和机器无关的语言</li>
</ul>
<h4 id="翻译"><a href="#翻译" class="headerlink" title="翻译"></a>翻译</h4><ul>
<li>翻译：等价的变换</li>
</ul>
<blockquote>
<p>计算机只可直接执行用机器语言编写的程序。而用汇编语言和高级语言编写的程序，机器不能直接执行。必须将它们翻译成完全等价的机器语言程序才能执行。</p>
</blockquote>
<ul>
<li>翻译过程：</li>
</ul>
<p>机器语言 &lt;–<code>汇编程序</code>– 汇编语言 &lt;–<code>编译程序</code>– 高级语言</p>
<ul>
<li>实现：编写一个高级语言的编译程序的工作，通常称为对这个语言的实现</li>
</ul>
<hr>
<p>与编译有关的三种语言、三种程序：</p>
<ul>
<li>源语言、宿主语言、目标语言</li>
<li>源程序、编译程序、目标程序<br>高级语言涉及的三类人：</li>
<li>设计者、实现者、使用者</li>
</ul>
<h4 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h4><ul>
<li>BASIC 是最简单的高级语言。BASIC 程序不是编译执行，而是对源程序进行解释（分析），直接计算出结果。</li>
<li><strong>解释</strong>需要解释程序(解释器) </li>
<li>LISP，ML，Prolog 和 Smalltalk 均是解释型的语言。</li>
<li>Java 被当作一种解释型语言。翻译产生字节码的中间代码，  可以在 Java 虚拟机上运行。</li>
</ul>
<hr>
<ul>
<li>解释执行特别适合于<strong>动态语言</strong>和<strong>交互式环境</strong>，便于人机对话。</li>
<li>重复执行的语句需要重复翻译，比编译执行要花去更多的时间，执行效率较低。 </li>
</ul>
<h3 id="强制式语言、函数式语言、逻辑式语言、对象式语言"><a href="#强制式语言、函数式语言、逻辑式语言、对象式语言" class="headerlink" title="强制式语言、函数式语言、逻辑式语言、对象式语言"></a>强制式语言、函数式语言、逻辑式语言、对象式语言</h3><p>程序设计语言按设计的理论基础分为四类语言:  </p>
<ol>
<li>强制式语言:基础是冯·诺依曼模型</li>
<li>函数式语言:基础是数学函数(函数运算)</li>
<li>逻辑式语言:基础是数理逻辑、谓词演算</li>
<li>对象式语言:基础是抽象数据类型</li>
</ol>
<h4 id="绑定"><a href="#绑定" class="headerlink" title="绑定"></a>绑定</h4><ol>
<li><strong>实体</strong>：程序的组成部分，如变量，表达式、程序单元等</li>
<li><strong>属性</strong>：实体具有的特性</li>
<li><strong>绑定</strong>：实体与其各种属性建立起联系的过程称为绑定（约束）</li>
<li>**描述符(表)**：描述实体属性的表格</li>
</ol>
<h4 id="静态和动态"><a href="#静态和动态" class="headerlink" title="静态和动态"></a>静态和动态</h4><ul>
<li>静态特性：编译时能确定的特性</li>
<li>动态特性：运行时才能确定的特性</li>
</ul>
<hr>
<ul>
<li>静态绑定：绑定在编译时完成，且在运行时不会改变。</li>
<li>动态绑定：绑定在运行时完成。</li>
</ul>
<hr>
<ul>
<li>静态作用域绑定:按照程序的结构定义变量的作用域（C语言等）。依据定义变量的位置进行确定。</li>
<li>动态作用域绑定:按照过程的调用关系动态地定义变量的作用域（SNOBL4 语言等） </li>
</ul>
<h4 id="变量的四个属性"><a href="#变量的四个属性" class="headerlink" title="变量的四个属性"></a>变量的四个属性</h4><ol>
<li>作用域：全局变量、局部变量、非局部变量</li>
<li>生存期</li>
<li>值</li>
<li>类型</li>
</ol>
<p>快进到第四章</p>
<h2 id="第二章-数据类型"><a href="#第二章-数据类型" class="headerlink" title="第二章 数据类型"></a>第二章 数据类型</h2><p>略</p>
<h2 id="第三章-控制结构"><a href="#第三章-控制结构" class="headerlink" title="第三章 控制结构"></a>第三章 控制结构</h2><p>略</p>
<h2 id="第四章-程序语言的设计"><a href="#第四章-程序语言的设计" class="headerlink" title="第四章 程序语言的设计"></a>第四章 程序语言的设计</h2><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>语言 = 语法 + 语义</p>
<p>描述语法的方法：文法 or 语法图</p>
<blockquote>
<p>文法和语法图是语言语法的等价表示。</p>
</blockquote>
<p>文法：</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">&lt;标识符&gt;</span>→<span class="variable">&lt;字母&gt;</span></span><br><span class="line"><span class="variable">&lt;标识符&gt;</span>→<span class="variable">&lt;标识符&gt;</span><span class="variable">&lt;字母&gt;</span></span><br><span class="line"><span class="variable">&lt;标识符&gt;</span>→<span class="variable">&lt;标识符&gt;</span><span class="variable">&lt;数字&gt;</span></span><br><span class="line"><span class="variable">&lt;字母&gt;</span>→A|<span class="string">…</span>|<span class="string">Z</span>|<span class="string">a</span>|<span class="string">…</span>|z</span><br><span class="line"><span class="variable">&lt;数字&gt;</span>→0|<span class="string">…</span>|9</span><br></pre></td></tr></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/cad0024c4ccba28d40dffcca5cafd4140554b36ff01bccc8234bbf86499d9d90.png" alt="语法图" title="">
                </div>
                <div class="image-caption">语法图</div>
            </figure>

<hr>
<p>描述语义的方法：许多语言仍采用自然语言描述语义。</p>
<h3 id="文法"><a href="#文法" class="headerlink" title="文法"></a>文法</h3><h4 id="文法的形式定义"><a href="#文法的形式定义" class="headerlink" title="文法的形式定义"></a>文法的形式定义</h4><p>文法的形式定义： $G = (V_T, V_N, S, P)$</p>
<ul>
<li>$V_T$ 为<strong>终结符</strong>的非空有限集；</li>
<li>$V_N$ 为<strong>非终结符</strong>的非空有限集； </li>
<li>$V=V_T \bigcup V_N$</li>
<li>$S$ 是文法的<strong>开始符号</strong>，有 $S\in V_N$ ；</li>
<li>$P$ 为产生式 $\alpha\to\beta$ 的非空有限集，其中：</li>
<li>$\alpha$ 和 $\beta$ 是由终结符、非终结符组成的串，且 $\alpha$ 至少应含有一个非终结符。即 $\alpha=V^*V_NV^*, \beta=V^*$</li>
<li>$^*$ 表示前面的符号重复零次或多次（这很正则表达式）</li>
</ul>
<blockquote>
<p>G: Grammar<br>T: Terminal Symbols<br>N: Non-Terminal Symbols<br>S: Start Symbol<br>P: Production</p>
</blockquote>
<h4 id="产生式的简化"><a href="#产生式的简化" class="headerlink" title="产生式的简化"></a>产生式的简化</h4><p>$$\left.\begin{aligned}<br>\alpha&amp;\to\beta_1 \\<br>\alpha&amp;\to\beta_2 \\<br>&amp;…\\<br>\alpha&amp;\to\beta_n<br>\end{aligned}\right\}<br>\alpha\to\beta_1|\beta_2|\beta_n<br>$$</p>
<p>$\beta_1, \beta_2, \beta_n$ 称为 $\alpha$ 的候选式。</p>
<h4 id="文法的表示"><a href="#文法的表示" class="headerlink" title="文法的表示"></a>文法的表示</h4><p>描述文法，直接给出产生式集合 (P) 即可。</p>
<p>$$\begin{aligned}<br>E &amp;→ E+T | E-T | T \\<br>T &amp;→ T*F | T/F | F \\<br>F &amp;→ (E) | i<br>\end{aligned}$$</p>
<h4 id="文法的分类"><a href="#文法的分类" class="headerlink" title="文法的分类"></a>文法的分类</h4><p>分为 0 型文法、1 型文法、2 型文法、3 型文法。数字越大，规定越严格，越规范。</p>
<table>
<thead>
<tr>
<th>文法</th>
<th>（在上一级基础上增加）限制</th>
<th>中文</th>
</tr>
</thead>
<tbody><tr>
<td>0型文法(PSG)</td>
<td>$\alpha\to\beta$</td>
<td>无限制</td>
</tr>
<tr>
<td>1型文法(上下文有关文法CSG)</td>
<td>$α$ 长度小于 $β$ 长度（$S→ε$例外）</td>
<td>右边的表达式长于左边</td>
</tr>
<tr>
<td>2型文法(上下文无关文法CFG)</td>
<td>$A→β$</td>
<td>左边是独立的非标识符</td>
</tr>
<tr>
<td>3型文法(正则文法RG,或右线性文法RLG)</td>
<td>$A→u$或$A→wB$, $u\in V_T^*, w\in V_T^+$</td>
<td>右边不以非标识符开头</td>
</tr>
</tbody></table>
<h4 id="推导的表示"><a href="#推导的表示" class="headerlink" title="推导的表示"></a>推导的表示</h4><ul>
<li>直接推导（由产生式右边替换产生式左边）： $wαγ\Rightarrow wβγ$</li>
<li>任意步推导（0 步或多步）：$y \Rightarrow^* z$</li>
<li>多步推导（1 步或多步）：$y \Rightarrow^+ z$</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/178c61ae36fa6424f3e4747af31496f4ddd9190ae81c39d2ca58a3610788390c.png" alt="例 1" title="">
                </div>
                <div class="image-caption">例 1</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/432cd31bec2dbaa809608bd6a42e9ea278f336d37947802aea941e1ef337e7c4.png" alt="例 2 -- 最右推导" title="">
                </div>
                <div class="image-caption">例 2 -- 最右推导</div>
            </figure>

<p><strong>最右推导：总是展开最右边的非终结符</strong></p>
<h4 id="句型、句子、语言"><a href="#句型、句子、语言" class="headerlink" title="句型、句子、语言"></a>句型、句子、语言</h4><p>$G = (V_T, V_N, S, P)$</p>
<ul>
<li>句型：S 能推导出的 $w$</li>
<li>句子：S 能推导出的只含终结符的 $w$</li>
<li>语言：G 产生的所有句子的集合 $L(G)=\{α│S\Rightarrow^+α 且 α\in V_T^*\}$</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/70560e24331fbd6a8df89efe334b9c7fdd4c613941bfe82bf5129fd2d64f5aa0.png" alt="例 2 -- 标识符" title="">
                </div>
                <div class="image-caption">例 2 -- 标识符</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/17bba6eade947d132a8ff0515517bda718dadd79b19133067bd67a98c4d9030e.png" alt="例 3" title="">
                </div>
                <div class="image-caption">例 3</div>
            </figure>

<p>例 4 有点难。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/2441ab6c27f48a4c6d35ec8049508aaba00b476543b458a03c25f33a985ab1c1.png" alt="例 4，需要上下有关文法表示，难点" title="">
                </div>
                <div class="image-caption">例 4，需要上下有关文法表示，难点</div>
            </figure>

<h4 id="文法等价"><a href="#文法等价" class="headerlink" title="文法等价"></a>文法等价</h4><p>两个文法 $G$ 和 $G’$，如果有 $L(G)=L(G’)$，则称 $G$ 和 $G’$ 等价</p>
<h4 id="推导树"><a href="#推导树" class="headerlink" title="推导树"></a>推导树</h4><p>对于文法 $E→E+E|E*E|(E)|i$，句子 $i+i*i$，其两棵推导树：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/8578c2ceb519abfa4881bec4bfd880bf6837d93c7d948d2a0a986503934950a4.png" alt="i+i*i 的推导树" title="">
                </div>
                <div class="image-caption">i+i*i 的推导树</div>
            </figure>

<p>文法的二义性：一个句子有两棵不同的推导树。</p>
<h2 id="第五章-编译"><a href="#第五章-编译" class="headerlink" title="第五章 编译"></a>第五章 编译</h2><h3 id="复习概念"><a href="#复习概念" class="headerlink" title="复习概念"></a>复习概念</h3><ul>
<li>源语言、宿主语言、目标语言 </li>
<li>源程序、编译程序、目标程序</li>
</ul>
<hr>
<ul>
<li>自驻留：若<strong>编译程序</strong>生成<strong>宿主机执行</strong>的机器代码，称为自驻留的编译程序</li>
<li>自编译：若<strong>编译程序</strong>是<strong>用源语言编写</strong>的，则为自编译的编译程序</li>
<li>交叉编译：若<strong>编译程序生成</strong>的<strong>不是宿主机(别的机器)执行</strong>的机器代码，称为交叉编译</li>
</ul>
<h3 id="编译步骤"><a href="#编译步骤" class="headerlink" title="编译步骤"></a>编译步骤</h3><p>逻辑上：</p>
<ol>
<li>源程序的分析</li>
<li>目标程序的合成</li>
</ol>
<p>具体：</p>
<ol>
<li><strong>词法分析</strong></li>
<li><strong>语法分析</strong></li>
<li><strong>语义分析与中间代码生成</strong></li>
<li><strong>中间代码优化</strong></li>
<li><strong>目标代码生成</strong></li>
</ol>
<p>编译的每个步骤都需要进行<strong>符号表管理</strong>和<strong>出错处理</strong>。</p>
<h4 id="词法分析"><a href="#词法分析" class="headerlink" title="词法分析"></a>词法分析</h4><ul>
<li>分析输入字符串</li>
<li>根据词法规则识别出<strong>单词符号</strong>：基本字、标识符、字面常量、运算符和界符</li>
</ul>
<h4 id="语法分析"><a href="#语法分析" class="headerlink" title="语法分析"></a>语法分析</h4><ul>
<li>根据语法规则，识别各类<strong>语法单位</strong>：表达式、语句、程序单元和程序</li>
<li>进行<strong>语法检查</strong></li>
</ul>
<h4 id="语义分析与中间代码生成"><a href="#语义分析与中间代码生成" class="headerlink" title="语义分析与中间代码生成"></a>语义分析与中间代码生成</h4><ul>
<li>根据语义规则，对语法正确的语法单位进行<strong>翻译</strong></li>
<li>可以直接生成目标程序</li>
<li>但目标程序的执行效率低</li>
<li>因此，生成中间代码</li>
</ul>
<p>中间代码：</p>
<ul>
<li>大多数编译器采用中间代码来描述源程序的语义。</li>
<li>这种中间语言对应某种<strong>抽象机</strong></li>
<li>结构简单，语义明确，易于翻译成目标代码，同时也便于优化和移植。</li>
</ul>
<h4 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h4><ul>
<li>对中间代码进行等价变换，提高代码的时空效率。</li>
<li>语义分析产生的中间代码不依赖于实际机器，易于实现一些等价变换，使生成的目标程序占用空间更少，执行更快。</li>
</ul>
<h4 id="目标代码生成"><a href="#目标代码生成" class="headerlink" title="目标代码生成"></a>目标代码生成</h4><ul>
<li>根据优化后的中间代码及有关信息，可生成较为有效的目标代码：</li>
<li>目标机的机器语言程序或汇编语言程序</li>
<li>若生成的是汇编语言程序，还需由将其汇编成机器语言程序。</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/66dcc4c9a903a20d3ba45a636158cf97795c97dd8671b7d93304d457cd17a031.png" alt="编译器的结构" title="">
                </div>
                <div class="image-caption">编译器的结构</div>
            </figure>

<h3 id="完整的程序处理过程"><a href="#完整的程序处理过程" class="headerlink" title="完整的程序处理过程"></a>完整的程序处理过程</h3><p>从分析源程序到建立一个可执行的目标程序，处理过程还需要其它工具程序的配合：</p>
<ol>
<li><strong>预处理器</strong></li>
<li><strong>汇编器</strong></li>
<li><strong>连接器</strong></li>
<li><strong>装入器</strong></li>
</ol>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/b330b44234a4757fbc4870570b34ca3987c4bc98ec296c8f65dca455c6a46b55.png" alt="完整的程序处理过程" title="">
                </div>
                <div class="image-caption">完整的程序处理过程</div>
            </figure>

<h3 id="编译前端和后端"><a href="#编译前端和后端" class="headerlink" title="编译前端和后端"></a>编译前端和后端</h3><ul>
<li>在现代编译器中，通常将编译过程划分为前端和后端两大部分，分别加以实现。</li>
<li>前端和后端通过<strong>中间代码</strong>连接，可极大的提高编译器设计与实现的效率。</li>
<li><strong>前端</strong>：主要是与源程序相关的部分，包括<strong>词法、语法分析、语义分析和中间代码生成</strong>等。</li>
<li><strong>后端</strong>：主要是与目标程序相关的部分，包括<strong>优化、目标代码生成</strong>等。</li>
</ul>
<h2 id="第六章-词法分析"><a href="#第六章-词法分析" class="headerlink" title="第六章 词法分析"></a>第六章 词法分析</h2><p>从这里才开始变难。</p>
<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>词法分析：扫描源程序的字符串,按照词法规则,识别出单词符号作为输出；对识别过程中发现的<strong>词法错误</strong>(非法的字符、不正确常量、程序括号等) 进行处理。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/75b326881ed95ec07a34d871141b80b78772ffe445dfcaf28aad0621f2ce854c.png" alt="词法分析器和编译器的关系（1）" title="">
                </div>
                <div class="image-caption">词法分析器和编译器的关系（1）</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/1594ddf18d4910aece338ce8f89b8543509c58bd1d0a1b0f9ac4b96869bb5cfe.png" alt="词法分析器和编译器的关系（2）" title="">
                </div>
                <div class="image-caption">词法分析器和编译器的关系（2）</div>
            </figure>

<h3 id="单词的种类"><a href="#单词的种类" class="headerlink" title="单词的种类"></a>单词的种类</h3><ul>
<li>标识符</li>
<li>关键字</li>
<li>常量</li>
<li>运算符</li>
<li>分界符</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(*pointer!=<span class="string">'\0'</span>) pointer++;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>       关键字   	 </span><br><span class="line">(           界符	 </span><br><span class="line">*           运算符 	 </span><br><span class="line">pointer     标识符   	 </span><br><span class="line">!=          运算符	 </span><br><span class="line"><span class="string">'\0'</span>        常量     	 </span><br><span class="line">)	        界符	 </span><br><span class="line">pointer     标识符</span><br><span class="line">++          运算符   	 </span><br><span class="line">;           界符	 </span><br><span class="line"><span class="string">'\n'</span>        界符</span><br></pre></td></tr></table></figure>

<h3 id="单词的输出形式"><a href="#单词的输出形式" class="headerlink" title="单词的输出形式"></a>单词的输出形式</h3><p>采用二元式：<code>(单词类别，单词)</code></p>
<ul>
<li>单词类别：区分单词所属的类(整数编码)</li>
<li>单词：单词的属性值</li>
</ul>
<h3 id="单词类别的划分"><a href="#单词类别的划分" class="headerlink" title="单词类别的划分"></a>单词类别的划分</h3><p>单词的编码随类别不同而不同。<br><strong>基本字、运算符、界符</strong>的数目是确定的，<strong>一字一码</strong>，它的<strong>第二元可以空缺</strong>。</p>
<ul>
<li><strong>标识符</strong>通归一类。  </li>
<li><strong>常量</strong>可按整型、实型、字符型、布尔型等分类。  </li>
<li>常量或标识符将由第二元—-单词的属性值来区别：<ul>
<li>通常将常数在常量表中的位置（编号）作为常量的属性值；</li>
<li>将标识符在符号表中的位置（编号）作为标识符的属性值。</li>
</ul>
</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/80efc08eb7a4adbecf01ffb2aad7bcb32b7836055f3203191cd6463834ade49e.png" alt="单词符号的编码表" title="">
                </div>
                <div class="image-caption">单词符号的编码表</div>
            </figure>

<h3 id="状态转换图"><a href="#状态转换图" class="headerlink" title="状态转换图"></a>状态转换图</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/a5a38fe7beb30e1299a0346bc52cd3971de32325b5bfa7d767dd1231ca77d78b.png" alt="状态转换图 例" title="">
                </div>
                <div class="image-caption">状态转换图 例</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/f2478ea60f0be8e12256c571d286f6d6d2daf7effc7302a540bbc9e29f1b40bd.png" alt="标识符的状态转换图" title="">
                </div>
                <div class="image-caption">标识符的状态转换图</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/48b34d90c503ae70ce92e2063205b9f4413eeea61ba01f46322dbfb7145ccda5.png" alt="整数的状态转换图" title="">
                </div>
                <div class="image-caption">整数的状态转换图</div>
            </figure>

<h3 id="词法分析器的转换图"><a href="#词法分析器的转换图" class="headerlink" title="词法分析器的转换图"></a>词法分析器的转换图</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/03a4f7b8def408a0bb18b2748262a6fc2a32fbbea295ecd0cb5b9c924b9019db.png" alt="词法分析器的转换图(1)" title="">
                </div>
                <div class="image-caption">词法分析器的转换图(1)</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/ca5f7f0b1f95adf78a0d6d8e97b84d5ee2ced17ae0271c07f8351fcd3d929efc.png" alt="词法分析器的转换图(2)" title="">
                </div>
                <div class="image-caption">词法分析器的转换图(2)</div>
            </figure>

<h3 id="词法分析器"><a href="#词法分析器" class="headerlink" title="词法分析器"></a>词法分析器</h3><p>略，看 PPT 吧</p>
<h2 id="第七章-自上而下的语法分析"><a href="#第七章-自上而下的语法分析" class="headerlink" title="第七章 自上而下的语法分析"></a>第七章 自上而下的语法分析</h2><ul>
<li>编译理论中，语法分析是对高级语言的语法单位的结构进行分析。</li>
<li>语法单位结构可以用<strong>上下文无关文法</strong>来描述。</li>
<li><strong>下推自动机</strong>可用于识别上下文无关文法所描述的语法单位。</li>
<li>上下文无关文法及下推自动机是语法分析的理论基础。</li>
</ul>
<p>语法分析：对无关文法 $G = (V_T, V_N, S, P)$ 及符号串 $w$，判断 $w$ 是否是文法 $G$ 的一个合法句子，即：<br>$$S\Rightarrow^*w$$  </p>
<h3 id="引言-1"><a href="#引言-1" class="headerlink" title="引言"></a>引言</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/ff3d3427cffb959c3f4d23e4668ddb2fa5aae0d785ebf936c8c01822e35fecae.png" alt="语法分析的功能" title="">
                </div>
                <div class="image-caption">语法分析的功能</div>
            </figure>

<p>语法分析的方法通常有两类：</p>
<ul>
<li>自上而下(自顶向下)的分析方法（第七章）：从 $S$ 出发，能否找到一个<strong>最左推导</strong>序列，使得 $S\Rightarrow^*w$；或者从根结点 $S$ 开始，能否构造一棵<strong>语法树</strong>，使得该语法树的叶结点自左至右的连接正好是 $w$。</li>
<li>自下而上(自底向上)的分析方法（第八章）：从 $w$ 出发，能否找到一个最左规约（最右推导的逆过程）序列，逐步进行规约，直至文法的开始符号 $S$。</li>
</ul>
<hr>
<p>自上而下的语法分析可分为不确定和确定的两类。</p>
<ul>
<li><strong>回溯分析法</strong>是不确定的分析方法。</li>
<li><strong>递归下降分析法</strong>和<strong>预测分析</strong>法属于确定的分析方法。</li>
</ul>
<h3 id="回溯分析法"><a href="#回溯分析法" class="headerlink" title="回溯分析法"></a>回溯分析法</h3><p>其实就是 <strong>DFS</strong>。</p>
<p>实例：</p>
<p>$$\begin{aligned}<br>S&amp;→xAy \\<br>A&amp;→ab│a<br>\end{aligned}$$</p>
<p>输入串为 $xay$。</p>
<p>回溯分析的动画过程看 PPT。</p>
<ul>
<li>采取试探<strong>的</strong>方法来分析每一个候选式，分析的过程很可能产生<strong>回溯</strong>。</li>
<li>可能产生回溯的原因有： (1)公共左因子 (2)左递归 (3)$ε$ 产生式</li>
</ul>
<h4 id="公共左因子"><a href="#公共左因子" class="headerlink" title="公共左因子"></a>公共左因子</h4><p>公共左因子，是指在文法的产生式集合中，某个非终结符的多个候选式具有相同的前缀。</p>
<p>$$A→αβ_1│αβ_2$$</p>
<ul>
<li>若所有候选式都没有公共左因子，就可以选择惟一匹配的候选式，减少不必要的回溯</li>
</ul>
<h4 id="左递归"><a href="#左递归" class="headerlink" title="左递归"></a>左递归</h4><ul>
<li>左递归：$A\Rightarrow^+Aβ$</li>
<li>直接左递归：$A\Rightarrow Aβ$</li>
</ul>
<h4 id="回溯分析法特点"><a href="#回溯分析法特点" class="headerlink" title="回溯分析法特点"></a>回溯分析法特点</h4><p>回溯分析法是一种<strong>不确定</strong>的方法：使用试探的方法穷举每一种可能，当分析不成功时，则回退到适当位置再重新试探其余可能的推导。穷尽所有可能的推导，仍不成功，才能确认输入串不是该文法的句子。</p>
<h4 id="主要缺陷"><a href="#主要缺陷" class="headerlink" title="主要缺陷"></a>主要缺陷</h4><ol>
<li>选择候选式进行推导是<strong>盲目</strong>的</li>
<li>若文法存在左递归，语法分析还可能产生无限<strong>递归</strong></li>
<li>引起时间和空间的大量<strong>消耗</strong></li>
<li>无法指出语法错误的<strong>确切位置</strong></li>
</ol>
<p>针对产生回溯的原因，提出消除回溯的方法：引进确定的语法分析方法——<strong>递归下降分析法</strong>和<strong>预测分析法</strong>。</p>
<p>为了消除回溯，对任何一个非终结符和当前的待匹配符号，期望</p>
<ul>
<li>要么只有一个候选式可用</li>
<li>要么没有候选式可用</li>
</ul>
<h3 id="递归下降分析法"><a href="#递归下降分析法" class="headerlink" title="递归下降分析法"></a>递归下降分析法</h3><h4 id="方法步骤"><a href="#方法步骤" class="headerlink" title="方法步骤"></a>方法步骤</h4><ol>
<li>提取公共左因子（看 PPT）</li>
<li>消除左递归</li>
</ol>
<ul>
<li><strong>消除直接左递归</strong>（改写为右递归）</li>
<li>间接左递归（$A\Rightarrow^+Aα$）的消除利用算法进行<br>a. 将文法 $G$ 的所有非终结符按任一给定的顺序排列为 $A_1，A_2，…，A_n$<br>b. 消除可能的左递归（算法见后）<br>c. 化简：删除多余产生式</li>
</ul>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 消除左递归</span></span><br><span class="line"><span class="keyword">for</span> i:=<span class="number">1</span> to n <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">for</span> j:=<span class="number">1</span> to i<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">    把形如Ai→Ajα的产生式改写为</span><br><span class="line">      Ai→δ<span class="number">1</span>α|δ<span class="number">2</span>α|...|δkα</span><br><span class="line">    消除Ai产生式可能的直接左递归</span><br></pre></td></tr></table></figure>

<p>消除例子中的左递归：</p>
<p>$$\begin{aligned}<br>S&amp;→Qc│c \\<br>Q&amp;→Rb│b \\<br>R&amp;→Sa│a \\<br>\end{aligned}$$</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/6cd6733161bb9b970ba6592c141ad763fd2d43f06a4855c3ef61cb3eec772de4.png" alt="题解" title="">
                </div>
                <div class="image-caption">题解</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/fd7cb0551e7ab76b07749e4ff8189a838023025f3a957fd63b22db1294d42d72.png" alt="题解 2" title="">
                </div>
                <div class="image-caption">题解 2</div>
            </figure>

<h4 id="递归下降分析器的构造"><a href="#递归下降分析器的构造" class="headerlink" title="递归下降分析器的构造"></a>递归下降分析器的构造</h4><p>在文法 G 中，如果</p>
<ul>
<li>没有任何公共左因子</li>
<li>没有任何左递归<br>则有可能构造出不带回溯的分析程序</li>
</ul>
<h3 id="预测分析法"><a href="#预测分析法" class="headerlink" title="预测分析法"></a>预测分析法</h3><h4 id="构造-First-集"><a href="#构造-First-集" class="headerlink" title="构造 First 集"></a>构造 First 集</h4><ol>
<li><code>A -&gt; aB</code>，A 就有 <code>{a}</code></li>
<li><code>A -&gt; B</code>，A 可以把 B 的复制过来</li>
<li><code>A -&gt; BC</code>，若 B 可以为 ε，A 就还能复制 C 的</li>
</ol>
<h4 id="构造-Follow-集"><a href="#构造-Follow-集" class="headerlink" title="构造 Follow 集"></a>构造 Follow 集</h4><ol>
<li>S</li>
</ol>
<p>FIRSTVT<br>E + ( * i<br>T * ( i<br>F ( i</p>
<h2 id="第八章-自下而上语法分析"><a href="#第八章-自下而上语法分析" class="headerlink" title="第八章 自下而上语法分析"></a>第八章 自下而上语法分析</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><ul>
<li>短语：某个祖先的所有没孩子的子孙组成的语句</li>
<li>直接短语：某个没有孙子的爸爸的孩子组成的语句</li>
<li>句柄：最左直接短语</li>
<li>素短语：短语至少有一个终结符，且不不含更小的素短语（若 <code>i</code> 是素短语，则 <code>Fi*</code> 不是素短语）</li>
</ul>
<h3 id="算符优先分析法"><a href="#算符优先分析法" class="headerlink" title="算符优先分析法"></a>算符优先分析法</h3><h4 id="构造-FIRSTVT-集"><a href="#构造-FIRSTVT-集" class="headerlink" title="构造 FIRSTVT 集"></a>构造 FIRSTVT 集</h4><ol>
<li><code>A -&gt; aBc</code> 或 <code>A -&gt; Bac</code>，A 就有 <code>{a}</code></li>
<li><code>A -&gt; BC</code>，A 可以把 B 的复制过来</li>
<li><code>A -&gt; BC</code>，若 B 可以为 ε，A 就还能复制 C 的</li>
</ol>
<h4 id="构造-LASTVT-集"><a href="#构造-LASTVT-集" class="headerlink" title="构造 LASTVT 集"></a>构造 LASTVT 集</h4><ol>
<li><code>A -&gt; caB</code> 或 <code>A -&gt; cBa</code>，A 就有 <code>{a}</code></li>
<li><code>A -&gt; BC</code>，A 可以把 C 的复制过来</li>
<li><code>A -&gt; BC</code>，若 C 可以为 ε，A 就还能复制 B 的</li>
</ol>
<h4 id="算符优先关系表"><a href="#算符优先关系表" class="headerlink" title="算符优先关系表"></a>算符优先关系表</h4><ol>
<li>优先：先归约的符号被称为优先级高。</li>
<li>先看行，再看列。如 <code>+</code> 行 <code>i</code> 列为 <code>&gt;</code>，则 <code>+</code> &gt; <code>i</code>。</li>
<li>规则：若 <code>E+T</code>，则 <code>LASTVT(E)</code> &gt; <code>+</code>，<code>+</code> &lt; <code>FIRSTVT(T)</code>。<ul>
<li>还要添加 <code>#S#</code> 这个文法</li>
<li>这里的大于、小于没有对称性（<code>a&gt;b</code> 不能推出 <code>b&lt;a</code>）</li>
<li>推荐先填等号，再按行填小于，再按列填大于</li>
</ul>
</li>
</ol>
<h3 id="LR-分析法"><a href="#LR-分析法" class="headerlink" title="LR 分析法"></a>LR 分析法</h3><h2 id="第九章-语义分析"><a href="#第九章-语义分析" class="headerlink" title="第九章 语义分析"></a>第九章 语义分析</h2><h3 id="符号表"><a href="#符号表" class="headerlink" title="符号表"></a>符号表</h3><p>符号表：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">名字 <span class="string">| 信息</span></span><br></pre></td></tr></table></figure>

<p>常用的符号表结构：线性表、Hash 表</p>
<h3 id="语义分析概论"><a href="#语义分析概论" class="headerlink" title="语义分析概论"></a>语义分析概论</h3><h4 id="语义分析的主要工作"><a href="#语义分析的主要工作" class="headerlink" title="语义分析的主要工作"></a>语义分析的主要工作</h4><p>语义分析 = <strong>静态语义检查</strong> + <strong>语义处理</strong></p>
<p>静态语义检查：<br>(1) <strong>类型检查</strong>：数据的使用应与类型匹配<br>(2) <strong>控制流检查</strong>：用以保证控制语句有合法的转向点:<br>如不允许goto语句转入case语句流; break语句需要在switch或循环语句.<br>(3) <strong>一致性检查</strong>：如数组维数是否正确; 变量是否已经定义；变量是否重名；case常量不能相同等。</p>
<p>语义处理：<br><strong>说明语句</strong>: 登记信息；<br><strong>执行语句</strong>：生成中间代码。</p>
<h4 id="语法制导翻译"><a href="#语法制导翻译" class="headerlink" title="语法制导翻译"></a>语法制导翻译</h4><p>为<strong>每个产生式</strong>配上一个<strong>语义子程序</strong></p>
<p>在<strong>语法分析过程中</strong>，根据每个产生式对应的语义子程序（语义动作）进行翻译（生成中间代码）的方法称为语法制导翻译。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/a0344c8c9f6ad776273480ce590c395acd95a650547933a6f77752adff5a6b9f.png" alt="语法分析采用自底向上的LR分析法(1)" title="">
                </div>
                <div class="image-caption">语法分析采用自底向上的LR分析法(1)</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/94d3547dac8976074a9b511683636260f1ffacec8418e229cbab5b49c72b9c82.png" alt="语法分析采用自底向上的LR分析法(2)" title="">
                </div>
                <div class="image-caption">语法分析采用自底向上的LR分析法(2)</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/9f8cce28aa0229a6b030564baddc00e0386a3cdec303deebeea3b71112f14812.png" alt="语法分析采用自底向上的LR分析法(3)" title="">
                </div>
                <div class="image-caption">语法分析采用自底向上的LR分析法(3)</div>
            </figure>

<h4 id="语义值"><a href="#语义值" class="headerlink" title="语义值"></a>语义值</h4><p>在描述语义动作时，需要赋予每个文法符号以各种不同的“值”，这些值统称为“语义值”.如，“类型”，“种属”，“地址”或“代码”等。通常用X.TYPE,X.CAT,X.VAL来表示这些值。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/1c314a57a9e71476f2abc0c4f27e1f91d5a9d5cda971552f4276e7fa05ca3068.png" alt="picture 7" title="">
                </div>
                <div class="image-caption">picture 7</div>
            </figure>

<h4 id="中间代码"><a href="#中间代码" class="headerlink" title="中间代码"></a>中间代码</h4><p>中间代码一种与具体机器无关的抽象代码，有多种形式。四元式形式: <code>(op,ARG1,ARG2,RESULT)</code></p>
<p>op—运算符<br>ARG1—第一运算量<br>ARG2—第二运算量<br>RESULT—结果</p>
<p>如: <code>A:=（-B）*(C+D)</code> 翻译成</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">@</span>,B,_,t1)</span><br><span class="line">(<span class="name"><span class="builtin-name">+</span></span>,C,D,t2)</span><br><span class="line">(<span class="name"><span class="builtin-name">*</span></span>,t1,t2,t3)</span><br><span class="line">(<span class="name">:=</span>,t3,_,A)</span><br></pre></td></tr></table></figure>

<p>四元式出现顺序和表达式计值顺序一致;四元式之间的联系通过<strong>临时变量</strong>来实现。</p>
<h3 id="简单赋值语法分析的翻译"><a href="#简单赋值语法分析的翻译" class="headerlink" title="简单赋值语法分析的翻译"></a>简单赋值语法分析的翻译</h3><h4 id="语义变量及过程"><a href="#语义变量及过程" class="headerlink" title="语义变量及过程"></a>语义变量及过程</h4><ul>
<li><code>X.a</code>：文法符X相应属性a,如i.name,E.place。E.place:表示E所代表的变量在符号表的入口地址。</li>
<li><code>newtemp</code>：语义函数，每调用一次产生一个新的临时变量。</li>
<li><code>entry(i)</code>：语义函数，查符号表，返回变量i的入口。</li>
<li><code>IP</code>：指令指针，初始化为0，也可以是指定的初值。</li>
<li><code>gen(OP,ARG1,ARG2,RESULT)</code>：语义过程，生成一个四元式<code>(OP,ARG1,ARG2,RESULT)</code>,并填入四元式表中。同时 <code>ip:=ip+1</code></li>
</ul>
<h4 id="翻译方案"><a href="#翻译方案" class="headerlink" title="翻译方案"></a>翻译方案</h4><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A → i:=E</span><br><span class="line">E → E1 op E2 | <span class="type">-E1</span> |<span class="type">(E1</span>)| <span class="type">i</span></span><br></pre></td></tr></table></figure>

<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">A→i:=E</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">P</span>=entry(i.NAME);</span><br><span class="line">    <span class="keyword">If</span>(P!=0) </span><br><span class="line">        gen ( :=, E.place, _, P)</span><br><span class="line">    <span class="keyword">Else</span> <span class="builtin-name">error</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">E→E1 op E2</span><br><span class="line">&#123;</span><br><span class="line">    E.place:=newtemp;</span><br><span class="line">    gen(op,E1.place,E2.place,E.place)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">E →-E1 </span><br><span class="line">&#123;</span><br><span class="line">    E.place:=newtemp; </span><br><span class="line">    gen(@,E1.place,_,E.place)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">E →(E1)</span><br><span class="line">&#123;  E.place:= E1.place  &#125;</span><br><span class="line"></span><br><span class="line">E →i  </span><br><span class="line">&#123;  <span class="attribute">P</span>=entry(i.NAME);</span><br><span class="line">  <span class="keyword">If</span>(P!=0)  E.place:=P</span><br><span class="line">  <span class="keyword">Else</span> <span class="builtin-name">error</span>();</span><br></pre></td></tr></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/f0363638550a136fc970e43b7c2ca65be864f7f616d93128d7e076e71ef2fea2.png" alt="a:=-b*(c+d)的移进-归约过程" title="">
                </div>
                <div class="image-caption">a:=-b*(c+d)的移进-归约过程</div>
            </figure>

<h4 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h4><p>对表达式E增加类型属性<code>E.type</code>;<br>引进类型转换指令 <code>(itr,x,_,t)</code></p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">t:=newtemp;</span><br><span class="line"><span class="keyword">if</span> E1<span class="class">.<span class="keyword">type</span></span>=integer </span><br><span class="line">   <span class="keyword">and</span> E2<span class="class">.<span class="keyword">type</span></span>=integer </span><br><span class="line"><span class="keyword">then</span> <span class="keyword">begin</span></span><br><span class="line">  gen(opi,E1.place,E2,place,t);</span><br><span class="line">  E<span class="class">.<span class="keyword">type</span>:</span>=integer</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> E1<span class="class">.<span class="keyword">type</span></span>=real <span class="keyword">and</span> E2<span class="class">.<span class="keyword">type</span></span>=real </span><br><span class="line"><span class="keyword">then</span> <span class="keyword">begin</span> </span><br><span class="line">  gen(opr,E1.place,E2.place,t);</span><br><span class="line">  E<span class="class">.<span class="keyword">type</span>:</span>=real  </span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> E1<span class="class">.<span class="keyword">type</span></span>=integer <span class="keyword">then</span></span><br><span class="line">  <span class="keyword">begin</span> t1:=newtemp;</span><br><span class="line">    gen(itr,E1.place,_,t1);</span><br><span class="line">    gen(opr,t1,E2.place,t);</span><br><span class="line">    E<span class="class">.<span class="keyword">type</span>:</span>=real</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">begin</span> t1:=newtemp;</span><br><span class="line">  gen(itr,E2.place,_,t1);</span><br><span class="line">  gen(opr,E1.place,t1,t);</span><br><span class="line">  E<span class="class">.<span class="keyword">type</span>:</span>=real</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line">E.place:=t;</span><br></pre></td></tr></table></figure>

<h3 id="说明语句的翻译"><a href="#说明语句的翻译" class="headerlink" title="说明语句的翻译"></a>说明语句的翻译</h3><p>不产生可执行指令<br>仅负责填表：将被说明对象的类型及相对存储位置记入各自的符号表中</p>
<h4 id="文法-1"><a href="#文法-1" class="headerlink" title="文法"></a>文法</h4><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">D→D;D│i:T</span><br><span class="line">T→<span class="built_in">real</span>│<span class="built_in">integer</span>│<span class="built_in">array</span>[<span class="built_in">num</span>] of T1│↑T1</span><br></pre></td></tr></table></figure>

<h4 id="语义变量和过程"><a href="#语义变量和过程" class="headerlink" title="语义变量和过程"></a>语义变量和过程</h4><p>负责填下面两个东西！</p>
<p>(1)<code>offset</code>:相对位移量,初值为0,是一个全局变量<br>(2)<code>T.type</code>:数据类型<br>(3)<code>T.width</code>:数据宽度<br>(4)<code>enter</code>:语义过程,将变量名及其类型和相对存储位置记入符号表中。</p>
<h4 id="翻译方案-1"><a href="#翻译方案-1" class="headerlink" title="翻译方案"></a>翻译方案</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">S →MD</span><br><span class="line">M →ε        &#123; <span class="keyword">offset</span>:=<span class="number">0</span> &#125;</span><br><span class="line">D → D1;D2</span><br><span class="line">D →i:T      &#123; enter(i.name,T.<span class="keyword">type</span>,<span class="keyword">offset</span>); <span class="keyword">offset</span> := <span class="keyword">offset</span>+T.width &#125;</span><br><span class="line">T→<span class="type">integer</span> &#123;  T.<span class="keyword">type</span>:=<span class="type">integer</span>;  T.width:=<span class="number">4</span>  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="控制语句的翻译"><a href="#控制语句的翻译" class="headerlink" title="控制语句的翻译"></a>控制语句的翻译</h3><h3 id="布尔表达式的翻译"><a href="#布尔表达式的翻译" class="headerlink" title="布尔表达式的翻译"></a>布尔表达式的翻译</h3><h4 id="文法-2"><a href="#文法-2" class="headerlink" title="文法"></a>文法</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">B→i</span></span><br><span class="line"><span class="keyword">B→i1 </span>rop i2</span><br><span class="line"></span><br><span class="line">（<span class="number">1</span>）<span class="meta">if</span>  <span class="keyword">B </span> then  S</span><br><span class="line">（<span class="number">2</span>）<span class="meta">if</span>  <span class="keyword">B </span> then  S <span class="meta">else</span> S</span><br><span class="line">（<span class="number">3</span>）<span class="meta">while</span> <span class="keyword">B </span>do S</span><br></pre></td></tr></table></figure>

<h4 id="语义变量"><a href="#语义变量" class="headerlink" title="语义变量"></a>语义变量</h4><ul>
<li><code>B.T</code>：真出口，记录B为真的转移语句的地址；</li>
<li><code>B.F</code>：假出口，记录B为假的转移语句的地址。</li>
</ul>
<h4 id="转移语句的四元式"><a href="#转移语句的四元式" class="headerlink" title="转移语句的四元式"></a>转移语句的四元式</h4><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">jrop</span>,P1,P2,<span class="number">0</span>) </span><br><span class="line">(<span class="name">jnz</span>,P1,-,<span class="number">0</span>)</span><br><span class="line">(<span class="name">j</span>,-,-,<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>0 是转移地址，从上往下分析的时候可能不知道要转义到哪里，所以会挖坑，后面会填坑。</p>
<h4 id="翻译方案-2"><a href="#翻译方案-2" class="headerlink" title="翻译方案"></a>翻译方案</h4><figure class="highlight puppet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">B→i</span><br><span class="line">&#123;</span><br><span class="line">    B.T:=ip;</span><br><span class="line">    gen(jnz,entry(i),-,0);</span><br><span class="line">    B.F:=ip;</span><br><span class="line">    gen(j,-,-,0)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">B→i1 rop i2</span><br><span class="line">&#123;</span><br><span class="line">    B.T:=ip;</span><br><span class="line">    gen(jrop,entry(i1),entry(i2),0);</span><br><span class="line">    B.F:=ip;</span><br><span class="line">    gen(j,-,-,0)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="无条件转移语句翻译"><a href="#无条件转移语句翻译" class="headerlink" title="无条件转移语句翻译"></a>无条件转移语句翻译</h3><h4 id="goto-L，L-已经定义"><a href="#goto-L，L-已经定义" class="headerlink" title="goto L，L 已经定义"></a>goto L，L 已经定义</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">…</span><br><span class="line">L: ...   <span class="comment">/*此时，将L登记入符号表*/</span></span><br><span class="line">…</span><br><span class="line"><span class="keyword">goto</span> L;  <span class="comment">/*查表，发现L已定义，生成四元式*/</span></span><br></pre></td></tr></table></figure>

<h4 id="goto-L，L-未定义"><a href="#goto-L，L-未定义" class="headerlink" title="goto L，L 未定义"></a>goto L，L 未定义</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">…</span><br><span class="line"><span class="keyword">goto</span> L; <span class="comment">/*将L记入符号表，定义否标记为“否”，</span></span><br><span class="line"><span class="comment">         地址栏写当前IP，生产无条件转移 */</span></span><br><span class="line">…</span><br><span class="line"><span class="keyword">goto</span> L; <span class="comment">/*拉链，即生成向上指的链表*/</span></span><br><span class="line">…</span><br><span class="line">L: …   <span class="comment">/*定义否标记改为“是”，回填，即根据链表依次改写跳转的地址栏*/</span></span><br><span class="line">…</span><br></pre></td></tr></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/3fd3bfb8b38f1d52b150c71435abf6a2c6f847b4593b06c4a6cd8a94b8a34d45.png" alt="拉链" title="">
                </div>
                <div class="image-caption">拉链</div>
            </figure>


<h3 id="标号语句的处理方法"><a href="#标号语句的处理方法" class="headerlink" title="标号语句的处理方法"></a>标号语句的处理方法</h3><p>文法： </p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">label</span><span class="bash"> →i:</span></span><br></pre></td></tr></table></figure>

<ol>
<li>i（假定为L）不在符号表中：则把它填入，置“类型”栏为“标号”，“定义否”栏为“已”，“地址”栏为ip的当前值；</li>
<li>若L已在符号表中，“类型” 为“标号”, “定义否”栏为“否” :把“定义否”改为“已”，然后把“地址栏”中的链首q取出，同时把ip当前值填入其中，最后执行 <code>backpatch（q，ip）</code>语义过程进行回填</li>
<li>若L已在符号表中，但“类型”不为“标号”,或“定义否” 为“已”：则“名字重定义”</li>
</ol>
<p><code>backpatch（q，ip）</code>为语义过程：把q为链首的链上所有四元式的第四区段都填为ip</p>
<h3 id="If-条件语句的翻译"><a href="#If-条件语句的翻译" class="headerlink" title="If 条件语句的翻译"></a>If 条件语句的翻译</h3><h4 id="文法-3"><a href="#文法-3" class="headerlink" title="文法"></a>文法</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">S→<span class="meta">if</span> <span class="keyword">B </span>then <span class="built_in">S1</span> │ <span class="meta">if</span> <span class="keyword">B </span>then <span class="built_in">S1</span> <span class="meta">else</span> <span class="built_in">S2</span></span><br></pre></td></tr></table></figure>

<p><code>if B then S1</code>：S1的第一条四元式<br>用以“回填”<br><code>if B then S1 else S2</code>：S1、S2的第一条四元式用以“回填”</p>
<p>(1)B具有真假出口<br>B为真假时的转向不同<br>在翻译B时其真假出口有待“回填”<br>(2)因if语句的嵌套,必须记录不确定转移目标的四元式的地址—拉链技术</p>
<h4 id="语义变量及过程-1"><a href="#语义变量及过程-1" class="headerlink" title="语义变量及过程"></a>语义变量及过程</h4><ol>
<li><code>N.CHAIN</code>：记录不确定转移目标的四元式形成的，<strong>不确定 label 地址时就调用这个</strong>；<strong>一般来说，N.CHAIN 的含义是 N 结束以后要跳的位置</strong></li>
<li><code>merge(t1,t2)</code>: 语义函数，合并链表，返回合并后的链头t2，<strong>用于合并链表/拉链</strong></li>
<li><code>backpatch(t1,code)</code>: 语义过程，用code回填t1，<strong>确定 label 地址时就调用这个</strong></li>
</ol>
<p>如:</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">(p)</span> <span class="comment">(j, -, -, 0)</span>     <span class="comment">(u)</span> <span class="comment">(j, -, -, 0)</span></span><br><span class="line">    ……                     ……</span><br><span class="line"><span class="comment">(q)</span> <span class="comment">(j, -, -, p)</span>     <span class="comment">(v)</span> <span class="comment">(j, -, -, u)</span></span><br><span class="line">    ……                     ……</span><br><span class="line"><span class="comment">(r)</span> <span class="comment">(j, -, -, q)</span>     <span class="comment">(w)</span> <span class="comment">(j, -, -, v)</span></span><br><span class="line">t<span class="number">1</span>=r                   t<span class="number">2</span>=w</span><br></pre></td></tr></table></figure>

<p>执行<code>merge(t1,t2)</code>后</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">(p)</span> <span class="comment">(j, -, -, 0)</span>    <span class="comment">(u)</span> <span class="comment">(j, -, -, r)</span></span><br><span class="line">    ……                 ……</span><br><span class="line"><span class="comment">(q)</span> <span class="comment">(j, -, -, p)</span>    <span class="comment">(v)</span> <span class="comment">(j, -, -, u)</span></span><br><span class="line">    ……                 ……</span><br><span class="line"><span class="comment">(r)</span> <span class="comment">(j, -, -, q)</span>    <span class="comment">(w)</span> <span class="comment">(j, -, -, v)</span></span><br><span class="line"></span><br><span class="line">链头t<span class="number">2</span>=w</span><br></pre></td></tr></table></figure>

<p>执行<code>backpatch(t2,120)</code>后</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">(p)</span> <span class="comment">(j, -, -, 120)</span>  <span class="comment">(u)</span> <span class="comment">(j, -, -, 120)</span></span><br><span class="line">    ……                   ……</span><br><span class="line"><span class="comment">(q)</span> <span class="comment">(j, -, -, 120)</span>  <span class="comment">(v)</span> <span class="comment">(j, -, -, 120)</span></span><br><span class="line">    ……                   ……</span><br><span class="line"><span class="comment">(r)</span> <span class="comment">(j, -, -, 120)</span>  <span class="comment">(w)</span> <span class="comment">(j, -, -, 120)</span></span><br></pre></td></tr></table></figure>

<h4 id="翻译方案-3"><a href="#翻译方案-3" class="headerlink" title="翻译方案"></a>翻译方案</h4><p><strong>if-then 不负责生成四元式，只负责填 0！！！</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">S→<span class="keyword">if</span> B then S1</span><br><span class="line">S→M S1</span><br><span class="line">M→<span class="keyword">if</span> B then</span><br><span class="line"></span><br><span class="line">M→<span class="keyword">if</span> B then</span><br><span class="line">&#123;</span><br><span class="line">    backpatch(B.T, ip); <span class="comment">// B.T 即为下一句的地址，所以可以直接填当前 ip</span></span><br><span class="line">    M.CHAIN:=B.F        <span class="comment">// B.F 在后面，所以创建链表</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 另外,在图9-3中，整个语句翻译完成后,B.F仍不能确定,只能</span></span><br><span class="line"><span class="comment"> * 将它作为S的语义值S. CHAIN暂时保留下来。如果S,本身也是控</span></span><br><span class="line"><span class="comment"> * 制语句(比如另一个嵌套的条件语句),它也有语义值S. CHAIN未</span></span><br><span class="line"><span class="comment"> * 确定,则B.F和S.CHAIN应转到同一个地方,因此要将它们链</span></span><br><span class="line"><span class="comment"> * 接起来,组成一个新的链,链首地址记录在S的语义值S. CHAIN</span></span><br><span class="line"><span class="comment"> * 中,这项工作由语义函数merge()完成。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">S→M S1</span><br><span class="line">&#123;</span><br><span class="line">    S.CHAIN:=merge(M.CHAIN, S1.CHAIN)   <span class="comment">// B.F</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/daa62954bdce1fc4060c12f01af573a6fbfd1f064867d4ec239afc98af315134.png" alt="例" title="">
                </div>
                <div class="image-caption">例</div>
            </figure>

<p>这里还有一个 bug：S 执行完以后还没有回填 <code>S.CHAIN</code>。这一步其实是交给 S 后面的分号来做的，而这是执行语句的文法，已经脱离了本节讨论的控制语句文法。因此上面的例子（以及后面的例子）并没有提及。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/8af0d3b8f0eab8c266b20fcfcfe50699f88c43844e6c9a3801de824e3ff4b8ff.png" alt="分号时的回填" title="">
                </div>
                <div class="image-caption">分号时的回填</div>
            </figure>

<hr>
<p><strong>if-then-else 只需要生成一个四元式：then 后的语句执行完以后要 jump 到 else 后</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">S→<span class="keyword">if</span> B then S1 <span class="keyword">else</span> S2 </span><br><span class="line">M→<span class="keyword">if</span> B then</span><br><span class="line">N→M S1 <span class="keyword">else</span></span><br><span class="line">S→N S2</span><br><span class="line"></span><br><span class="line">M→<span class="keyword">if</span> B then</span><br><span class="line">&#123;</span><br><span class="line">    backpatch(B.T, ip);</span><br><span class="line">    M.CHAIN:=B.F</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">N→M S1 <span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    q:=ip;</span><br><span class="line">    gen(j,-,-,<span class="number">0</span>);</span><br><span class="line">    backpatch(M.CHAIN,ip);</span><br><span class="line">    N.CHAIN:=merge(S1.CHAIN , q)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">S→N S2</span><br><span class="line">&#123;</span><br><span class="line">    S.CHAIN:=merge(N.CHAIN, S2.CHAIN)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/6ca77bb3a28e8468e6cde20c3e1ac86be6c2a39771fbd9258095156baeedc7b0.png" alt="例子" title="">
                </div>
                <div class="image-caption">例子</div>
            </figure>

<h3 id="While-语句的翻译"><a href="#While-语句的翻译" class="headerlink" title="While 语句的翻译"></a>While 语句的翻译</h3><h4 id="文法-4"><a href="#文法-4" class="headerlink" title="文法"></a>文法</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">S→<span class="meta">while</span> <span class="keyword">B </span>do <span class="built_in">S1</span></span><br></pre></td></tr></table></figure>

<h4 id="翻译方案-4"><a href="#翻译方案-4" class="headerlink" title="翻译方案"></a>翻译方案</h4><p><strong>while 语句其实就是 if-then 语句多了一个 jump</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">W→<span class="keyword">while</span></span><br><span class="line">D→W B <span class="keyword">do</span></span><br><span class="line">S→D S1</span><br><span class="line"></span><br><span class="line">W→<span class="keyword">while</span></span><br><span class="line">&#123;</span><br><span class="line">    W.code := ip;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">D→W B <span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">    backpatch(B.T, ip);</span><br><span class="line">    D.CHAIN = B.F;</span><br><span class="line">    D.code = W.code;    <span class="comment">// 子变量值传给父变量</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">S→D S1</span><br><span class="line">&#123;</span><br><span class="line">    backpatch(S1.CHAIN,D.code);</span><br><span class="line">    gen(j,-,-,D.code);</span><br><span class="line">    S.CHAIN:=D.CHAIN;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/b6085cb54bcba45d87b6b8fe2c0e9e8416743f73127e158b9dfba3e433c1fc49.png" alt="例子" title="">
                </div>
                <div class="image-caption">例子</div>
            </figure>

<blockquote>
<p>可以看出,许多语句的最后都有一个S.CHAIN链,然而对赋值语句来说,没有需要返填的三地址语句,为了统一，我们给赋值语句赋一个空链。语义程序如下:</p>
</blockquote>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">S-&gt;A</span><br><span class="line">&#123;S.<span class="attribute">CHAIN</span>=0;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="For-循环语句的翻译"><a href="#For-循环语句的翻译" class="headerlink" title="For 循环语句的翻译"></a>For 循环语句的翻译</h3><h4 id="文法-5"><a href="#文法-5" class="headerlink" title="文法"></a>文法</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">S→<span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> N <span class="keyword">do</span> S1</span><br></pre></td></tr></table></figure>

<p>其语义为：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">        <span class="built_in">i</span>:=<span class="number">1</span>;</span><br><span class="line">again:  <span class="keyword">if</span> <span class="built_in">i</span>&lt;=N then begin</span><br><span class="line">            S1;</span><br><span class="line">            <span class="built_in">i</span>:=<span class="built_in">i</span>+<span class="number">1</span>;</span><br><span class="line">            goto again</span><br><span class="line">        <span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>代码结构可为：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">F+<span class="number">0</span>:（:=，<span class="string">'1'</span>，-，i）</span><br><span class="line">F+<span class="number">1</span>: (j&lt;=,i,N,F+<span class="number">3</span>)</span><br><span class="line">F+<span class="number">2</span>: (j,-,-,<span class="number">0</span>)</span><br><span class="line">F+<span class="number">3</span>: (S1的四元式序列)</span><br><span class="line">...</span><br><span class="line">D+<span class="number">0</span>: (+,i, ‘<span class="number">1</span>’,i)</span><br><span class="line">D+<span class="number">1</span>: (j,-,-,F+<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h4 id="语义变量-1"><a href="#语义变量-1" class="headerlink" title="语义变量"></a>语义变量</h4><p>为了在生成S1的代码之前生成i:=1等三个语句,必须改写文法。</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">F→<span class="keyword">for</span> i:=<span class="number">1</span> <span class="keyword">to</span> N <span class="keyword">do</span></span><br><span class="line">S→F S1</span><br></pre></td></tr></table></figure>

<ul>
<li><code>F.again</code>:记录F+1</li>
<li><code>F.CHAIN</code>:记录前述F+2的地址</li>
<li><code>F.place</code>:记录i在符号表入口</li>
</ul>
<h4 id="翻译方案-5"><a href="#翻译方案-5" class="headerlink" title="翻译方案"></a>翻译方案</h4><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">F→<span class="keyword">for</span> <span class="built_in">i</span>:=<span class="number">1</span> to N do</span><br><span class="line">&#123;</span><br><span class="line">    gen(:=,<span class="string">'1'</span>,-,entry(<span class="built_in">i</span>));</span><br><span class="line">    F.again:=ip;</span><br><span class="line">    gen(<span class="built_in">j</span>&lt;=,entry(<span class="built_in">i</span>),N,F.again+<span class="number">2</span>);</span><br><span class="line">    F.CHAIN:=ip;</span><br><span class="line">    gen(<span class="built_in">j</span>,-,-,<span class="number">0</span>);</span><br><span class="line">    F.place:=entry(<span class="built_in">i</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">S→F S1</span><br><span class="line">&#123;</span><br><span class="line">    backpatch(S1.CHAIN,ip);</span><br><span class="line">    gen(+,F.place,<span class="string">'1'</span>,F.place);</span><br><span class="line">    gen(<span class="built_in">j</span>,-,-,F.again);</span><br><span class="line">    S.CHAIN:=F.CHAIN</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/f5db07b0db3aadac85a6068006578fb8547a300b99d7ee143604b8b7061fd16b.png" alt="例题" title="">
                </div>
                <div class="image-caption">例题</div>
            </figure>

<hr>
<p>另一道例题：写出下面代码的中间代码序列。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="attribute">i</span>=1 <span class="keyword">to</span> 10 <span class="keyword">do</span> <span class="keyword">if</span> A&gt;100 then <span class="attribute">C</span>=C+1;</span><br></pre></td></tr></table></figure>

<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">100</span>: (=, <span class="number">1</span>, -, i)</span><br><span class="line"><span class="number">101</span>: (J&lt;=, i, <span class="number">10</span>, <span class="number">103</span>)    F.again=<span class="number">103</span></span><br><span class="line"><span class="number">102</span>: (J, -, -, <span class="number">109</span>)</span><br><span class="line"><span class="number">103</span>: (J&gt;, A, <span class="number">100</span>, <span class="number">105</span>)</span><br><span class="line"><span class="number">104</span>: (J, -, -, <span class="number">107</span>)</span><br><span class="line"><span class="number">105</span>: (+, C, <span class="number">1</span>, t1)</span><br><span class="line"><span class="number">106</span>: (=, t1, -, C)</span><br><span class="line"><span class="number">107</span>: (+, i, <span class="number">1</span>, i)</span><br><span class="line"><span class="number">108</span>: (J, -, -, <span class="number">103</span>)</span><br><span class="line"><span class="number">109</span>:</span><br></pre></td></tr></table></figure>

<hr>
<p>更多例题：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>  (A&lt;X) &amp; (B&gt;<span class="number">0</span>) then <span class="keyword">while</span> C&gt;<span class="number">0</span> <span class="keyword">do</span> C:=C+D;</span><br></pre></td></tr></table></figure>

<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="symbol">100 </span>(j&lt;， A， X， <span class="number">102</span>)</span><br><span class="line"><span class="symbol">101 </span>(j， -， -，  <span class="number">109</span>)</span><br><span class="line"><span class="symbol">102 </span>(j&gt;， B， <span class="number">0</span>， <span class="number">104</span>)</span><br><span class="line"><span class="symbol">103 </span>(j， -， -，  <span class="number">109</span>)</span><br><span class="line"><span class="symbol">104 </span>(j&gt;， C， <span class="number">0</span>， <span class="number">106</span>)</span><br><span class="line"><span class="symbol">105 </span>(j， -， -，  <span class="number">109</span>)</span><br><span class="line"><span class="symbol">106 </span>(+， C， D，   T1)</span><br><span class="line"><span class="symbol">107 </span>(:=， T1， -， C)</span><br><span class="line"><span class="symbol">108 </span>(j， -， -，  <span class="number">104</span>)</span><br><span class="line"><span class="number">109</span></span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">z := <span class="number">3</span>;</span><br><span class="line"><span class="keyword">while</span> j&lt; <span class="number">10</span> <span class="keyword">do</span> </span><br><span class="line"><span class="keyword">begin</span>  </span><br><span class="line">   j := <span class="symbol">x</span>+<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">if</span> <span class="symbol">x</span> &lt;<span class="number">10</span> <span class="keyword">then</span>  </span><br><span class="line">           <span class="symbol">y</span>:= A+m;</span><br><span class="line">     	<span class="keyword">else</span>  </span><br><span class="line">           <span class="symbol">y</span>:= A-m;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">100 </span>(=, <span class="number">3</span>, _, z)</span><br><span class="line"><span class="symbol">101 </span>(J&lt;, j, <span class="number">10</span>, <span class="number">103</span>)</span><br><span class="line"><span class="symbol">102 </span>(J, -, -, <span class="number">113</span>)</span><br><span class="line"><span class="symbol">103 </span>(+, x, <span class="number">1</span>, t1)</span><br><span class="line"><span class="symbol">104 </span>(=, t1, -, j)</span><br><span class="line"><span class="symbol">105 </span>(J&lt;, x, <span class="number">10</span>, <span class="number">107</span>)</span><br><span class="line"><span class="symbol">106 </span>(J, -, -, <span class="number">110</span>)</span><br><span class="line"><span class="symbol">107 </span>(+, A, m, t2)</span><br><span class="line"><span class="symbol">108 </span>(=, t2, -, y)</span><br><span class="line"><span class="symbol">109 </span>(J, -, -, <span class="number">112</span>)</span><br><span class="line"><span class="symbol">110 </span>(-, A, m, t3)</span><br><span class="line"><span class="symbol">111 </span>(=, t3, -, y)</span><br><span class="line"><span class="symbol">112 </span>(J, -, -, <span class="number">101</span>)</span><br></pre></td></tr></table></figure>

<h3 id="过程的的翻译（自学）"><a href="#过程的的翻译（自学）" class="headerlink" title="过程的的翻译（自学）"></a>过程的的翻译（自学）</h3><h2 id="第十章-代码优化和目标代码生成"><a href="#第十章-代码优化和目标代码生成" class="headerlink" title="第十章 代码优化和目标代码生成"></a>第十章 代码优化和目标代码生成</h2><p>优化是一种<strong>等价</strong>的，<strong>有效</strong>的程序变换<br>等价——不改变程序运行结果<br>有效——时空效率要高</p>
<p>优化按阶段分类：</p>
<ol>
<li>源程序阶段的优化：优化数据结构和算法</li>
<li>编译优化：中间代码和目标代码优化  </li>
</ol>
<p>中间代码优化：便于移植（与机器无关）。又分为：</p>
<ol>
<li>局部优化：在基本块内的优化</li>
<li>全局优化：超越基本块，基本块之间的优化</li>
</ol>
<h3 id="局部优化"><a href="#局部优化" class="headerlink" title="局部优化"></a>局部优化</h3><h4 id="划分基本块"><a href="#划分基本块" class="headerlink" title="划分基本块"></a>划分基本块</h4><p>(1)寻找入口语句</p>
<ul>
<li>程序的第一条语句</li>
<li>由转向语句转移到的语句</li>
<li>紧跟在条件转向语句后的那个语句<br>(2)寻找出口语句</li>
<li>转向语句</li>
<li>停止语句<br>(3)基本块为：</li>
<li>每个入口地址（含）到下一个入口地址（不含）</li>
<li>每个入口地址（含）到下一个出口地址（含）<br>(4)不在任何基本块中的代码可以被删除</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/cc498fa6eab99b70994fa69ce76038229404764f1b57db8a85d319724c0c1814.png" alt="例题" title="">
                </div>
                <div class="image-caption">例题</div>
            </figure>

<h4 id="构造流图"><a href="#构造流图" class="headerlink" title="构造流图"></a>构造流图</h4><p>下面是正确的废话：</p>
<p>$$G = (N, E, n_0)$$<br>(1)基本块集即为结点集N;<br>(2)包含程序第一个语句的基本块，为首结点n0;<br>(3)设基本块 Bi , Bj ∈ N ，若满足下列条件之一，则Bi -&gt;Bj </p>
<ul>
<li>Bj 紧跟在 Bi 之后，且 Bi 的出口语句不是无条件转向或停止语句</li>
<li>Bi 的出口语句为转向语句，其转向点恰为Bj 的入口语句</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/dae87269c4dff0ba085fab374a8dccd66ef790c7f0902f510388aeb6fbd57386.png" alt="刚才那道例题" title="">
                </div>
                <div class="image-caption">刚才那道例题</div>
            </figure>


<h4 id="基本块内的优化"><a href="#基本块内的优化" class="headerlink" title="基本块内的优化"></a>基本块内的优化</h4><h5 id="合并已知量"><a href="#合并已知量" class="headerlink" title="合并已知量"></a>合并已知量</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 优化前</span></span><br><span class="line">B := <span class="number">1</span></span><br><span class="line">C := <span class="number">2</span></span><br><span class="line">A := B + C</span><br><span class="line"></span><br><span class="line"><span class="comment">// 优化后</span></span><br><span class="line">A := <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h5 id="删除公共子表达式"><a href="#删除公共子表达式" class="headerlink" title="删除公共子表达式"></a>删除公共子表达式</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 优化前</span></span><br><span class="line">B := <span class="number">1</span></span><br><span class="line">C := <span class="number">2</span></span><br><span class="line">A := B + C</span><br><span class="line">D := B + C</span><br><span class="line"></span><br><span class="line"><span class="comment">// 优化后</span></span><br><span class="line">D := A</span><br></pre></td></tr></table></figure>

<h5 id="删除无用赋值"><a href="#删除无用赋值" class="headerlink" title="删除无用赋值"></a>删除无用赋值</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 优化前</span></span><br><span class="line">A := <span class="number">1</span></span><br><span class="line">A := <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 优化后</span></span><br><span class="line">A :=<span class="number">2</span></span><br></pre></td></tr></table></figure>

<h5 id="删除死代码"><a href="#删除死代码" class="headerlink" title="删除死代码"></a>删除死代码</h5><p>若某个基本块实际不可能被执行，该基本块为死代码，可以删除。</p>
<h5 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h5><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/cec8a73551063cae6fc453f801ff9f6458e6a8647631f2d18649e204e28c5405.png" alt="例题" title="">
                </div>
                <div class="image-caption">例题</div>
            </figure>

<h3 id="全局优化（自学）"><a href="#全局优化（自学）" class="headerlink" title="全局优化（自学）"></a>全局优化（自学）</h3><p>本节只讨论对循环进行的优化。</p>
<h4 id="循环的定义"><a href="#循环的定义" class="headerlink" title="循环的定义"></a>循环的定义</h4><p>循环：程序流图中，有唯一入口结点的强连通子图。</p>
<p>强连通子图：子图里面任意两个结点可以互通。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/c22e7e12c131182563aafce26165a1862e8214cec7f3d752cacd5a4ee5b32b9d.png" alt="程序流图" title="">
                </div>
                <div class="image-caption">程序流图</div>
            </figure>

<p><code>{5, 6, 7, 8, 9}</code> 是循环：所有点都互通，且 5 是唯一入口。</p>
<h4 id="循环的查找"><a href="#循环的查找" class="headerlink" title="循环的查找"></a>循环的查找</h4><ol>
<li>必经结点：从流图的首结点出发，到达结点n的任一通路都<strong>必须经过</strong>的结点d，称为n的必经结点。记为 <code>d DOM n</code></li>
</ol>
<ul>
<li>每个结点是它本身的必经结点，即<code>n DOM n</code></li>
<li>首结点是任一结点的必经结点，即<code>n0  DOM  n</code></li>
</ul>
<p>上图的必经节点集：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">D(<span class="number">1</span>)=&#123;<span class="number">1</span>&#125;</span><br><span class="line">D(<span class="number">2</span>)=&#123;<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line">D(<span class="number">3</span>)=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">D(<span class="number">4</span>)=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>&#125;</span><br><span class="line">D(<span class="number">5</span>)=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">D(<span class="number">6</span>)=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">D(<span class="number">7</span>)=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>&#125;</span><br><span class="line">D(<span class="number">8</span>)=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>&#125;</span><br><span class="line">D(<span class="number">9</span>)=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">9</span>&#125;</span><br><span class="line">D(<span class="number">10</span>)=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">10</span>&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>回边：若 d 是 n 必经节点，且存在边 n-&gt;d，则该边为回边。</li>
</ol>
<p>上图有三条回边：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span>-&gt;<span class="number">4</span></span><br><span class="line"><span class="number">9</span>-&gt;<span class="number">5</span></span><br><span class="line"><span class="number">10</span>-&gt;<span class="number">2</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>若 n-&gt;d 是回边，则图里能到n且不经过d的点的集合+n+d 就是由 n-&gt;d 组成的循环</li>
</ol>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/c22e7e12c131182563aafce26165a1862e8214cec7f3d752cacd5a4ee5b32b9d.png" alt="程序流图" title="">
                </div>
                <div class="image-caption">程序流图</div>
            </figure>

<p>上图的循环有：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span>-&gt;<span class="number">4</span> 组成 &#123;<span class="number">5</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line"><span class="number">9</span>-&gt;<span class="number">5</span> 组成 &#123;<span class="number">9</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;</span><br><span class="line"><span class="number">10</span>-&gt;<span class="number">2</span> 组成 &#123;<span class="number">10</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br></pre></td></tr></table></figure>

<h4 id="循环优化方法"><a href="#循环优化方法" class="headerlink" title="循环优化方法"></a>循环优化方法</h4><h5 id="代码外提"><a href="#代码外提" class="headerlink" title="代码外提"></a>代码外提</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 优化前</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">float</span> pi = <span class="built_in">acos</span>(<span class="number">-1</span>);</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 优化后</span></span><br><span class="line"><span class="keyword">float</span> pi = <span class="built_in">acos</span>(<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="强度削弱"><a href="#强度削弱" class="headerlink" title="强度削弱"></a>强度削弱</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 优化前</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> j = i * <span class="number">10</span> + <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把乘法优化成加法后</span></span><br><span class="line"><span class="keyword">int</span> j = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    j += <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例子中，<code>i=循环次数+c</code> 叫做基本归纳变量；<code>j=循环次数*c1+c2</code> 叫做同族归纳变量。强度削弱把基本归纳变量变为同族归纳变量，将乘法变为加法，还可以将普通加法变为变址器加法。</p>
<h5 id="删除归纳变量"><a href="#删除归纳变量" class="headerlink" title="删除归纳变量"></a>删除归纳变量</h5><p>即改用同族归纳变量作为判断条件</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 优化前</span></span><br><span class="line"><span class="keyword">int</span> j = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    j += <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 优化后</span></span><br><span class="line"><span class="keyword">int</span> j = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">for</span> (; j &lt; <span class="number">5</span> + <span class="number">10</span>*<span class="number">10</span>;)</span><br><span class="line">&#123;</span><br><span class="line">    j += <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="例题-1"><a href="#例题-1" class="headerlink" title="例题"></a>例题</h5><p>优化前：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>)PROD := <span class="number">0</span></span><br><span class="line">(<span class="number">2</span>)I := <span class="number">1</span></span><br><span class="line">(<span class="number">3</span>)T1 := <span class="number">4</span> * I</span><br><span class="line">(<span class="number">4</span>)T2 := a0 – <span class="number">4</span></span><br><span class="line">(<span class="number">5</span>)T3 := T2[T1]</span><br><span class="line">(<span class="number">6</span>)T4 := <span class="number">4</span> * I</span><br><span class="line">(<span class="number">7</span>)T5 := b0 – <span class="number">4</span></span><br><span class="line">(<span class="number">8</span>)T6 := T5[T4]</span><br><span class="line">(<span class="number">9</span>)T7 := T3 * T6</span><br><span class="line">(<span class="number">10</span>)PROD := PROD + T7</span><br><span class="line">(<span class="number">11</span>)I := I + <span class="number">1</span></span><br><span class="line">(<span class="number">12</span>)<span class="keyword">if</span>  I ≤ <span class="number">20</span> <span class="keyword">goto</span> (<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>优化后：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>)PROD := <span class="number">0</span></span><br><span class="line">(<span class="number">2</span>)<span class="built_in">T1</span> = <span class="number">0</span>;</span><br><span class="line">(<span class="number">3</span>)<span class="built_in">T2</span> := <span class="built_in">a0</span> – <span class="number">4</span></span><br><span class="line">(<span class="number">4</span>)<span class="built_in">T5</span> := <span class="keyword">b0 </span>– <span class="number">4</span></span><br><span class="line">(<span class="number">5</span>)<span class="built_in">T1</span> := <span class="built_in">T1</span> + <span class="number">4</span>;</span><br><span class="line">(<span class="number">6</span>)<span class="built_in">T3</span> := <span class="built_in">T2</span>[<span class="built_in">T1</span>]</span><br><span class="line">(<span class="number">7</span>)<span class="built_in">T6</span> := <span class="built_in">T5</span>[<span class="built_in">T1</span>]</span><br><span class="line">(<span class="number">8</span>)<span class="built_in">T7</span> := <span class="built_in">T3</span> * <span class="built_in">T6</span></span><br><span class="line">(<span class="number">9</span>)PROD := PROD + <span class="built_in">T7</span></span><br><span class="line">(<span class="number">10</span>)if <span class="built_in">T1</span> ≤ <span class="number">80</span> goto (<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<h3 id="目标代码生成-1"><a href="#目标代码生成-1" class="headerlink" title="目标代码生成"></a>目标代码生成</h3><p>目标代码生成的主要问题：</p>
<ol>
<li>选择合适的指令 生成最短的代码</li>
<li>充分利用有限的寄存器</li>
</ol>
<p>如何充分利用寄存器（自学）</p>
<h2 id="第十一章-运行时存储空间的组织"><a href="#第十一章-运行时存储空间的组织" class="headerlink" title="第十一章 运行时存储空间的组织"></a>第十一章 运行时存储空间的组织</h2><h3 id="变量及存储分配"><a href="#变量及存储分配" class="headerlink" title="变量及存储分配"></a>变量及存储分配</h3>
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2021-09-11T12:19:35.019Z" itemprop="dateUpdated">2021-09-11 20:19:35</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="https://blog.lyh543.cn">
            <img src="/img/avatar.png" alt="lyh543">
            lyh543
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/" rel="tag">计算机科学</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" rel="tag">课程笔记</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.lyh543.cn/computer-science/compile-principle/&title=《编译原理 课程笔记》 — 小灰灰灰灰的博客&pic=https://blog.lyh543.cn/img/avatar.png" data-title="微博">
          <i class="icon mdi mdi-sina-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.lyh543.cn/computer-science/compile-principle/&title=《编译原理 课程笔记》 — 小灰灰灰灰的博客&source=" data-title=" QQ">
          <i class="icon mdi mdi-qqchat"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.lyh543.cn/computer-science/compile-principle/" data-title=" Facebook">
          <i class="icon mdi mdi-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《编译原理 课程笔记》 — 小灰灰灰灰的博客&url=https://blog.lyh543.cn/computer-science/compile-principle/&via=https://blog.lyh543.cn" data-title=" Twitter">
          <i class="icon mdi mdi-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.lyh543.cn/computer-science/compile-principle/" data-title=" Google+">
          <i class="icon mdi mdi-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-lg mdi mdi-share-variant"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/carrers/interview-experience/2021/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon mdi mdi-chevron-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">面经集合 - 2021</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/computer-science/parallel-and-distributed-computing/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-lg icon-pl mdi mdi-chevron-right"></i></div>
        <h4 class="title">并行计算 课程笔记</h4>
      </a>
    </div>
  
</nav>



    

















<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var id = location.pathname
        if (location.pathname.length > 50) {
          id = location.pathname.replace(/\/\d+\/\d+\/\d+\//, '').replace('/', '').substring(0, 50)
        }
        const gitalk = new Gitalk({
          clientID: 'ec7daa4e047c3c30570d',
          clientSecret: '025a9e40a1d101f28fd1a945d286a819e9fa1c3d',
          repo: 'lyh543.github.io',
          owner: 'lyh543',
          admin: ['lyh543'],
          id: id,      // Ensure uniqueness and length less than 50
          title: document.title.split('|')[0],
          distractionFreeMode: false  // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    </script>
</section>




</article>



</div>

        <footer class="footer">
    <div class="top">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg mdi mdi-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>lyh543 &copy; 2019 - 2021</span>
            <span>
                
                <a href="http://www.miitbeian.gov.cn/" target="_blank">蜀ICP备19034464号</a><br>
                
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg mdi mdi-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.lyh543.cn/computer-science/compile-principle/&title=《编译原理 课程笔记》 — 小灰灰灰灰的博客&pic=https://blog.lyh543.cn/img/avatar.png" data-title="微博">
          <i class="icon mdi mdi-sina-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.lyh543.cn/computer-science/compile-principle/&title=《编译原理 课程笔记》 — 小灰灰灰灰的博客&source=" data-title=" QQ">
          <i class="icon mdi mdi-qqchat"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.lyh543.cn/computer-science/compile-principle/" data-title=" Facebook">
          <i class="icon mdi mdi-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《编译原理 课程笔记》 — 小灰灰灰灰的博客&url=https://blog.lyh543.cn/computer-science/compile-principle/&via=https://blog.lyh543.cn" data-title=" Twitter">
          <i class="icon mdi mdi-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.lyh543.cn/computer-science/compile-principle/" data-title=" Google+">
          <i class="icon mdi mdi-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACOElEQVR42u3aS27DMAxF0ex/0+60g1q+j1QKiL4eFU4Q6GjA8vf54OdaPnff/P1m/Zt3bzY/MmTIOJZBjrg++vqXyZs7Nr8+GTJkvIGxPsQ6gJJPOyGYXJAMGTJkkARuHYhR0ASXIkOGDBmdgMvDJS9iZciQISMtYnnyRwJuGty31eIyZMg4kJE2zv7z76/MN2TIkHEU4wqftOBMA3HxVDJkyBjN4AGOJ3ZphKwFXBkyZLyHwVcrdq2CpW0+9EaGDBmjGbWAmDbC+PgzHRI8YGTIkDGCUStT08XWWhkcDABkyJDxAgYfBqTBlB8xbfD9UcTKkCFjKIOXlBzMv8PTwQ3BV4YMGYcz+CpY7eHla9poC3qHMmTIOJZBQltnGYKnfbzQvR1hypAhYzSDp18806yNB/jRH/5jyJAhYxCDJ2ckpNYmqGlTr7W5JkOGjGMZu9r6NVI/BMuQIUMGHyXy0pQXq/EwQ4YMGeMY32iK1UYL6UgVbYXIkCFjBIOvggVbG212By9DhoypjNqyBdrjCI+eXtmGnREZMmQcyOAwXqZ+rz0X35AMGTIOZ6SpXm0Mma5cxMsWMmTIGMe4woeH2lqCmF6WDBky3sDoNM7SFj8vUGtJpAwZMmYzSJDlyR8/VjGTJbW4DBkyhjLSwJeG4F2p3kMpK0OGDBmlJQl+uLQY3hZwZciQMY7BR5W1hI8knRsCrgwZMg5kdBI7PipIvxOAZciQMZqR5l3pmlc/feRrajJkyBjH+AG3VyLggdb9sQAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>










</body>
</html>
