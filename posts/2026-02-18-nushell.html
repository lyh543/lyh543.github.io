<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nushell ç¯å¢ƒé…ç½® | å°ç°ç°ç°ç°çš„åšå®¢</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/theme/favicon.png">
    <link rel="alternate" type="application/rss+xml" href="https://blog.lyh543.cn/rss.xml" title="å°ç°ç°ç°ç°çš„åšå®¢ RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://blog.lyh543.cn/feed.atom" title="å°ç°ç°ç°ç°çš„åšå®¢ Atom Feed">
    <link rel="alternate" type="application/json" href="https://blog.lyh543.cn/feed.json" title="å°ç°ç°ç°ç°çš„åšå®¢ JSON Feed">
    <meta name="description" content="æœ€è¿‘çœ‹ã€ŠUnix ç¼–ç¨‹è‰ºæœ¯ã€‹çš„æ—¶å€™çœ‹åˆ°ä¸€æ®µï¼Œ

&gt; ä¹Ÿè®¸ Unix æœ€æŒä¹…çš„å¼‚è®®æ°æ°æ¥è‡ª Unix å“²å­¦çš„ä¸€ä¸ªç‰¹æ€§ï¼Œè¿™ä¸€æ¡ç‰¹æ€§æ˜¯ X window è®¾è®¡è€…é¦–å…ˆæ˜ç¡®æå‡ºçš„ã€‚X è‡´åŠ›äºæä¾›ä¸€å¥—â€œæœºåˆ¶ï¼Œè€Œä¸æ˜¯ç­–ç•¥â€ï¼Œä»¥æ”¯æŒä¸€å¥—æç«¯é€šç”¨çš„å›¾å½¢æ“ä½œï¼Œä»è€ŒæŠŠä½¿ç”¨å·¥å…·ç®±å’Œç•Œé¢çš„â€œè§‚æ„Ÿâ€ï¼ˆç­–ç•¥ï¼‰æ¨ååˆ°åº”ç”¨å±‚ã€‚ Unix å…¶å®ƒç³»ç»Ÿçº§çš„æœåŠ¡ä¹Ÿæœ‰ç±»ä¼¼çš„å€¾å‘ï¼šè¡Œä¸ºçš„æœ€ç»ˆé€»è¾‘è¢«å°½å¯èƒ½æ¨ååˆ°ä½¿ç”¨ç«¯ã€‚Unixç”¨æˆ·å¯ä»¥åœ¨å¤šç§ s ...">
    
    <link rel="preload" href="/assets/css/0.styles.832ac33f.css" as="style"><link rel="preload" href="/assets/js/app.528389ef.js" as="script"><link rel="preload" href="/assets/js/235.094c9b84.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.832ac33f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-app="true" id="app" class="v-application v-application--is-ltr theme--light"><div class="v-application--wrap"><!----> <main id="main-content" class="v-main" style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;"><div class="v-main__wrap"><div><container class="article-column-container"><div class="article-column"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><div class="v-card v-sheet theme--light"><div class="container"><div itemprop="articleBody" class="markdown-body content__default"><p>æœ€è¿‘çœ‹ã€ŠUnix ç¼–ç¨‹è‰ºæœ¯ã€‹çš„æ—¶å€™çœ‹åˆ°ä¸€æ®µï¼Œ</p> <blockquote><p>ä¹Ÿè®¸ Unix æœ€æŒä¹…çš„å¼‚è®®æ°æ°æ¥è‡ª Unix å“²å­¦çš„ä¸€ä¸ªç‰¹æ€§ï¼Œè¿™ä¸€æ¡ç‰¹æ€§æ˜¯ X window è®¾è®¡è€…é¦–å…ˆæ˜ç¡®æå‡ºçš„ã€‚X è‡´åŠ›äºæä¾›ä¸€å¥—â€œæœºåˆ¶ï¼Œè€Œä¸æ˜¯ç­–ç•¥â€ï¼Œä»¥æ”¯æŒä¸€å¥—æç«¯é€šç”¨çš„å›¾å½¢æ“ä½œï¼Œä»è€ŒæŠŠä½¿ç”¨å·¥å…·ç®±å’Œç•Œé¢çš„â€œè§‚æ„Ÿâ€ï¼ˆç­–ç•¥ï¼‰æ¨ååˆ°åº”ç”¨å±‚ã€‚ Unix å…¶å®ƒç³»ç»Ÿçº§çš„æœåŠ¡ä¹Ÿæœ‰ç±»ä¼¼çš„å€¾å‘ï¼šè¡Œä¸ºçš„æœ€ç»ˆé€»è¾‘è¢«å°½å¯èƒ½æ¨ååˆ°ä½¿ç”¨ç«¯ã€‚Unixç”¨æˆ·å¯ä»¥åœ¨å¤šç§ shell ä¸­è¿›è¡Œé€‰æ‹©ã€‚è€Œ Unix åº”ç”¨ç¨‹åºé€šå¸¸ä¼šæä¾›å¾ˆå¤šçš„è¡Œä¸ºé€‰é¡¹å’Œä»¤äººçœ¼èŠ±ç¼­ä¹±çš„å®šåˆ¶åŠŸèƒ½ã€‚</p></blockquote> <p>äºæ˜¯æˆ‘æƒ³è¦å°è¯•ä¸€äº› zsh ä»¥å¤–çš„ shellã€‚è®©è±†åŒ…æ¨èäº†å‡ ä¸ª shell ä»¥åï¼Œé€‰æ‹©äº†è·¨å¹³å°çš„ Nushellï¼Œä½œä¸ºè€ Windows ç”¨æˆ·ä¸å¾—ä¸æ”¯æŒä¸€ä¸‹ã€‚</p> <p>è±†åŒ…æ¨èçš„å‡ ä¸ªé‡Œå¾ˆæœ‰ç‰¹è‰²çš„ï¼š</p> <ol><li>Nushell (Nu) â€” æœ€ç°ä»£ã€æ•°æ®å‹ Shell
<ul><li>ä¸»æ‰“ï¼šåƒå†™ä»£ç ä¸€æ ·ç”¨ Shellï¼Œç»“æ„åŒ–æ•°æ®</li> <li>è¾“å‡ºä¸æ˜¯çº¯æ–‡æœ¬ï¼Œæ˜¯è¡¨æ ¼ / JSON / å¯¹è±¡</li> <li>å¤©ç”Ÿæ”¯æŒï¼šls å½©è‰²ã€è¯­æ³•é«˜äº®ã€è‡ªåŠ¨è¡¥å…¨</li> <li>è·¨å¹³å°ï¼šLinux/macOS/Windows å®Œå…¨ä¸€è‡´</li> <li>è¯­æ³•å¹²å‡€ã€ç°ä»£ï¼Œæ¯” Bash å¼ºå¤ªå¤š</li> <li>é€‚åˆï¼šå¼€å‘è€…ã€å–œæ¬¢æ¸…çˆ½ç»“æ„åŒ–å‘½ä»¤çš„äºº</li></ul></li> <li>Xonsh â€” Python é£æ ¼çš„ Shell
<ul><li>ä¸»æ‰“ï¼šPython + Shell æ··åˆå†™</li> <li>ç›´æ¥åœ¨å‘½ä»¤è¡Œå†™ Python ä»£ç </li> <li>å…¼å®¹ Bash å‘½ä»¤</li> <li>å¯é«˜åº¦å¯ç¼–ç¨‹</li> <li>é€‚åˆï¼šPython å¼€å‘è€…</li></ul></li></ol> <p>ä½†æ˜¯ Nushell ä¹Ÿæœ‰ç¼ºç‚¹ï¼š</p> <ul><li><strong>Nushell ç›®å‰åœ¨é«˜å»¶è¿Ÿ SSH åœºæ™¯ä¸‹ï¼Œè¾“å…¥å»¶è¿Ÿç›¸æ¯” POSIX shell é«˜å¾ˆå¤š</strong>ï¼ˆ<a href="https://github.com/nushell/nushell/issues/14474" target="_blank" rel="noopener noreferrer">nushell#14474<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ï¼Œäºæ˜¯æˆ‘åœ¨æœåŠ¡å™¨ä¸Šåˆæ¢å›äº† zshï¼Œå†è§‚æœ›ä¸€æ®µæ—¶é—´ã€‚</li> <li>Nushell ä¸å…¼å®¹ POSIX æ ‡å‡†ï¼Œå¯¼è‡´ä¸æ”¯æŒ <code>export</code> <code>source</code> <code>eval</code> ç­‰è¯­æ³•ï¼Œ<strong>æ— æ³•ç›´æ¥ä½¿ç”¨ <code>source ~/.profile</code> å®Œå…¨æ— ç—›è¿ç§» shell é€šç”¨çš„é…ç½®</strong>ï¼Œä¸€äº›å·¥å…·é“¾é…ç½® shell ç¯å¢ƒçš„æ—¶å€™ä¹Ÿä¼šæœ‰é—®é¢˜ã€‚æœ‰å¼€å‘è€…å®ç°äº†ä¸€ä¸ª Nushell ç”¨äºå¯¼å…¥å…¶å®ƒè„šæœ¬ï¼ˆå¦‚ <code>~/.profile</code>ï¼‰çš„å˜é‡ï¼Œå¯ä»¥å‚è€ƒ<a href="https://github.com/tesujimath/bash-env-nushell" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</li> <li>åŸºäº bash å†™çš„å·¥å…·æ²¡æ³•ç”¨ï¼ˆä¾‹å¦‚ <code>nvm</code>ï¼‰ï¼Œéœ€è¦ç”¨çš„æ—¶å€™è¿˜æ˜¯è¦åˆ‡å› <code>bash</code> æˆ– <code>zsh</code> æ¥æ‰§è¡Œã€‚</li> <li>åŸºäº bash å†™çš„å‘½ä»¤è¡¥å…¨å·¥å…·ï¼ˆä¾‹å¦‚ <code>docker</code> <code>systemctl</code>ï¼‰ä¹Ÿæ²¡æ³•ç”¨ï¼Œä¸è¿‡å¯ä»¥ç”¨ Carapace æ¥è¡¥å…¨è¿™äº›å·¥å…·çš„å‘½ä»¤ã€‚</li> <li>ç›®å‰è¿˜æ²¡æœ‰æˆç†Ÿçš„ä¾èµ–/æ’ä»¶/æ¨¡å—ç®¡ç†å™¨ï¼Œ<a href="https://github.com/nushell/nupm" target="_blank" rel="noopener noreferrer">nushell/nupm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿˜åœ¨å¼€å‘ä¸­ï¼Œç°åœ¨ä¸€åˆ‡éƒ½ä¾é æ‰‹åŠ¨ä¸‹è½½ï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶é‡Œ <code>use</code> å’Œ <code>source</code> æ¥åŠ è½½ã€‚æ²¡æœ‰ä¸€é”®è„šæœ¬ï¼Œè¿™æ ·é…ç¯å¢ƒè¿˜æ˜¯å¾ˆéº»çƒ¦ã€‚</li></ul> <p><img src="/images/nushell-preview.png" alt="Preview Nushell"></p> <h2 id="å®‰è£…-nushell"><a href="#å®‰è£…-nushell" class="header-anchor">#</a> å®‰è£… Nushell</h2> <ul><li>Linuxï¼š
<ul><li>ä»åŒ…ç®¡ç†å™¨å®‰è£… <code>nushell</code>ã€‚</li> <li>å¦‚æœå®˜æ–¹æºæ²¡æœ‰çš„è¯ï¼Œå¯ä»¥ä» brew å®‰è£…ï¼š</li></ul></li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>/bin/bash -c <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="token variable">)</span></span>&quot;</span>

brew <span class="token function">install</span> nushell starship carapace
</code></pre></div><ul><li>Windowsï¼š
<ul><li>ä½¿ç”¨ Chocolatey å®‰è£…:</li></ul></li></ul> <div class="language- extra-class"><pre class="language-text"><code>choco install -y nushell starship
</code></pre></div><ul><li>æˆ–è€…ä» <a href="https://github.com/nushell/nushell/releases" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä¸‹è½½ã€‚</li> <li>å®‰è£…ä»¥åé‡å¯ç»ˆç«¯ï¼ŒNushell å°±å‡ºç°åœ¨ç»ˆç«¯ App çš„é€‰é¡¹é‡Œäº†ã€‚</li></ul> <h2 id="nushell-å¯åŠ¨"><a href="#nushell-å¯åŠ¨" class="header-anchor">#</a> Nushell å¯åŠ¨</h2> <div class="language-sh extra-class"><pre class="language-sh"><code>nu
</code></pre></div><h2 id="linux-è®¾ç½®-nushell-ä¸ºé»˜è®¤-shell"><a href="#linux-è®¾ç½®-nushell-ä¸ºé»˜è®¤-shell" class="header-anchor">#</a> Linux è®¾ç½® Nushell ä¸ºé»˜è®¤ shell</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token variable">$nu</span>.current-exe -c <span class="token string">'$nu.current-exe + &quot;\n&quot; | save -a /etc/shells'</span>
chsh -s <span class="token variable">$nu</span>.current-exe
</code></pre></div><h2 id="nushell-é…ç½®å›¾æ ‡-starship"><a href="#nushell-é…ç½®å›¾æ ‡-starship" class="header-anchor">#</a> Nushell é…ç½®å›¾æ ‡ (Starship)</h2> <ul><li>Windows å®‰è£…ï¼šå¦‚æœä¸Šé¢æ²¡æœ‰ç”¨ choco å®‰è£…çš„è¯ï¼Œè¿˜å¯ä»¥ç”¨ winget å®‰è£…ï¼š<code>winget install --id Starship.Starship</code>ã€‚Windows å®‰è£…å®Œä»¥åå¯èƒ½éœ€è¦é‡æ–°å¯åŠ¨ç»ˆç«¯ã€‚</li> <li>Linux å®‰è£…ï¼šä»åŒ…ç®¡ç†å™¨å®‰è£… <code>starship</code>ï¼Œæˆ–è€…ä» brew å®‰è£… <code>starship</code>ï¼Œåˆæˆ–è€… <code>curl -sS https://starship.rs/install.sh | sh</code></li></ul> <p>å®‰è£…å¥½ä»¥åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥é…ç½® Nushell çš„ Starshipï¼š</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">mkdir</span> <span class="token punctuation">(</span><span class="token variable">$nu</span>.data-dir <span class="token operator">|</span> path <span class="token function">join</span> <span class="token string">&quot;vendor/autoload&quot;</span><span class="token punctuation">)</span>
starship init nu <span class="token operator">|</span> save -f <span class="token punctuation">(</span><span class="token variable">$nu</span>.data-dir <span class="token operator">|</span> path <span class="token function">join</span> <span class="token string">&quot;vendor/autoload/starship.nu&quot;</span><span class="token punctuation">)</span>

<span class="token string">'eval &quot;$(starship init bash)&quot;'</span> <span class="token operator">|</span> save -f ~/.bashrc  <span class="token comment"># é¡ºä¾¿é…ç½®ä¸€ä¸‹ bash çš„ starship</span>

nu  <span class="token comment"># é‡å¯ Nushell</span>
</code></pre></div><p>æˆ‘ä¸ªäººå–œæ¬¢åœ¨ Git Status é‡Œæ˜¾ç¤ºæ•°é‡ï¼Œæ‰€ä»¥åœ¨ <code>~/.config/starship.toml</code> é‡Œæ·»åŠ äº†ä¸‹é¢çš„é…ç½®ï¼š</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token string">'[git_status]
disabled = false
format = '</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">\</span><span class="token punctuation">[</span><span class="token variable">$all_status</span><span class="token variable">$ahead_behind</span><span class="token punctuation">\</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token variable">$style</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token string">'
style = &quot;red bold&quot;
stashed = '</span><span class="token punctuation">\</span>$<span class="token variable">${count}</span><span class="token string">'
ahead = &quot;â‡¡${count}&quot;
behind = &quot;â‡£${count}&quot;
diverged = &quot;â‡•${count}&quot;
conflicted = &quot;=${count}&quot;
deleted = &quot;âœ˜${count}&quot;
renamed = &quot;Â»${count}&quot;
modified = &quot;!${count}&quot;
staged = &quot;+${count}&quot;
untracked = &quot;?${count}&quot;
'</span> <span class="token operator">|</span> save -f ~/.config/starship.toml
</code></pre></div><h2 id="linux-nushell-å¯¼å…¥å…¶å®ƒ-shell-çš„ç¯å¢ƒå˜é‡"><a href="#linux-nushell-å¯¼å…¥å…¶å®ƒ-shell-çš„ç¯å¢ƒå˜é‡" class="header-anchor">#</a> Linux Nushell å¯¼å…¥å…¶å®ƒ Shell çš„ç¯å¢ƒå˜é‡</h2> <p>ä»¥ä¸‹æ‘˜è‡ª<a href="https://www.nushell.sh/zh-CN/cookbook/foreign_shell_scripts.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼š</p> <blockquote><p>nu çš„ä¸€ä¸ªå¸¸è§é—®é¢˜æ˜¯ï¼Œå…¶ä»–åº”ç”¨ç¨‹åºå°†ç¯å¢ƒå˜é‡æˆ–åŠŸèƒ½å¯¼å‡ºä¸º shell è„šæœ¬ï¼Œè¿™äº›è„šæœ¬æœŸæœ›ç”±ä½ çš„ shell è¿è¡Œã€‚
ä½†è®¸å¤šåº”ç”¨ç¨‹åºåªè€ƒè™‘æœ€å¸¸ç”¨çš„ shellï¼Œå¦‚ bash æˆ– zshã€‚ä¸å¹¸çš„æ˜¯ï¼Œnu ä¸è¿™äº› shell çš„è¯­æ³•å®Œå…¨ä¸å…¼å®¹ï¼Œå› æ­¤æ— æ³•ç›´æ¥è¿è¡Œæˆ– source è¿™äº›è„šæœ¬ã€‚
é€šå¸¸ï¼Œé€šè¿‡è°ƒç”¨ zsh æœ¬èº«ï¼ˆå¦‚æœå·²å®‰è£…ï¼‰æ¥è¿è¡Œ zsh è„šæœ¬æ²¡æœ‰ä»»ä½•éšœç¢ã€‚ä½†ä¸å¹¸çš„æ˜¯ï¼Œè¿™å°†ä¸å…è®¸ nu è®¿é—®å¯¼å‡ºçš„ç¯å¢ƒå˜é‡ï¼š</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># è¿™å¯ä»¥å·¥ä½œï¼Œä½¿ç”¨ zsh æ‰“å° &quot;Hello&quot;</span>
<span class="token string">'echo Hello'</span> <span class="token operator">|</span> <span class="token function">zsh</span> -c <span class="token variable">$in</span>

<span class="token comment"># è¿™ä¼šé€€å‡ºå¹¶æŠ¥é”™ï¼Œå› ä¸º $env.VAR æœªå®šä¹‰</span>
<span class="token string">'export VAR=&quot;Hello&quot;'</span> <span class="token operator">|</span> <span class="token function">zsh</span> -c <span class="token variable">$in</span>
print <span class="token variable">$env</span>.VAR
</code></pre></div><p>æ–‡æ¡£æä¾›äº†ä¸€ä¸ªå‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒçš„åŸç†æ˜¯å¯åŠ¨ä¸€ä¸ª shell æ¥è¿è¡Œè„šæœ¬ï¼Œæ•è·è¿è¡Œå‰åçš„ç¯å¢ƒå˜é‡ï¼Œç„¶åæ¯”è¾ƒä¸¤è€…çš„å·®å¼‚æ¥ç¡®å®šå“ªäº›å˜é‡è¢«æ›´æ”¹äº†ï¼Œæœ€åæŠŠè¿™äº›æ›´æ”¹çš„å˜é‡å¯¼å…¥åˆ° nushell çš„ç¯å¢ƒä¸­ã€‚</p> <p>ä¸è¿‡åœ¨ <a href="https://github.com/tesujimath/bash-env-nushell" target="_blank" rel="noopener noreferrer">GitHub tesujimath/bash-env-nushell<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä¸Šæœ‰å¦ä¸€ä¸ªå®ç°ï¼Œä¸‹é¢çš„é…ç½®å°†ä¼šä½¿ç”¨è¿™ä¸ªå®ç°ã€‚</p> <h2 id="nushell-å®‰è£…å‘½ä»¤è¡¥å…¨å·¥å…·-carapace"><a href="#nushell-å®‰è£…å‘½ä»¤è¡¥å…¨å·¥å…·-carapace" class="header-anchor">#</a> Nushell å®‰è£…å‘½ä»¤è¡¥å…¨å·¥å…· (Carapace)</h2> <ul><li>Windows å®‰è£…ï¼š<code>winget install -e --id rsteube.Carapace</code></li> <li>Linux å®‰è£…ï¼šä»åŒ…ç®¡ç†å™¨å®‰è£… <code>carapace</code>ï¼Œæˆ–è€…ä» brew å®‰è£… <code>carapace</code>ï¼Œåˆæˆ–è€…ä» <a href="https://github.com/carapace-sh/carapace-bin/releases" target="_blank" rel="noopener noreferrer">releases<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä¸‹è½½åé…ç½®åˆ° PATH é‡Œã€‚</li></ul> <p>ç„¶ååœ¨ <code>env.nv</code> å’Œ <code>config.nu</code> é‡Œæ·»åŠ ä¸‹é¢çš„é…ç½®æ¥å¯ç”¨ carapaceï¼ˆä¹‹æ‰€ä»¥è¦æ”¾åˆ°ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ˜¯å› ä¸º Nushell æ›´åƒæ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼Œä¸æ”¯æŒåŠ¨æ€ <code>source</code> åˆšåˆ›å»ºçš„è„šæœ¬ï¼‰ï¼š</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment">## $nu.env-path</span>
<span class="token variable">$env</span>.CARAPACE_BRIDGES <span class="token operator">=</span> <span class="token string">'zsh,fish,bash,inshellisense'</span>
<span class="token function">mkdir</span> $<span class="token string">&quot;(<span class="token variable">$nu</span>.cache-dir)&quot;</span>
carapace _carapace nushell <span class="token operator">|</span> save --force $<span class="token string">&quot;(<span class="token variable">$nu</span>.cache-dir)/carapace.nu&quot;</span>

<span class="token comment"># $nu.config-path</span>
<span class="token builtin class-name">source</span> $<span class="token string">&quot;(<span class="token variable">$nu</span>.cache-dir)/carapace.nu&quot;</span>
</code></pre></div><h2 id="linux-æ›´æ–°-nushell-é…ç½®æ–‡ä»¶"><a href="#linux-æ›´æ–°-nushell-é…ç½®æ–‡ä»¶" class="header-anchor">#</a> Linux æ›´æ–° Nushell é…ç½®æ–‡ä»¶</h2> <p>æˆ‘çš„ Linux Nushell é…ç½®æ–‡ä»¶åšäº†å‡ ä»¶äº‹ï¼š</p> <ol><li>å¯¼å…¥ Carapace çš„å‘½ä»¤è¡¥å…¨åŠŸèƒ½ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ Nushell é‡Œä½¿ç”¨ Carapace æ¥è¡¥å…¨å„ç§å·¥å…·çš„å‘½ä»¤äº†ï¼›</li> <li>å¯¼å…¥æˆ‘è‡ªå·±ç¼–å†™çš„ <code>module-install.nu</code> æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—æä¾›äº† <code>module-install</code> å‡½æ•°ï¼Œç”¨äºä¸€é”®ä¸‹è½½æ¨¡å—ï¼Œå¹¶åœ¨é…ç½®æ–‡ä»¶ä¸­è‡ªåŠ¨å¯¼å…¥å®ƒï¼›</li> <li>å¯¼å…¥ <code>bash-env</code> æ¨¡å—ï¼Œæ•è· <code>~/.profile</code> é‡Œçš„ç¯å¢ƒå˜é‡ï¼Œè¿™æ ·æ¯æ¬¡å¯åŠ¨ Nushell çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨å¯¼å…¥ <code>~/.profile</code> é‡Œçš„ç¯å¢ƒå˜é‡äº†ã€‚</li> <li>å› ä¸º <code>PATH</code> å˜é‡åœ¨ <code>~/.profile</code> é‡Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œ Nushell æœŸæœ›å®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œæ‰€ä»¥è¿™é‡Œåšäº†ç‰¹æ®Šå¤„ç†ï¼ŒæŠŠå®ƒè½¬æ¢æˆåˆ—è¡¨ã€‚</li> <li>æ‰‹åŠ¨è®¾ç½®äº† <code>LANG</code> å’Œ <code>LC_ALL</code> å˜é‡ï¼Œè§£å†³äº† Nushell çš„ locale é”™è¯¯é—®é¢˜ã€‚</li></ol> <p>Windows æ²¡æœ‰é‡åˆ°è¿™äº›é—®é¢˜ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦æ›´æ–°é…ç½®æ–‡ä»¶äº†ï¼Œä¿æŒé»˜è®¤é…ç½®ã€‚</p> <p>ç”±äºæ¶‰åŠåˆ°å¤šä¸ªæ–‡ä»¶çš„é…ç½®ï¼Œä¸‹é¢çš„å‘½ä»¤ç”±ä¸Šå¾€ä¸‹æ‰§è¡Œã€‚</p> <hr> <p>ä¸‹è½½ <code>module-install.nu</code> å‡½æ•°ä»¥åŠ <code>bash-env.nu</code> æ¨¡å—ï¼ˆä»¥åŠä¾èµ–çš„ <code>bash-env-json</code> è„šæœ¬ï¼‰ï¼š</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> <span class="token variable">$nu</span>.default-config-dir
<span class="token function">mkdir</span> scripts modules ~/.local/bin
http get https://public.lyh543.cn/setup-server/nushell/module-install.nu <span class="token operator">|</span> save -f scripts/module-install.nu
http get https://raw.githubusercontent.com/tesujimath/bash-env-nushell/refs/heads/main/bash-env.nu <span class="token operator">|</span> save -f modules/bash-env.nu
http get https://raw.githubusercontent.com/tesujimath/bash-env-json/refs/heads/main/bash-env-json <span class="token operator">|</span> save -f ~/.local/bin/bash-env-json
<span class="token function">chmod</span> a+x ~/.local/bin/bash-env-json
</code></pre></div><p>æ›´æ–° <code>config.nu</code> æ¥åŠ è½½ <code>bash-env.nu</code> æ¨¡å—ï¼Œå¹¶ä» <code>~/.profile</code> å¯¼å…¥ç¯å¢ƒå˜é‡ï¼š</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token string">'# åŠ è½½ base-env.nu æ¥ä» .profile ä¸­æå–ç¯å¢ƒå˜é‡
$env.PATH ++= [($env.HOME | path join &quot;.local/bin&quot;)]
$env.NUSHELL_IMPORT_BASH_ENV = 1  # åœ¨ ~/.profile é‡Œå¯ä»¥ç”¨è¿™ä¸ªç¯å¢ƒå˜é‡æ¥åˆ¤æ–­æ˜¯å¦åœ¨ Nushell é‡Œï¼Œä»è€Œè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„ç¯å¢ƒå˜é‡è®¾ç½®
use modules/bash-env.nu
if ('</span>~/.profile<span class="token string">' | path exists) {bash-env ~/.profile | load-env}
hide-env NUSHELL_IMPORT_BASH_ENV  # å¯¼å…¥å®Œä»¥åå°±åˆ é™¤è¿™ä¸ªç¯å¢ƒå˜é‡
# PATH å˜é‡éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œ nushell æœŸæœ›å®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨
if (($env.PATH | describe) == '</span>string<span class="token string">') { $env.PATH = $env.PATH | split row (char esep) }  

$env.LANG = &quot;zh_CN.UTF-8&quot;
$env.LC_ALL = &quot;zh_CN.UTF-8&quot;

source $&quot;($nu.cache-dir)/carapace.nu&quot;
source scripts/module-install.nu
'</span> <span class="token operator">|</span> save -f <span class="token variable">$nu</span>.config-path

<span class="token string">'$env.CARAPACE_BRIDGES = '</span>zsh,fish,bash,inshellisense<span class="token string">'
mkdir $&quot;($nu.cache-dir)&quot;
carapace _carapace nushell | save --force $&quot;($nu.cache-dir)/carapace.nu&quot;
'</span> <span class="token operator">|</span> save -f <span class="token variable">$nu</span>.env-path
</code></pre></div><p>ç„¶åé‡æ–°å¯åŠ¨ nuï¼Œå°±å¯ä»¥çœ‹åˆ° PATH è¢«æ­£ç¡®åœ°å¯¼å…¥äº†ï¼š</p> <div class="language-sh extra-class"><pre class="language-sh"><code>     __  ,
 .--<span class="token punctuation">(</span><span class="token punctuation">)</span>Â°<span class="token string">'.'</span> Welcome to Nushell,
<span class="token string">'|, . ,'</span>   based on the nu language,
 <span class="token operator">!</span>_-<span class="token punctuation">(</span>_<span class="token punctuation">\</span>    where all data is structured<span class="token operator">!</span>

Version: <span class="token number">0.110</span>.0 <span class="token punctuation">(</span>x86_64-unknown-linux-gnu<span class="token punctuation">)</span>
Please <span class="token function">join</span> our Discord community at https://discord.gg/NtAbbGn
Our GitHub repository is at https://github.com/nushell/nushell
Our Documentation is located at https://nushell.sh
And the Latest Nushell News at https://nushell.sh/blog/
Learn how to remove this at: https://nushell.sh/book/configuration.html<span class="token comment">#remove-welcome-message</span>

It<span class="token string">'s been this long since Nushell'</span>s first commit:
6yrs 9months 8days 22hrs 28mins 30secs 150ms <span class="token number">302</span>Âµs 349ns

Startup Time: 361ms <span class="token number">878</span>Âµs 756ns


liu <span class="token keyword">in</span> ğŸŒ Home-Server <span class="token keyword">in</span> ~
â¯ <span class="token builtin class-name">echo</span> <span class="token variable">$env</span><span class="token builtin class-name">.</span><span class="token environment constant">PATH</span>
â•­â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  <span class="token number">0</span> â”‚ /home/liu/.cargo/bin                             â”‚
â”‚  <span class="token number">1</span> â”‚ /home/liu/.local/lib/go/bin                      â”‚
â”‚  <span class="token number">2</span> â”‚ /home/liu/.fvm_flutter/bin                       â”‚
â”‚  <span class="token number">3</span> â”‚ /home/liu/.pyenv/shims                           â”‚
â”‚  <span class="token number">4</span> â”‚ /home/liu/.pyenv/bin                             â”‚
â”‚  <span class="token number">5</span> â”‚ /home/liu/.nvm/versions/node/v22.12.0/bin        â”‚
â”‚  <span class="token number">6</span> â”‚ /usr/lib/jvm/default/bin                         â”‚
â”‚  <span class="token number">7</span> â”‚ /usr/local/sbin                                  â”‚
â”‚  <span class="token number">8</span> â”‚ /usr/local/bin                                   â”‚
â”‚  <span class="token number">9</span> â”‚ /usr/bin                                         â”‚
â”‚ <span class="token number">10</span> â”‚ /home/liu/.local/bin                             â”‚
â”‚ <span class="token number">11</span> â”‚ /home/liu/.local/bin                             â”‚
â”‚ <span class="token number">12</span> â”‚ /home/liu/git/github/dev-tools/shell             â”‚
â”‚ <span class="token number">13</span> â”‚ /home/liu/.pnpm-global/bin                       â”‚
â”‚ <span class="token number">14</span> â”‚ /home/liu/.yarn/bin                              â”‚
â”‚ <span class="token number">15</span> â”‚ /home/liu/.pub-cache/bin                         â”‚
â”‚ <span class="token number">16</span> â”‚ /home/liu/.local/share/JetBrains/Toolbox/scripts â”‚
â”‚ <span class="token number">17</span> â”‚ /home/liu/.local/lib/Android/Sdk/platform-tools  â”‚
â•°â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
</code></pre></div></div> <hr role="separator" aria-orientation="horizontal" class="ma-4 v-divider theme--light"> <div data-v-54a1e472><script src="https://giscus.app/client.js" async="async" service="giscus" data-repo="lyh543/blog-comments" data-repo-id="R_kgDOHIb2Zg" data-category="Announcements" data-category-id="DIC_kwDOHIb2Zs4COh2z" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" data-v-54a1e472></script></div></div></div></article></div> <!----></container> <div class="v-dialog__container"><button type="button" role="button" aria-haspopup="true" aria-expanded="false" class="v-btn v-btn--bottom v-btn--is-elevated v-btn--fab v-btn--fixed v-btn--has-bg v-btn--right v-btn--round theme--dark v-size--default primary"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-information-variant theme--dark"></i></span></button><!----></div></div></div></main> <footer id="footer" class="v-footer v-sheet theme--light v-footer--absolute v-footer--padless v-footer--inset" style="left:0px;right:0px;bottom:0px;"><div class="lighten-1 text-center v-card v-sheet theme--light rounded-0" style="width:100%;"><div class="v-card__text"><a href="https://github.com/lyh543/vuepress-theme-blog-material/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-github theme--light" style="font-size:24px;"></i></span></a><a href="https://blog.lyh543.cn/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-web theme--light" style="font-size:24px;"></i></span></a><a href="mailto:lyh543@outlook.com" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-email theme--light" style="font-size:24px;"></i></span></a><a href="https://weibo.com/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-sina-weibo theme--light" style="font-size:24px;"></i></span></a><a href="https://weixin.qq.com/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-wechat theme--light" style="font-size:24px;"></i></span></a><a href="https://qq.com/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-qqchat theme--light" style="font-size:24px;"></i></span></a><a href="https://bilibili.com/" target="_blank" class="mx-4 v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><div class="v-image v-responsive theme--light" style="max-width:24px;"><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-image:;background-position:center center;"></div><div class="v-responsive__content"></div></div></span></a></div> <hr role="separator" aria-orientation="horizontal" class="v-divider theme--light"> <div class="v-card__text"><span class="footer-text">lyh543 Â© 2019 - 2024</span>
        |
      <a href="https://beian.miit.gov.cn/" target="_blank" class="footer-link">èœ€ICPå¤‡19034464å·</a>
        |
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" class="footer-link">ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a>
        |
       <span class="footer-text">
        Theme
        <a href="https://github.com/lyh543/vuepress-theme-blog-material/" target="_blank" class="footer-link">
          vuepress-theme-blog-material
        </a></span></div></div></footer></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.528389ef.js" defer></script><script src="/assets/js/235.094c9b84.js" defer></script>
  </body>
</html>
