<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Vue 学习笔记 | 小灰灰灰灰的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="前端,Vue">
    <meta name="description" content="Vue.js 是一个用于创建用户界面的开源 JavaScript 框架，也是一个创建单页应用的 Web 应用框架。目前正式版迭代到了 v2。值得一提的是，Vue 的作者是国人尤雨溪，最大的好处就是文档的中文支持非常快，目前还在 v3.x-beta 的教程仅支持中英文。 Vuetify 是一个纯手工精心打造的 Material 样式的 Vue UI 组件库。目前迭代到了 v2。 我开发的第一个（目前">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue 学习笔记">
<meta property="og:url" content="https://blog.lyh543.cn/front-end/vue-tips/index.html">
<meta property="og:site_name" content="小灰灰灰灰的博客">
<meta property="og:description" content="Vue.js 是一个用于创建用户界面的开源 JavaScript 框架，也是一个创建单页应用的 Web 应用框架。目前正式版迭代到了 v2。值得一提的是，Vue 的作者是国人尤雨溪，最大的好处就是文档的中文支持非常快，目前还在 v3.x-beta 的教程仅支持中英文。 Vuetify 是一个纯手工精心打造的 Material 样式的 Vue UI 组件库。目前迭代到了 v2。 我开发的第一个（目前">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.lyh543.cn/images/1a88991093cae4191db0cd96d2fa653f4b7f30108d2aab48990eac10c46f4643.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/2aa91e8bec7b5d5d2e09bd8bc2c182c34dc4a8513096423cc9291218807e48ac.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/4f2d06fd37b59b86e4c6dedc9fc9393c21a0cb452c83621f32288f541c168b09.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/4055d4807506e77cc78a765b01f484b7daef3119edf467f77e5f6950737cd858.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/f3208d2a54ce5661b30a324eb862a720d27e32d1a3a9b0ffe05880ced5063325.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/561493e712052967720a2fc1a2a3cca728821d1d473b7537b814a96cf12bd05b.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/bd912b77d207f3775bc4f15ef9ff57104abd19acaf70d58486ba7204b4887605.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/a66bf232532f007d330d8a5a9cd092ca7f574b77798c0f2b26dd5167f270b524.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/001e18a6cab2bfe1647af1561d35731bf021db53751290087f03e02dc5336b2c.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/f4ab167ab5e2db3f796ed5fe4e1839281ec42acdd197cb73c647aeabde873831.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/a47ba3433145bf83fbdf8c6b0d71df9e0d4358bc47b227da29ed2c1769b0252c.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/ca6336fb31de4240d6b3c7d481e38b9ebf25f990d6d6d86f5365db9f7fe3a9be.png">
<meta property="og:image" content="https://blog.lyh543.cn/images/vue-card-avatar.gif">
<meta property="article:published_time" content="2021-02-01T08:29:59.000Z">
<meta property="article:modified_time" content="2021-09-11T12:19:35.107Z">
<meta property="article:author" content="lyh543">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.lyh543.cn/images/1a88991093cae4191db0cd96d2fa653f4b7f30108d2aab48990eac10c46f4643.png">
    
        <link rel="alternate" type="application/atom+xml" title="小灰灰灰灰的博客" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="mdi mdi-close icon-lg"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">lyh543</h5>
          <a href="mailto:lyh543@outlook.com" title="lyh543@outlook.com" class="mail">lyh543@outlook.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg mdi mdi-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg mdi mdi-archive"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg mdi mdi-tag-multiple"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg mdi mdi-format-list-bulleted-square"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/lyh543" target="_blank" >
                <i class="icon icon-lg mdi mdi-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg mdi mdi-menu"></i>
        </a>
        <div class="flex-col header-title ellipsis">Vue 学习笔记</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg mdi mdi-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg mdi mdi-magnify"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg mdi mdi-share-variant"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Vue 学习笔记</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-02-01T08:29:59.000Z" itemprop="datePublished" class="page-time">
  2021-02-01
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Vue/">Vue</a></li></ul></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Vue-教程？"><span class="post-toc-text">Vue 教程？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Vue-开发环境"><span class="post-toc-text">Vue 开发环境</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#部署-Vue-应用"><span class="post-toc-text">部署 Vue 应用</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Vue-页面间数据传递"><span class="post-toc-text">Vue 页面间数据传递</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-window"><span class="post-toc-text">1. window</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-Vuex"><span class="post-toc-text">2. Vuex</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-Vue-Router-路由时添加-params-参数"><span class="post-toc-text">3. Vue Router 路由时添加 params 参数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-Vue-router-路由时添加-query-参数"><span class="post-toc-text">4. Vue router 路由时添加 query 参数</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Vue-生命周期之迷惑钩子函数"><span class="post-toc-text">Vue 生命周期之迷惑钩子函数</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#在单向数据流中实现双向同步数据"><span class="post-toc-text">在单向数据流中实现双向同步数据</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Vuex-模块化太难用？"><span class="post-toc-text">Vuex 模块化太难用？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Vuetify-间距系统"><span class="post-toc-text">Vuetify 间距系统</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Vuetify-网格系统"><span class="post-toc-text">Vuetify 网格系统</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#把别人的组件封装成自己的"><span class="post-toc-text">把别人的组件封装成自己的</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#无脑复制"><span class="post-toc-text">无脑复制</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#把父组件-props-传递给子组件-props"><span class="post-toc-text">把父组件 props 传递给子组件 props</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#将父组件所有多余的-props-自动传给子组件"><span class="post-toc-text">将父组件所有多余的 props 自动传给子组件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#让子组件-click-事件能触发父组件的-v-on-click-事件"><span class="post-toc-text">让子组件 click 事件能触发父组件的 v-on:click 事件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#嵌套-slot"><span class="post-toc-text">嵌套 slot</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Vuetify-网格居中"><span class="post-toc-text">Vuetify 网格居中</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#网格系统中的居中理论"><span class="post-toc-text">网格系统中的居中理论</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#利用-css-text-align-居中"><span class="post-toc-text">利用 css text-align 居中</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#利用-v-row-justify-center"><span class="post-toc-text">利用 v-row justify center</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#利用-v-row-fill-height-上下居中"><span class="post-toc-text">利用 v-row fill-height 上下居中</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Vuetify-显示头像"><span class="post-toc-text">Vuetify 显示头像</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#编辑页面弹窗阻止用户退出"><span class="post-toc-text">编辑页面弹窗阻止用户退出</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#to-和-href"><span class="post-toc-text">to 和 href</span></a></li></ol>
        </nav>
    </aside>


<article id="post-front-end/vue-tips"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Vue 学习笔记</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-02-01 16:29:59" datetime="2021-02-01T08:29:59.000Z"  itemprop="datePublished">2021-02-01</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Vue/">Vue</a></li></ul></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p><a href="https://cn.vuejs.org/index.html" target="_blank" rel="noopener">Vue.js</a> 是一个用于创建用户界面的开源 JavaScript 框架，也是一个创建单页应用的 Web 应用框架。目前正式版迭代到了 v2。值得一提的是，Vue 的作者是国人<a href="https://www.zhihu.com/people/evanyou" target="_blank" rel="noopener">尤雨溪</a>，最大的好处就是文档的中文支持非常快，目前还在 v3.x-beta 的教程仅支持中英文。</p>
<p><a href="https://vuetifyjs.com/zh-Hans/" target="_blank" rel="noopener">Vuetify</a> 是一个纯手工精心打造的 Material 样式的 Vue UI 组件库。目前迭代到了 v2。</p>
<p>我开发的第一个（目前也是唯一一个） Vue 应用使用的组件库就是 Vuetify。可以说，Vue + Vuetify 让我入了前端的门。在本文中，我将聊聊作为一个前端萌新，在使用 Vue 和 Vuetify 的过程中，学到的前端技巧。</p>
<h2 id="Vue-教程？"><a href="#Vue-教程？" class="headerlink" title="Vue 教程？"></a>Vue 教程？</h2><p>零基础开始学习 Vue，我自然想到的是看<a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">官方教程</a>。然而官方教程并不是那么好懂：刚看到<a href="https://cn.vuejs.org/v2/guide/installation.html" target="_blank" rel="noopener">安装部分</a>，教程给出的数种安装方法就让我傻了眼，无从下手。</p>
<p>于是尝试去找别的教程，居然发现了尤雨溪在知乎上给出的学习路线：<a href="https://zhuanlan.zhihu.com/p/23134551" target="_blank" rel="noopener">新手向：Vue 2.0 的建议学习顺序</a>，其中第二点的 <code>就只用最简单的 &lt;script&gt;，把教程里的例子模仿一遍，理解用法。不推荐上来就直接用 vue-cli 构建项目，尤其是如果没有 Node/Webpack 基础。</code> 这句，对真·零基础新手非常友好。</p>
<h2 id="Vue-开发环境"><a href="#Vue-开发环境" class="headerlink" title="Vue 开发环境"></a>Vue 开发环境</h2><p>我刚入坑时，想试试使用 Typescript 来开发 Vue。有人说 WebStorm 对 TS 的支持不行，得用 VS Code，于是我就用 VS Code 写了几天 Typescript。最后，还没写完账户管理部分，就放弃 Typescript 了。</p>
<p>Typescript 的静态类型确实很不错，但是写 Typescript 的时候，是各种 TSLint 报类型错。我也尝试写 <code>.d.ts</code> 文件，但是又遇到了没法引入等等问题。还有就是 TSLint 认为 <code>this.$router</code> 是 <code>undefined</code>，所以 <code>this.$router.push()</code> 等等都会报错。</p>
<p>上面这些问题或许有方法解决，但是问题实在太多，我最后还是选择使用 JavaScript + WebStorm 开发。</p>
<p>回来发现，WebStorm 还对 Vue Router 和 Vuex 有支持，输入 <code>store.commit()</code> 的时候居然能够提示函数名。真香。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../../images/1a88991093cae4191db0cd96d2fa653f4b7f30108d2aab48990eac10c46f4643.png" alt="WebStorm 对 Vuex 的支持" title="">
                </div>
                <div class="image-caption">WebStorm 对 Vuex 的支持</div>
            </figure>

<h2 id="部署-Vue-应用"><a href="#部署-Vue-应用" class="headerlink" title="部署 Vue 应用"></a>部署 Vue 应用</h2><p>如果你的 Vue App 使用了 vue-router 的 <a href="https://router.vuejs.org/zh/guide/essentials/history-mode.html" target="_blank" rel="noopener">history 模式</a>，目前 (2021.2) 是不能使用 GitHub Pages 部署的。</p>
<p>从 uri 的角度理解，是因为 GitHub Pages 服务器会默认将对 <code>/activities/create</code> 的请求理解为 <code>/activities/create/index.html</code>，而 vue-router history 模式想要服务器理解为 <code>/index.html</code>。于是， GitHub Pages 会返回 404。</p>
<p>我尝试了网上的 hack <code>404.html</code> 和 <code>200.html</code> 的方法，但均无效。</p>
<p>一个解决方案是改用 hash 模式，此模式下链接会变为 <code>/#/activities/create</code>，这个 <code>#</code>(hash) 的存在，会让服务器将这个链接理解为 <code>/index.html#/activities/create</code>。但此法会让链接变丑。</p>
<p>另一个解决方案是用一台服务器来部署前端。Vue Router 文档中针对不同服务器提供了部署方法。不过对于 Caddy，我使用 Vue Router 文档提供的 <code>rewrite</code> 法不能正常运行。于是改用了 <code>try_files</code>，只对 Not Found 的文件进行 rewrite：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">example.com &#123;</span><br><span class="line">    root * /<span class="type">path</span>/<span class="keyword">to</span>/dist</span><br><span class="line">    try_files &#123;<span class="type">path</span>&#125; /<span class="keyword">index</span>.html</span><br><span class="line">    file_server</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后一个解决方案是我最后采用的，就是白嫖 <a href="https://azure.microsoft.com/zh-cn/services/app-service/static/" target="_blank" rel="noopener">Azure 的静态 Web 应用</a>。Microsoft Learn 还写了一篇 <a href="https://docs.microsoft.com/zh-cn/learn/modules/publish-app-service-static-web-app-api/" target="_blank" rel="noopener">教程</a> 供大家参考。与 GitHub Pages 不同的是，Azure Static Web App 允许使用路由，只需要在开发 Vue 应用时，将以下 <code>route.json</code> 放在 <code>/public/</code> 目录下即可（抄 MS Learn 的作业真爽）。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"routes"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"route"</span>: <span class="string">"/*"</span>,</span><br><span class="line">      <span class="attr">"serve"</span>: <span class="string">"/index.html"</span>,</span><br><span class="line">      <span class="attr">"statusCode"</span>: <span class="number">200</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>后来了解到，Vercel App 也支持部署。</p>
<h2 id="Vue-页面间数据传递"><a href="#Vue-页面间数据传递" class="headerlink" title="Vue 页面间数据传递"></a>Vue 页面间数据传递</h2><p>页面间需要传递数据，该怎么办呢？</p>
<p>对于 C 语言，不同函数传递数据无非是两个办法，使用全局变量和传递参数。</p>
<p>在 Vue 中也是类似的思想：全局变量（window 或 Vuex.store）和传递参数（params 或 query）。</p>
<h3 id="1-window"><a href="#1-window" class="headerlink" title="1. window"></a>1. window</h3><p><code>window</code> 就是 DOM 中的全局变量，你可以通过赋值，把任何数据（当前用户信息）、甚至函数和对象（如 Vue 组件）挂到 window 下。</p>
<h3 id="2-Vuex"><a href="#2-Vuex" class="headerlink" title="2. Vuex"></a>2. Vuex</h3><p><a href="https://vuex.vuejs.org/zh/" target="_blank" rel="noopener">Vuex</a></p>
<p><code>Vuex.Store</code> 类似于 <code>window</code>，可以在不同的页面中使用、更改这些里面的数据。那为什么还需要这个工具呢？</p>
<p>个人理解，Store 更强调的是<strong>状态</strong>。因此，它和 <code>window</code> 有两个区别：</p>
<ol>
<li>Store 存储的状态是需要在定义 Store 时就给出的，而不是像 window 一样，随时都可以为其添加新的数据、删除数据。</li>
<li>Store 可以随心所欲地读取，但是不能随心所欲地修改。为了防止对数据的错误修改，Store 要求将修改数据的操作，作为函数提前写入 Store 里（这些操作函数被称为 <code>mutation</code>），然后要求页面调用这些 <code>mutation</code> 来修改数据。在严格模式下，无论何时发生数据变更且不是由 mutation 函数引起的，将会抛出错误。</li>
</ol>
<h3 id="3-Vue-Router-路由时添加-params-参数"><a href="#3-Vue-Router-路由时添加-params-参数" class="headerlink" title="3. Vue Router 路由时添加 params 参数"></a>3. Vue Router 路由时添加 params 参数</h3><p>可以传递任何对象，但参数不会出现在链接中（除非在 Router 中专门设置了）。</p>
<p>发送方：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> profile = &#123;<span class="attr">id</span>: <span class="number">1</span>&#125;;</span><br><span class="line">$<span class="keyword">this</span>.router.push(&#123;</span><br><span class="line">  name: <span class="string">'NextPage'</span>,</span><br><span class="line">  params: &#123;</span><br><span class="line">    user_profile: profile,</span><br><span class="line">    user_id: <span class="number">233</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>接收方：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$<span class="keyword">this</span>.route.params.user_id <span class="comment">// 233</span></span><br><span class="line">$<span class="keyword">this</span>.route.params.user_profile <span class="comment">// &#123;id: 1&#125;</span></span><br></pre></td></tr></table></figure>

<p>如果 RouteConfig 中定义如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/user/:user_id'</span>,</span><br><span class="line">    name: <span class="string">'UserDetail'</span>,</span><br><span class="line">    component: UserDetail,</span><br><span class="line">    props: <span class="literal">true</span>,  <span class="comment">// props 表示 activityId 参数可以传到组件</span></span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>url 会变为 <code>/user/233</code>。</p>
<h3 id="4-Vue-router-路由时添加-query-参数"><a href="#4-Vue-router-路由时添加-query-参数" class="headerlink" title="4. Vue router 路由时添加 query 参数"></a>4. Vue router 路由时添加 query 参数</h3><p>和上一种方法类似，但是这种方法的参数会出现在 url 中，且只能传递字符串。</p>
<p>发送方：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$<span class="keyword">this</span>.router.push(&#123;</span><br><span class="line">  name: <span class="string">'NextPage'</span>,</span><br><span class="line">  query: &#123;</span><br><span class="line">    id: <span class="string">'1'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>接收方：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$<span class="keyword">this</span>.route.params.query.id <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>同时链接会变为：<code>原url?id=1</code>。</p>
<h2 id="Vue-生命周期之迷惑钩子函数"><a href="#Vue-生命周期之迷惑钩子函数" class="headerlink" title="Vue 生命周期之迷惑钩子函数"></a>Vue 生命周期之迷惑钩子函数</h2><p>生命周期，最大的作用，就是进入一个页面的时候，对这个页面进行初始化；还有就是，从别的页面切换到这个页面的时候，对这个页面的数据初始化。</p>
<p>如果是一个没有缓存的页面，每进入一个页面都需要进行创建并挂载，那么 <code>created</code> 和 <code>mounted</code> 这两个生命周期钩子函数，二选一，在里面写上自己的初始化代码就可以了。</p>
<p>而对于 Vue 来说，如果使用 <a href="https://cn.vuejs.org/v2/api/#keep-alive" target="_blank" rel="noopener"><code>&lt;keep-alive&gt;</code></a> 包裹组件，它会缓存不活动的组件实例，等再次调用时（即使不是同一个 url）并不会发生第二次 <code>created</code> 或 <code>mounted</code>。<br>这可能会导致下面这种场景：对于用户信息页面，我们进入用户 1 的页面，此时发生 <code>created</code> 和 <code>mounted</code>，页面信息显示为用户 1 的信息；然后我们切换到用户 2 的页面，此时并没有发生 <code>created</code> 或 <code>mounted</code>，页面仍显示为用户 1 的信息。</p>
<p>因此，我们要采取别的方法。对于 <a href="https://cn.vuejs.org/v2/api/#keep-alive" target="_blank" rel="noopener"><code>&lt;keep-alive&gt;</code></a> 包裹的组件，官方文档直接指明使用 <code>activated</code> 和 <code>deactivated</code>。的确，把初始化代码放在 <code>activated</code> 里，就能代替 <code>created</code> 的初始化功能了。</p>
<hr>
<p>不过有个地方很奇怪，如果用 <a href="https://cn.vuejs.org/v2/api/#keep-alive" target="_blank" rel="noopener"><code>&lt;keep-alive&gt;</code></a> 包裹了一个带有 <code>&lt;v-tab&gt;</code> 的组件（tab 下有几个子组件）。我发现，第一次加载这个页面以及子组件时，子组件并不会触发 <code>activated</code>。</p>
<p>经过测试后发现，第一次加载这个页面以及子组件时，子组件并不会触发 <code>activated</code>只会触发 <code>created</code>；而在后面几次进入时，每次都会触发 <code>activated</code>，而不会触发 <code>created</code>。</p>
<p>目前尚不清楚不清楚为什么会这样。不过这样的话，可以改用 <code>created</code> 加 <code>activated</code>：将初始化函数封装为组件的一个 method，然后把 <code>created</code> 和 <code>activated</code> 写成调用这个 method：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">    fetchData() &#123;</span><br><span class="line">      <span class="comment">// 初始化代码</span></span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  created() &#123;</span><br><span class="line">    <span class="keyword">this</span>.fetchData();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  activated() &#123;</span><br><span class="line">    <span class="keyword">this</span>.fetchData();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="在单向数据流中实现双向同步数据"><a href="#在单向数据流中实现双向同步数据" class="headerlink" title="在单向数据流中实现双向同步数据"></a>在单向数据流中实现双向同步数据</h2><p>父组件使用 <code>.sync</code> 修饰符：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text-document</span> <span class="attr">v-bind:title.sync</span>=<span class="string">"myTitle"</span>&gt;</span><span class="tag">&lt;/<span class="name">text-document</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<p>子组件使用 <code>computed</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  indexInternal: &#123;</span><br><span class="line">    <span class="keyword">get</span>() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.index;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>(val) &#123;</span><br><span class="line">      <span class="keyword">this</span>.emit(<span class="string">'update:index'</span>, val);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>子组件也可以使用 <code>watch</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">watch: &#123;</span><br><span class="line">  <span class="comment">// 外部变量</span></span><br><span class="line">  index() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.indexInternal !== <span class="keyword">this</span>.index) &#123;</span><br><span class="line">      <span class="keyword">this</span>.indexInternal = <span class="keyword">this</span>.index;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 内部变量</span></span><br><span class="line">  indexInternal() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.indexInternal !== <span class="keyword">this</span>.index) &#123;</span><br><span class="line">      <span class="keyword">this</span>.$emit(<span class="string">'update:index'</span>, <span class="keyword">this</span>.indexInternal);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Vuex-模块化太难用？"><a href="#Vuex-模块化太难用？" class="headerlink" title="Vuex 模块化太难用？"></a>Vuex 模块化太难用？</h2><p>尝试一下 <a href="https://github.com/davestewart/vuex-pathify" target="_blank" rel="noopener">vuex-pathify</a>！其核心语法就如下图：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/2aa91e8bec7b5d5d2e09bd8bc2c182c34dc4a8513096423cc9291218807e48ac.png" alt="vuex-pathify" title="">
                </div>
                <div class="image-caption">vuex-pathify</div>
            </figure>

<p>另外还直接提供了 <code>get</code>（类似于 mapGetters 的单向数据流）和 <code>sync</code>（这是 Vuex 没有的双向数据流！）。</p>
<hr>
<p>但是啊但是，Webstorm 完全不支持对 vuex-pathify 进行自动补全，重构代码太麻烦了，再加上不熟悉 vuex-pathify，最终还是放弃了 vuex-pathify。<del>快进到放弃 Vue 2</del></p>
<h2 id="Vuetify-间距系统"><a href="#Vuetify-间距系统" class="headerlink" title="Vuetify 间距系统"></a>Vuetify 间距系统</h2><p>在抄 Vuetify 示例组件的时候常常看到 <code>class = &quot;ma-0&quot;</code> 等此类标识，这个是什么呢？</p>
<p>Vuetify 深受 Bootstrap 的启发，在这部分也一样。我在 Google 找到了 <a href="https://getbootstrap.com/docs/4.0/utilities/spacing/" target="_blank" rel="noopener">Bootstrap 的间距</a>。大概意思是：</p>
<p><code>ma-0</code></p>
<ul>
<li><code>m</code> 表示 <code>margin</code>；也可以取 <code>p</code> 表示 <code>padding</code>；</li>
<li><code>a</code> 表示 <code>all</code>；也可以取 <code>t</code> <code>b</code> <code>l</code> <code>r</code> 分别表示四边；也可以使用 <code>x</code> 和 <code>y</code> 分别表示左右和上下；</li>
<li><code>0</code> 表示设置为 <code>0</code>；也可以取 1~5，间距从 0 依次增大；还可以取 <code>auto</code>。</li>
</ul>
<p>所以，可以理解为 <code>class=&quot;ma-0&quot;</code> 是 <code>style=&quot;margin: 0 !important&quot;</code> 的简写。</p>
<hr>
<p>而 Vuetify 的 <code>ma-1</code> 和 Bootstrap 有一点不同，在最后的数字上：</p>
<ul>
<li>Vuetify 的数字取值范围在 <code>0~16</code>，且每个单位都代表 4px（即 <code>16</code> 代表 64px），还可以使用 <code>n16</code> 表示负 64px；而 Bootstrap 的 0 到 5 是从 <code>0</code> 到 <code>$spacer * 3</code> 不均匀增加的。</li>
</ul>
<p>在 <code>vuetify.css</code> 也能看到这部分的定义：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/4f2d06fd37b59b86e4c6dedc9fc9393c21a0cb452c83621f32288f541c168b09.png" alt="vuetify.css" title="">
                </div>
                <div class="image-caption">vuetify.css</div>
            </figure>

<h2 id="Vuetify-网格系统"><a href="#Vuetify-网格系统" class="headerlink" title="Vuetify 网格系统"></a>Vuetify 网格系统</h2><p>Vuetify 网格深受 <a href="https://getbootstrap.com/docs/4.0/layout/grid/" target="_blank" rel="noopener">Bootstrap 网格</a>的启发，所以如果有 Bootstrap 基础，Vuetify 上手应该会很快，反之亦然。<del>可惜我都没有</del></p>
<p>Vuetify 网格系统包含四个核心子组件：</p>
<ul>
<li><code>v-container</code> 代表一个网格</li>
<li><code>v-row</code> 代表一行 (row)</li>
<li><code>v-col</code> 代表一列 (column)。注意 <code>v-col</code> 必须是 <code>v-row</code> 的子组件，即一定是 <code>v-container</code> &gt; <code>v-row</code> &gt; <code>v-col</code> 的顺序</li>
<li><code>v-spacer</code>：可以在 <code>v-row</code> 之间或 <code>v-col</code> 之间放置一个 <code>v-spacer</code>，这样父子组件之间的剩余宽度就会被分配到这里</li>
</ul>
<p>下面我将借助两个实际的例子聊聊网格系统的作用。</p>
<hr>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../../images/4055d4807506e77cc78a765b01f484b7daef3119edf467f77e5f6950737cd858.png" alt="网格系统 例 1" title="">
                </div>
                <div class="image-caption">网格系统 例 1</div>
            </figure>

<p>问：上图中用个几个网格 <code>v-container</code>？</p>
<p>答案是两个。</p>
<p>我刚接触 Vuetify 的时候，也觉得只需要一个网格将表单框起来、每个 row 对应一个输入项就可以了。</p>
<p>然而，当我只使用一个 <code>v-container</code> 时，效果图是这样的：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../../images/f3208d2a54ce5661b30a324eb862a720d27e32d1a3a9b0ffe05880ced5063325.png" alt="使用一个网格系统的效果" title="">
                </div>
                <div class="image-caption">使用一个网格系统的效果</div>
            </figure>

<p>可以看到，最外层的 <code>v-card</code> 和边框合为一体了。而如果在 <code>v-card</code> 外面加一层 <code>v-container</code> <code>v-row</code> <code>v-col</code>，就可以把 <code>v-card</code> 框在中间的位置。</p>
<p>第一张图的部分代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 外层的 container、row、col 是为了限制 card 的布局 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">v-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">v-row</span> <span class="attr">class</span>=<span class="string">"justify-center"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-col</span> <span class="attr">xs</span>=<span class="string">"12"</span> <span class="attr">md</span>=<span class="string">"8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-card</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">v-card-text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">v-form</span> @<span class="attr">submit.prevent</span>=<span class="string">"register"</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 内层的 container、col 是为了限制 form 的布局 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">v-container</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">v-col</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">v-text-field</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">v-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">&lt;!-- 更多 text-field --&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">v-col</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">v-text-field</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">v-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">              <span class="tag">&lt;/<span class="name">v-container</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">v-form</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">v-card-text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">v-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">v-row</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">v-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/uestc-msc/uestcmsc_webapp_frontend/blob/b7c51c915d28dda1c6058fa34b85764bacac29a2/src/components/sites/account/signup.vue" target="_blank" rel="noopener">完整代码</a></p>
<p>顺便一提，Vuetify 网格系统文档中介绍到，Vuetify 配备了一个使用 flexbox 构建的 12 格网格系统。<code>&lt;v-col xs=&quot;12&quot; md=&quot;8&quot;&gt;</code> 表示，对于 md 的屏幕，这列将占 8 格，也就是 2/3；对于 xs 的屏幕，这列将占据 12 格，也就是全部。</p>
<p>这和 Bootstrap 是也类似的，所以如果在 Vuetify 中遇到不懂的概念，除了在 Vuetify 文档中搜索，还可以尝试在 Bootstrap 里搜索。</p>
<hr>
<p>再来一个例子，下图中用了几个网格系统？</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../../images/561493e712052967720a2fc1a2a3cca728821d1d473b7537b814a96cf12bd05b.png" alt="网格系统 例 2" title="">
                </div>
                <div class="image-caption">网格系统 例 2</div>
            </figure>

<p>答案是 3 个，在下图中有标出：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../../images/bd912b77d207f3775bc4f15ef9ff57104abd19acaf70d58486ba7204b4887605.png" alt="三个网格系统" title="">
                </div>
                <div class="image-caption">三个网格系统</div>
            </figure>

<p>完整代码：</p>
<h2 id="把别人的组件封装成自己的"><a href="#把别人的组件封装成自己的" class="headerlink" title="把别人的组件封装成自己的"></a>把别人的组件封装成自己的</h2><h3 id="无脑复制"><a href="#无脑复制" class="headerlink" title="无脑复制"></a>无脑复制</h3><p>大多数后端项目的缩进都是 4 spaces，但前端则是使用 2 spaces。因为前端实在是太容易套娃了，随随便便就能搞个五层、十层以上。上面的例子用了三个网格系统，每一个网格系统对应一个 <code>v-container</code>、<code>v-row</code> 和 <code>v-column</code>，光是网格系统也有九层缩进了……</p>
<p>所以，将别人的组件封装成自己的，不仅能减少重复代码量，还能大幅减少缩进。</p>
<p>比如，上面的<a href="#vuetify-%E7%BD%91%E6%A0%BC%E7%B3%BB%E7%BB%9F">网格部分</a>提到，最外层的 <code>v-card</code> 都需要加一个网格系统。所以我做了如下封装：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- /src/components/ui/base/simple-card.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">v-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">v-row</span> <span class="attr">class</span>=<span class="string">"justify-center"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-col</span>  <span class="attr">xs</span>=<span class="string">"12"</span> <span class="attr">md</span>=<span class="string">"8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-card</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">v-card-text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">slot</span>/&gt;</span> <span class="comment">&lt;!--  这里会把调用 SimpleCard 处的 &lt;SimpleCard&gt; &lt;/SimpleCard&gt; 之间的代码插入  --&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">v-card-text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">v-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">v-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">v-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样，网格系统例 1 的部分代码就可以缩减为如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">SimpleCard</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">v-form</span> @<span class="attr">submit.prevent</span>=<span class="string">"register"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 内层的 container、col 是为了限制 form 的布局 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-container</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">v-text-field</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">v-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 更多 text-field --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">v-text-field</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">v-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">v-form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">SimpleCard</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> SimpleCard <span class="keyword">from</span> <span class="string">"@/components/ui/base/simple-card"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  components: &#123;SimpleCard&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>直接少了 4 层缩进。</p>
<h3 id="把父组件-props-传递给子组件-props"><a href="#把父组件-props-传递给子组件-props" class="headerlink" title="把父组件 props 传递给子组件 props"></a>把父组件 props 传递给子组件 props</h3><p>现在的需求是，有些页面不想用 <code>xs=&quot;8&quot;</code>，而想用 <code>xs=&quot;6&quot;</code>。用编程中的函数来讲，就是想要默认参数。我们想要使用：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;</span></span><br><span class="line"><span class="tag">    <span class="attr">SimpleCard</span></span></span><br><span class="line"><span class="tag">    <span class="attr">md</span>=<span class="string">"6"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">SimpleCard</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>就能在子组件中渲染出 <code>&lt;v-col md=&quot;6&quot;&gt;</code>。而在其他时候，依然渲染 <code>&lt;v-col md=&quot;8&quot;&gt;</code>。</p>
<p>只需要使用在子组件的 component 定义中添加 <code>props</code> 即可。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- /src/components/ui/base/simple-card.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">v-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">v-row</span> <span class="attr">class</span>=<span class="string">"justify-center"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-col</span> <span class="attr">:xs</span>=<span class="string">"xs"</span> <span class="attr">:md</span>=<span class="string">"md"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-card</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">v-card-text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">slot</span>/&gt;</span> <span class="comment">&lt;!--  这里会把调用 SimpleCard 处的 &lt;SimpleCard&gt; &lt;/SimpleCard&gt; 之间的代码插入  --&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">v-card-text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">v-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">v-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">v-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  props: &#123;</span><br><span class="line">    xs: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">default</span>: <span class="number">12</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    md: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">default</span>: <span class="number">8</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>props 就类似于函数的参数，<code>default</code> 即是默认参数。</p>
<h3 id="将父组件所有多余的-props-自动传给子组件"><a href="#将父组件所有多余的-props-自动传给子组件" class="headerlink" title="将父组件所有多余的 props 自动传给子组件"></a>将父组件所有多余的 props 自动传给子组件</h3><p>这个问题出现在我想要封装 <a href="https://vuetifyjs.com/zh-Hans/components/tooltips/" target="_blank" rel="noopener">tooltips</a> 和 <a href="https://vuetifyjs.com/zh-Hans/components/floating-action-buttons/" target="_blank" rel="noopener">fab</a> 的时候。</p>
<p>首先我们依照 Vuetify 给的模板编写的可用的代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 鼠标放置按钮之上可以看到提示 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">v-tooltip</span> <span class="attr">top</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:activator</span>=<span class="string">"&#123; on, attrs &#125;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-btn</span></span></span><br><span class="line"><span class="tag">        <span class="attr">fab</span></span></span><br><span class="line"><span class="tag">        <span class="attr">large</span></span></span><br><span class="line"><span class="tag">        <span class="attr">buttom</span></span></span><br><span class="line"><span class="tag">        <span class="attr">absolute</span></span></span><br><span class="line"><span class="tag">        <span class="attr">right</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-bind</span>=<span class="string">"attrs"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-on</span>=<span class="string">"on"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-icon</span>&gt;</span>mdi-home<span class="tag">&lt;/<span class="name">v-icon</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-btn</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>Tooltips<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">v-tooltip</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们先按上文，将 Tooltips 和 图标的内容改为 props：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- /src/components/ui/base/floating-action-button.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">v-tooltip</span> <span class="attr">bottom</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:activator</span>=<span class="string">"&#123; on, attrs &#125;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-btn</span></span></span><br><span class="line"><span class="tag">        <span class="attr">fab</span></span></span><br><span class="line"><span class="tag">        <span class="attr">large</span></span></span><br><span class="line"><span class="tag">        <span class="attr">buttom</span></span></span><br><span class="line"><span class="tag">        <span class="attr">absolute</span></span></span><br><span class="line"><span class="tag">        <span class="attr">right</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-bind</span>=<span class="string">"attrs"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-on</span>=<span class="string">"on"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-icon</span>&gt;</span>mdi-home<span class="tag">&lt;/<span class="name">v-icon</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-btn</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; tooltip &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">v-tooltip</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  props: &#123;</span><br><span class="line">    icon: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">default</span>: <span class="string">'mdi-plus'</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    tooltip: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">default</span>: <span class="string">''</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样就可以通过下面的形式调用这个组件了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">FloatingActionButton</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> FloatingActionButton <span class="keyword">from</span> <span class="string">"@/components/ui/base/floating-action-button"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  components: &#123;FloatingActionButton&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>自定义了 <code>tooltip</code> 和 <code>icon</code> 后我们发现，由于 <code>v-btn</code> 上能设置的属性可就太多了（如 <code>disabled</code> <code>color</code> <code>loading</code> 等等），把这些一个一个写到 props 里，实在不美观。有没有简洁的方法，使得我写 <code>&lt;FloatingActionButton loading disabled/&gt;</code> 就能把这两个参数传给子组件的 <code>v-btn</code> 中呢？</p>
<hr>
<p>Vue <a href="https://cn.vuejs.org/v2/guide/components-props.html#%E9%9D%9E-Prop-%E7%9A%84-Attribute" target="_blank" rel="noopener">文档</a>中提到了这种情况。Vue 把这里的 <code>disabled</code> <code>color</code> 等称为<strong>非 Prop 的 Attribute</strong>。</p>
<blockquote>
<p>一个<strong>非 prop 的 attribute</strong> 是指传向一个组件，但是该组件并没有相应 prop 定义的 attribute。</p>
</blockquote>
<p>文档指出，这些非 prop 的 attribute，会默认替换/合并<strong>根组件</strong>已有的 attribute。不巧的是，我们的 <code>&lt;FloatingActionButton&gt;</code> 的根组件是 <code>&lt;v-tooltips&gt;</code>，所以这些 attribute 被默认放到了 <code>&lt;v-tooltips&gt;</code> 上。</p>
<p>为了打破这种默认情况，我们需要先在 component 定义中加入 <code>inheritAttrs: false</code> 禁止继承给根组件 <code>&lt;v-tooltips&gt;</code>，然后手动给需要的组件绑定 <code>$attrs</code>，类似于下面：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- /src/components/ui/base/floating-action-button.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 鼠标放置按钮之上可以看到提示 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">v-tooltip</span> <span class="attr">top</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:activator</span>=<span class="string">"&#123; on, attrs &#125;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-btn</span></span></span><br><span class="line"><span class="tag">        <span class="attr">fab</span></span></span><br><span class="line"><span class="tag">        <span class="attr">large</span></span></span><br><span class="line"><span class="tag">        <span class="attr">buttom</span></span></span><br><span class="line"><span class="tag">        <span class="attr">absolute</span></span></span><br><span class="line"><span class="tag">        <span class="attr">right</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-bind</span>=<span class="string">"attrs"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-bind</span>=<span class="string">"$attrs"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-on</span>=<span class="string">"on"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-icon</span>&gt;</span>&#123;&#123; icon &#125;&#125;<span class="tag">&lt;/<span class="name">v-icon</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-btn</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; tooltip &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">v-tooltip</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  inheritAttrs: <span class="literal">false</span>,</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// 不让组件的根元素继承 attribute，而手动将 $attrs 赋给 v-btn</span></span></span><br><span class="line">  props: &#123;</span><br><span class="line">    icon: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">default</span>: <span class="string">'mdi-plus'</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    tooltip: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">default</span>: <span class="string">''</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>对于其他组件，就是这个效果。然而，对于这个组件，问题在于 Vuetify 的模板代码包含了一个 <code>v-bind=&quot;attrs&quot;</code>，和我们的 <code>v-bind</code> 冲突了。我们需要把这两个 <code>v-bind</code> 合并。</p>
<p>而对于 JS，可以使用 <code>{...$attrs, ...attrs}</code> 的语法合并这两个 Object 为一个。于是，我们将 <code>template</code> 部分代码改为：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- /src/components/ui/base/floating-action-button.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 鼠标放置按钮之上可以看到提示 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">v-tooltip</span> <span class="attr">top</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:activator</span>=<span class="string">"&#123; on, attrs &#125;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-btn</span></span></span><br><span class="line"><span class="tag">        <span class="attr">fab</span></span></span><br><span class="line"><span class="tag">        <span class="attr">large</span></span></span><br><span class="line"><span class="tag">        <span class="attr">buttom</span></span></span><br><span class="line"><span class="tag">        <span class="attr">absolute</span></span></span><br><span class="line"><span class="tag">        <span class="attr">right</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-bind</span>=<span class="string">"&#123;...$attrs, ...attrs&#125;"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-on</span>=<span class="string">"on"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-icon</span>&gt;</span>&#123;&#123; icon &#125;&#125;<span class="tag">&lt;/<span class="name">v-icon</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-btn</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; tooltip &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">v-tooltip</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>就可以使用了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FloatingActionButton</span></span></span><br><span class="line"><span class="tag">  <span class="attr">icon</span>=<span class="string">"mdi-pencil"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">color</span>=<span class="string">"primary"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">tooltip</span>=<span class="string">"编辑"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">click</span>=<span class="string">"gotoEditUserDetail"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="让子组件-click-事件能触发父组件的-v-on-click-事件"><a href="#让子组件-click-事件能触发父组件的-v-on-click-事件" class="headerlink" title="让子组件 click 事件能触发父组件的 v-on:click 事件"></a>让子组件 click 事件能触发父组件的 v-on:click 事件</h3><p>还是接着上面的 tooltips + fab。</p>
<p>其实非常简单，只需要在 template 中添加一行 <code>@click=&quot;$emit(&#39;click&#39;)&quot;</code>，让子组件 <code>&lt;v-btn&gt;</code> 的 <code>v-on:click</code> 事件设置为触发 <code>click</code> 事件，让其向上传递即可，如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- /src/components/ui/base/floating-action-button.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 鼠标放置按钮之上可以看到提示 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">v-tooltip</span> <span class="attr">top</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:activator</span>=<span class="string">"&#123; on, attrs &#125;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-btn</span></span></span><br><span class="line"><span class="tag">        <span class="attr">fab</span></span></span><br><span class="line"><span class="tag">        <span class="attr">large</span></span></span><br><span class="line"><span class="tag">        <span class="attr">buttom</span></span></span><br><span class="line"><span class="tag">        <span class="attr">absolute</span></span></span><br><span class="line"><span class="tag">        <span class="attr">right</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-bind</span>=<span class="string">"&#123;...attrs, ...$attrs&#125;"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-on</span>=<span class="string">"on"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"$emit('click')"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-icon</span>&gt;</span>&#123;&#123; icon &#125;&#125;<span class="tag">&lt;/<span class="name">v-icon</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-btn</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; tooltip &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">v-tooltip</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>&lt;script&gt;</code> 部分则完全不需要修改。</p>
<h3 id="嵌套-slot"><a href="#嵌套-slot" class="headerlink" title="嵌套 slot"></a>嵌套 slot</h3><p>这里的场景是想要把某个自定义组件封装成一个组件（下称为中间层），以供（外层）复用。该自定义组件中用到的 Vuetify 组件（内层）用到了 slot 语法，想把这个内层的 slot 暴露给外层。</p>
<p>外层的写法和 Vuetify 的写法一样：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">PasswordEditDialog</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:user</span>=<span class="string">"userProfile"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:activator</span>=<span class="string">"&#123;on, attrs&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">v-btn</span></span></span><br><span class="line"><span class="tag">      <span class="attr">color</span>=<span class="string">"warning"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-bind</span>=<span class="string">"attrs"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-on</span>=<span class="string">"on"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      修改密码</span><br><span class="line">    <span class="tag">&lt;/<span class="name">v-btn</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">PasswordEditDialog</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>中间层需要注意的是， <code>v-bind</code> 的东西是整个<code>插槽 prop</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">v-dialog</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"dialog"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">transition</span>=<span class="string">"dialog-bottom-transition"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:activator</span>=<span class="string">"defaultProps"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>  <span class="attr">name</span>=<span class="string">"activator"</span> <span class="attr">v-bind</span>=<span class="string">"defaultProps"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">v-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Vuetify-网格居中"><a href="#Vuetify-网格居中" class="headerlink" title="Vuetify 网格居中"></a>Vuetify 网格居中</h2><p>对于我来说，居中、向右对齐一直是个头疼的问题。各种组件的对齐方法都不同，况且对齐还分为了上下对齐和左右对齐。网上似乎也没有什么总结性的帖子，就只好记录一下自己编码的时候遇到的坑了。</p>
<p>但是最后发现遇到的大部分问题都可以用网格系统来解决。</p>
<h3 id="网格系统中的居中理论"><a href="#网格系统中的居中理论" class="headerlink" title="网格系统中的居中理论"></a>网格系统中的居中理论</h3><p>网格系统中，如果想要上下对齐，可以使用 <code>&lt;v-row&gt;</code> 的 <code>align</code> 和 <code>align-content</code> 属性；想要左右对齐，可以使用 <code>&lt;v-row&gt;</code> 的 <code>justify</code> 属性。<a href="https://vuetifyjs.com/zh-Hans/api/v-row/" target="_blank" rel="noopener"> v-row 文档</a></p>
<p>对于 <code>align</code> 和 <code>align-content</code> 的区别，请看：<a href="https://zhuanlan.zhihu.com/p/87146411" target="_blank" rel="noopener">知乎 - 弹性盒子 align-items 与 align-content 的区别</a>。简单来说，<code>align</code> 或 CSS 中的 <code>align-items</code> 控制当前行中的列的行为，而 <code>align-content</code> 控制的是所有行的行为。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/a66bf232532f007d330d8a5a9cd092ca7f574b77798c0f2b26dd5167f270b524.png" alt="illustration of align-items" title="">
                </div>
                <div class="image-caption">illustration of align-items</div>
            </figure>

<p>上图是 <code>align</code>，下图是 <code>align-content</code>。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/001e18a6cab2bfe1647af1561d35731bf021db53751290087f03e02dc5336b2c.png" alt="illustration of align-content" title="">
                </div>
                <div class="image-caption">illustration of align-content</div>
            </figure>

<hr>
<p>而 <code>&lt;v-col&gt;</code> 也提供了一个 <code>align-self</code>，不过不知道有什么用。<a href="https://vuetifyjs.com/zh-Hans/api/v-col/" target="_blank" rel="noopener">v-col 文档</a></p>
<h3 id="利用-css-text-align-居中"><a href="#利用-css-text-align-居中" class="headerlink" title="利用 css text-align 居中"></a>利用 css text-align 居中</h3><p>但是以上都没有解决我的需求。我的需求是让下面的 button 能在网格居中，而不是像下图一样靠左。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/f4ab167ab5e2db3f796ed5fe4e1839281ec42acdd197cb73c647aeabde873831.png" alt="错误示范" title="">
                </div>
                <div class="image-caption">错误示范</div>
            </figure>

<p>在 Google “按钮居中 css” – 跳转到 <a href="https://blog.csdn.net/xiasohuai/article/details/80613404" target="_blank" rel="noopener">csdn</a> 找到了一种方法：在按钮的上一层（在这里就是 <code>&lt;v-col&gt;</code>）加一个 css: <code>text-align: center</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">v-col</span> <span class="attr">style</span>=<span class="string">"text-align: center"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/a47ba3433145bf83fbdf8c6b0d71df9e0d4358bc47b227da29ed2c1769b0252c.png" alt="添加 css" title="">
                </div>
                <div class="image-caption">添加 css</div>
            </figure>

<p>但是这个方法并不能使右边的 <code>v-switch</code> 居中（可能只能居中文字？）。</p>
<hr>
<p>顺便一提，Vuetify 中，<code>style=&quot;text-align: center&quot;</code> 可以用 <code>class=&quot;text-center&quot;</code> 简写。</p>
<h3 id="利用-v-row-justify-center"><a href="#利用-v-row-justify-center" class="headerlink" title="利用 v-row justify center"></a>利用 v-row justify center</h3><p>真正的解决方法在 <a href="https://github.com/vuetifyjs/vuetify/issues/7741" target="_blank" rel="noopener">GitHub issue</a> 上找到了：在 <code>&lt;v-col&gt;</code> 内 再添加一层 <code>&lt;v-row justify=&quot;center&quot;&gt;</code>：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="../../images/ca6336fb31de4240d6b3c7d481e38b9ebf25f990d6d6d86f5365db9f7fe3a9be.png" alt="正确示范" title="">
                </div>
                <div class="image-caption">正确示范</div>
            </figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">v-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">v-row</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">v-col</span> <span class="attr">cols</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-row</span> <span class="attr">justify</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-fade-transition</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">v-btn</span></span></span><br><span class="line"><span class="tag">            <span class="attr">color</span>=<span class="string">"warning"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">"showChangePasswordForm=!showChangePasswordForm"</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">            &#123;&#123; showChangePasswordForm ? '不想改了' : '修改密码' &#125;&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">v-btn</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">v-fade-transition</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">v-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">v-col</span> <span class="attr">cols</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-row</span> <span class="attr">justify</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-switch</span></span></span><br><span class="line"><span class="tag">          <span class="attr">label</span>=<span class="string">"订阅邮件推送"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">"userProfile.subscribe_email"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:disabled</span>=<span class="string">"submitting"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">v-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">v-col</span> <span class="attr">cols</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-row</span> <span class="attr">justify</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-btn</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:disabled</span>=<span class="string">"!formValid"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:loading</span>=<span class="string">"submitting"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:color</span>=<span class="string">"submitColor"</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">click</span>=<span class="string">"submit"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">v-icon</span> <span class="attr">v-if</span>=<span class="string">"success"</span>&gt;</span></span><br><span class="line">            mdi-check</span><br><span class="line">          <span class="tag">&lt;/<span class="name">v-icon</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">            更新信息</span><br><span class="line">          <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">v-btn</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">v-col</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">v-row</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">v-container</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="利用-v-row-fill-height-上下居中"><a href="#利用-v-row-fill-height-上下居中" class="headerlink" title="利用 v-row fill-height 上下居中"></a>利用 v-row fill-height 上下居中</h3><p>在阅读 <a href="https://vuetifyjs.com/zh-Hans/components/images/#section-6805683c" target="_blank" rel="noopener">利用 <code>&lt;v-img&gt;</code> 构建一个 Gallery</a> 的代码中注意到，示例代码能让 <code>&lt;v-progress-circular&gt;</code> 上下和左右居中。</p>
<p>使用 <code>v-row</code> 就可以完成左右居中，而必须同时加上 <code>v-row class=&quot;fill-height ma-0&quot;</code> 才可以上下居中。</p>
<h2 id="Vuetify-显示头像"><a href="#Vuetify-显示头像" class="headerlink" title="Vuetify 显示头像"></a>Vuetify 显示头像</h2><p>Vuetify 用一个 <code>v-card</code> 来展示头像、用 <code>v-responsive</code> 控制 card 为正方形、再配上 <code>v-skeleton-loader</code> 作为占位符会比较舒服。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">v-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">v-row</span> <span class="attr">align</span>=<span class="string">"end"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">v-col</span> <span class="attr">cols</span>=<span class="string">"4"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-row</span> <span class="attr">justify</span>=<span class="string">"start"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-card</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-responsive</span> <span class="attr">aspect-ratio</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">v-img</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:src</span>=<span class="string">"userProfile.avatar_url"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">aspect-ratio</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:placeholder</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">v-responsive</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">v-skeleton-loader</span> <span class="attr">type</span>=<span class="string">"image@3"</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--  一个 image 固定 200px，要想 height 变大，就得多几个 image  --&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">v-responsive</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">v-img</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">v-responsive</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-card</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">v-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">v-col</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">v-row</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">v-container</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/vue-card-avatar.gif" alt="效果图" title="">
                </div>
                <div class="image-caption">效果图</div>
            </figure>

<p>额 就是编码 gif 的时候颜色有点失真。</p>
<h2 id="编辑页面弹窗阻止用户退出"><a href="#编辑页面弹窗阻止用户退出" class="headerlink" title="编辑页面弹窗阻止用户退出"></a>编辑页面弹窗阻止用户退出</h2><p>直接 Google 没搜到结果，过几天换了一个关键词搜，居然就搜到了。</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/onbeforeunload" target="_blank" rel="noopener">文档</a></p>
<p>文档说的很清楚了。放在 Vue 里面，如果放弃老浏览器的兼容，直接在 <code>activated</code> 函数加一行即可。另外，退出页面时也记得取消这个函数。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">//...</span></span></span><br><span class="line">  activated() &#123;</span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onbeforeunload = <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">'系统可能不会保存您所做的更改。'</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 其他 activated 触发的事件</span></span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  deactivated() &#123;</span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onbeforeunload = <span class="literal">null</span>;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>顺便一提，由于安全问题，弹窗显示的内容在较新的浏览器中都不允许自定义。</p>
<h2 id="to-和-href"><a href="#to-和-href" class="headerlink" title="to 和 href"></a>to 和 href</h2><p>对于超链接和路由，可以使用 Vue Router 提供的 <code>to</code> 属性，也可以使用 html 提供的 <code>href</code> 属性。<code>to</code> 属性经过编译后也会变成 <code>href</code> 属性。</p>
<p>二者的区别在于：</p>
<ol>
<li><code>to</code> 只能针对 Vue 内的页面，<code>href</code> 对 Vue 内外的页面都可以使用；</li>
<li><code>to</code> 跳转 Vue 内页面不会刷新、不会丢失 Store 数据，而 <code>href</code> 会；</li>
</ol>
<p>二者对不同 url 的表现如下：</p>
<table>
<thead>
<tr>
<th>属性-值</th>
<th><code>to</code></th>
<th><code>href</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>/</code> 开头的页内链接，如 <code>/foo/bar</code></td>
<td>跳转</td>
<td>跳转</td>
</tr>
<tr>
<td>完整 url，如 <code>https://google.com/</code></td>
<td>强行解释为站内链接，错误错误</td>
<td>跳转</td>
</tr>
<tr>
<td>Vue Router 语法，如 <code>{name: &#39;foo&#39;}</code></td>
<td>跳转</td>
<td>不跳转</td>
</tr>
</tbody></table>
<p>所以，结论就是：对站内的链接用 <code>to</code>，对站外的链接用 <code>href</code>。</p>
<p>如果一个 Array（比如侧边栏）包含跳转到站内的 item，也包含跳转到站外的 item 呢？</p>
<p>答案是：混用 <code>to</code> 和 <code>href</code>！</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 部分 html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">v-list-item</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:to</span>=<span class="string">"item.to"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:href</span>=<span class="string">"item.href"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ripple</span></span></span><br><span class="line"><span class="tag">    <span class="attr">active-class</span>=<span class="string">"grey lighten-3"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">v-list-item-action</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-icon</span>&gt;</span>&#123;&#123; item.icon &#125;&#125;<span class="tag">&lt;/<span class="name">v-icon</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">v-list-item-action</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">v-list-item-content</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">v-list-item-title</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class="tag">&lt;/<span class="name">v-list-item-title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">v-list-item-content</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">v-list-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      items: [</span><br><span class="line">        &#123;</span><br><span class="line"><span class="actionscript">          title: <span class="string">'活动'</span>,</span></span><br><span class="line"><span class="actionscript">          icon: <span class="string">'mdi-compass'</span>,</span></span><br><span class="line"><span class="actionscript">          to: <span class="string">'/activity'</span>,</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line"><span class="actionscript">          title: <span class="string">'用户'</span>,</span></span><br><span class="line"><span class="actionscript">          icon: <span class="string">'mdi-account-multiple'</span>,</span></span><br><span class="line"><span class="actionscript">          to: <span class="string">'/user'</span>,</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line"><span class="actionscript">          title: <span class="string">'相册'</span>,</span></span><br><span class="line"><span class="actionscript">          icon: <span class="string">'mdi-image-multiple'</span>,</span></span><br><span class="line"><span class="actionscript">          to: <span class="string">'/gallery'</span>,</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line"><span class="actionscript">          title: <span class="string">'云盘'</span>,</span></span><br><span class="line"><span class="actionscript">          icon: <span class="string">'mdi-cloud'</span>,</span></span><br><span class="line"><span class="actionscript">          href: <span class="string">'https://drive.google.com/'</span>,</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译出来后，每个标签都包含且包含一个 <code>href</code> 属性。</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2021-09-11T12:19:35.107Z" itemprop="dateUpdated">2021-09-11 20:19:35</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="https://blog.lyh543.cn">
            <img src="/img/avatar.png" alt="lyh543">
            lyh543
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.lyh543.cn/front-end/vue-tips/&title=《Vue 学习笔记》 — 小灰灰灰灰的博客&pic=https://blog.lyh543.cn/img/avatar.png" data-title="微博">
          <i class="icon mdi mdi-sina-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.lyh543.cn/front-end/vue-tips/&title=《Vue 学习笔记》 — 小灰灰灰灰的博客&source=" data-title=" QQ">
          <i class="icon mdi mdi-qqchat"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.lyh543.cn/front-end/vue-tips/" data-title=" Facebook">
          <i class="icon mdi mdi-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Vue 学习笔记》 — 小灰灰灰灰的博客&url=https://blog.lyh543.cn/front-end/vue-tips/&via=https://blog.lyh543.cn" data-title=" Twitter">
          <i class="icon mdi mdi-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.lyh543.cn/front-end/vue-tips/" data-title=" Google+">
          <i class="icon mdi mdi-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-lg mdi mdi-share-variant"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/sql/mysql-daily-backup/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon mdi mdi-chevron-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">MySQL 每日备份</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/back-end/http-status-code/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-lg icon-pl mdi mdi-chevron-right"></i></div>
        <h4 class="title">HTTP 状态码</h4>
      </a>
    </div>
  
</nav>



    

















<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var id = location.pathname
        if (location.pathname.length > 50) {
          id = location.pathname.replace(/\/\d+\/\d+\/\d+\//, '').replace('/', '').substring(0, 50)
        }
        const gitalk = new Gitalk({
          clientID: 'ec7daa4e047c3c30570d',
          clientSecret: '025a9e40a1d101f28fd1a945d286a819e9fa1c3d',
          repo: 'lyh543.github.io',
          owner: 'lyh543',
          admin: ['lyh543'],
          id: id,      // Ensure uniqueness and length less than 50
          title: document.title.split('|')[0],
          distractionFreeMode: false  // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    </script>
</section>




</article>



</div>

        <footer class="footer">
    <div class="top">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg mdi mdi-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>lyh543 &copy; 2019 - 2021</span>
            <span>
                
                <a href="http://www.miitbeian.gov.cn/" target="_blank">蜀ICP备19034464号</a><br>
                
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg mdi mdi-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.lyh543.cn/front-end/vue-tips/&title=《Vue 学习笔记》 — 小灰灰灰灰的博客&pic=https://blog.lyh543.cn/img/avatar.png" data-title="微博">
          <i class="icon mdi mdi-sina-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.lyh543.cn/front-end/vue-tips/&title=《Vue 学习笔记》 — 小灰灰灰灰的博客&source=" data-title=" QQ">
          <i class="icon mdi mdi-qqchat"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.lyh543.cn/front-end/vue-tips/" data-title=" Facebook">
          <i class="icon mdi mdi-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Vue 学习笔记》 — 小灰灰灰灰的博客&url=https://blog.lyh543.cn/front-end/vue-tips/&via=https://blog.lyh543.cn" data-title=" Twitter">
          <i class="icon mdi mdi-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.lyh543.cn/front-end/vue-tips/" data-title=" Google+">
          <i class="icon mdi mdi-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACuCAAAAACKZ2kyAAABxklEQVR42u3aS67jMAwEwNz/0hlgtkGcbtFSgofSyvBHLntBiKQej3g8/4/XM9fnX69eP3vbwMXFHXOfl+MdN5nn9dnr42sDLi7uee518MoRc/oHGy4u7o9xk8/IZ8DFxf0b3PbMWljExcX9HW6S/OQpSlL42J6r4eLiDrhtwXTH8cb6Li4ubsl9lmNSYE1KJx9mxsXFPcLNp84bq3kitJYO4eLinuHOiZNySZII4eLifpe7VpJYWwYlyVVdNsXFxR1z2y0UbWE0T6KiN+Li4h7hJkuWPHi1JdfR78DFxd3MbdOe9gOuz9c/CxcXdzO3XV4kL1gLiMnvw8XFPcNN2hh5A7VNctpfgIuLe4bbBpFJU6RtpuLi4n6X226xmpdRkqD2tpWCi4u7mVvctPTKPCnKF1i4uLi7uZNtE21BZJIa4eLinufmbZW25PoYD1xc3G9x87G2hmpDW5E/4eLibuC2AaXdbNGWVvOruLi4u7lt2TT/7rV06MNVXFzcg9zJtq21hVEeNG/Iw3Bxcbdx2/Qmv1o8hYuL+8PctbZKHhDf2nBxcQ9yb5goaYfE99xQFsHFxR1w1wqmSVArtlYE4Q8XF/cI9x94gpWMnsgTlwAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>










</body>
</html>
