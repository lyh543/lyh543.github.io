<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://blog.lyh543.cn/</id>
    <title>小灰灰灰灰的博客</title>
    <updated>2025-09-18T03:42:16.185Z</updated>
    <generator>https://github.com/webmasterish/vuepress-plugin-feed</generator>
    <link rel="alternate" href="https://blog.lyh543.cn/"/>
    <link rel="self" href="https://blog.lyh543.cn/feed.atom"/>
    <subtitle>正在开发中的 Material Design 风格 Vuepress</subtitle>
    <entry>
        <title type="html"><![CDATA[两个 FRP 客户端共享服务器上的同一个 HTTPS 443 端口]]></title>
        <id>https://blog.lyh543.cn/posts/2025-09-14-two-frp-clients-share-same-https-port-on-server.html</id>
        <link href="https://blog.lyh543.cn/posts/2025-09-14-two-frp-clients-share-same-https-port-on-server.html">
        </link>
        <updated>2025-09-18T11:09:32.000Z</updated>
        <summary type="html"><![CDATA[如果你用过 frp，应该知道可以把家里服务器的 80 和 443 端口映射到公网服务器的 80 和 443 端口，再配合 Caddy / Nginx 服务，就可以用域名访问家里服务器上的网站了。

这个方案的优点有：
家里服务器不需要有公网 IP，也不需要暴露 80 和 443 端口（frpc 每次会使用随机端口连接到服务器），因此也没有被运营商封端口的风险
后续 HTTP/HTTPS ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[Python 内存占用分析]]></title>
        <id>https://blog.lyh543.cn/posts/2025-04-19-profile-python-memory-usage.html</id>
        <link href="https://blog.lyh543.cn/posts/2025-04-19-profile-python-memory-usage.html">
        </link>
        <updated>2025-04-19T06:45:00.000Z</updated>
        <summary type="html"><![CDATA[最近公司的 Python 后端服务内存占用偏高，所以花了一些时间分析后端的内存占用。也梳理了一些比较好用的工具和分析方法。

在我们的场景下，我们发现内存占用异常是在服务运行了一段时间以后，所以下面的工具链更偏向于分析应用运行时的内存占用长期持续增长趋势。

tracemalloc

提到 Python 内存分析，一定会有 tracemalloc，毕竟是内置的内存追踪工具。

但是实 ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用 SeaTunnel 将数据从 PostgreSQL 同步到 Doris]]></title>
        <id>https://blog.lyh543.cn/posts/2025-03-09-seatunnel.html</id>
        <link href="https://blog.lyh543.cn/posts/2025-03-09-seatunnel.html">
        </link>
        <updated>2025-03-09T11:02:56.000Z</updated>
        <summary type="html"><![CDATA[最近有个需求是把 PostgreSQL（百万行数据规模）的数据准实时同步到 Doris。问了一圈 ChatGPT，ChatGPT 有提到 Flink 和 Apache SeaTunnel。Flink 是鼎鼎有名的 ETL 工具，而 SeaTunnel 之前没听说过。多问了 ChatGPT 几轮，了解到 SeaTunnel 是一个轻量化、上手快的工具。体验了一下，果然非常省事，开发效率很高，对于 ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用 Pyenv 和 Pipenv 配置 Python 开发环境]]></title>
        <id>https://blog.lyh543.cn/posts/2025-01-18-setup-python-dev-environment-with-pyenv-and-pipenv.html</id>
        <link href="https://blog.lyh543.cn/posts/2025-01-18-setup-python-dev-environment-with-pyenv-and-pipenv.html">
        </link>
        <updated>2025-01-18T15:41:43.000Z</updated>
        <summary type="html"><![CDATA[Linux 和 MacOS 系统都自带了 Python，对于初学者来说是件好事，不用安装也能直接使用。但是在工程开发上往往需要在不同的项目使用不同的 Python 版本，相同的 Python 下使用不同的依赖。

在最新的 Ubuntu、Manjaro 等系统中直接使用 pip install 安装依赖时，会提示可能会破坏系统依赖（[PEP 668](https://peps.python.o ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[采集 Tiktok 商家数据]]></title>
        <id>https://blog.lyh543.cn/posts/2024-10-25-collect-tiktok-merchant-data.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-10-25-collect-tiktok-merchant-data.html">
        </link>
        <updated>2024-10-25T16:17:22.000Z</updated>
        <summary type="html"><![CDATA[前几天和原来的同学聊天，同学之前一直都是做跨境电商的，最近开始做起了Tiktok。他之前没做过兴趣电商，也不了解这个怎么做，就问问我能不能帮忙在上面弄点数据下来，他来研究研究。正好我也想看看TK的系统是怎么设计的，一拍即合，我就接下了这个活。大概的需求就是通过商家后台去爬取一些达人客户还有订单的数据和自动上架一些产品。

调研

认证

TK的认证和所有的HTTP服务都一样，都是采用 ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[降低 CPU 功耗]]></title>
        <id>https://blog.lyh543.cn/posts/2024-08-24-reduce-cpu-power.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-08-24-reduce-cpu-power.html">
        </link>
        <updated>2024-08-24T12:20:01.000Z</updated>
        <summary type="html"><![CDATA[前段时间买了国产的 Ryzen 7840H 迷你主机 24 小时开着当服务器，它的整机待机功耗也就 10-15W，比动辄 100W 的桌面端省电不少。但据说桌面端 CPU 也可以通过调节 BIOS 降低待机功耗，毕竟桌面端和移动端是同一个架构，只是出厂调节不一样。所以今天浅浅尝试了一下降低台式的功耗。

省流：通过调节 Curve Optimizer，低负载下 CPU 封装功耗从 65w 降到了 ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[《深入剖析 Kubernetes》 笔记 - 网络]]></title>
        <id>https://blog.lyh543.cn/posts/2024-05-12-deep-dive-into-kubernetes-note/3-network.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-05-12-deep-dive-into-kubernetes-note/3-network.html">
        </link>
        <updated>2024-06-30T19:57:49.000Z</updated>
        <summary type="html"><![CDATA[本篇是《深入剖析 Kubernetes》 的读书笔记，作者为张磊老师。

本章讲述了 Kubernetes 的网络模型，会相较于 Pod、存储章更难一些，且需要有一定的计算机网络的知识作为前置。

单机容器网络架构

在单机容器网络架构中，容器和宿主机、容器和容器之间的通信，需要借助两样东西，一是网桥（Bridge），二是虚拟网卡（Veth Pair, Vet ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[四层负载均衡漫谈（转载）]]></title>
        <id>https://blog.lyh543.cn/posts/2024-05-22-layer-4-load-balance.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-05-22-layer-4-load-balance.html">
        </link>
        <updated>2024-05-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[转载自 四层负载均衡漫谈 | 卡瓦邦噶！。一篇既有广度也有深度，讲述过程深入浅出的好文。

对于四层负载均衡，我一直只是作为一个使用者，把它当作一个简单 TCP 层的反向代理来使用。但是随着在项目中使用的越来越多，我发现我对这个技术存在很多误解！

比如，我一直以为这是一个它是一个完整的 TCP 实现，和外部的客 ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[《深入剖析 Kubernetes》 笔记 - 调度、容器运行时接口、监控、日志]]></title>
        <id>https://blog.lyh543.cn/posts/2024-05-12-deep-dive-into-kubernetes-note/4-scheduling-cri-monitor-log.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-05-12-deep-dive-into-kubernetes-note/4-scheduling-cri-monitor-log.html">
        </link>
        <updated>2024-05-19T19:57:49.000Z</updated>
        <summary type="html"><![CDATA[本篇是《深入剖析 Kubernetes》 的读书笔记，作者为张磊老师。

这几个主题需要介绍的部分都比较少，所以放在一篇博客里了。

调度

资源模型和管理

Kubernetes 里可以给容器指定分配 CPU 和内存资源的多少。

resources:
  requests:
    memory: "64Mi"
    cpu: "500m"
  limits:
 ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[《深入剖析 Kubernetes》 笔记 - 云原生]]></title>
        <id>https://blog.lyh543.cn/posts/2024-05-12-deep-dive-into-kubernetes-note/5-cloud-native.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-05-12-deep-dive-into-kubernetes-note/5-cloud-native.html">
        </link>
        <updated>2024-05-12T19:58:49.000Z</updated>
        <summary type="html"><![CDATA[虽然现在提到云原生，大家就会想到 Kubernetes，但是云原生并不仅仅是 Kubernetes。云原生是一种基础设施架构的设计思想和理念，而 Kubernetes 是云原生这张蓝图上的一个组件。

> 云原生的本质是一系列最佳实践的结合。云原生为实践者指定了一条低心智负担的，能够以可扩展、可复制的方式，最大化地利用云的能力发挥云的价值和最佳路径。
> **云原生并不指代某种开源设计和技术， ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用 Grafana 监控 Kubernetes]]></title>
        <id>https://blog.lyh543.cn/posts/2024-04-27-use-grafana-to-monitor-on-kubernetes.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-04-27-use-grafana-to-monitor-on-kubernetes.html">
        </link>
        <updated>2024-04-27T20:52:59.000Z</updated>
        <summary type="html"><![CDATA[Grafana 收集 K8s 指标的拓扑图

上图是 Grafana 收集 Kubernetes 指标的拓扑图。

cAdvisor 和 [kube-state-metrics](https://github.com/kuber ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[《深入剖析 Kubernetes》 笔记 - 存储]]></title>
        <id>https://blog.lyh543.cn/posts/2024-05-12-deep-dive-into-kubernetes-note/2-storage.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-05-12-deep-dive-into-kubernetes-note/2-storage.html">
        </link>
        <updated>2024-04-21T19:56:49.000Z</updated>
        <summary type="html"><![CDATA[本篇是《深入剖析 Kubernetes》 的读书笔记，作者为张磊老师。

PersistentVolumeClaim & PersistentVolume

Pod 一章讲过了这两个概念，这里再复制一遍。

> Pod -> PVC -> PV
>
> PVC 是定义接口（大小、AccessModes 等），PV 是实现（实际存储位置、认证信息等）。而 Pod 只需要在配置里面把 PVC ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[不同电子设备上的阅读体验]]></title>
        <id>https://blog.lyh543.cn/posts/2024-04-09-reading-experience-on-diverse-digital-devices.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-04-09-reading-experience-on-diverse-digital-devices.html">
        </link>
        <updated>2024-04-09T12:59:00.000Z</updated>
        <summary type="html"><![CDATA[有次在北京大兴机场候机，在机场里的国家图书馆分馆借了本书看，觉得偶尔看看书也挺不错，捡回了这个习惯。随着我对自己的阅读需求和体验了解得更加清晰，我阅读的设备也从 Kindle 变到平板电脑、电脑显示器。有句话叫差生文具多，我就先对号入座了。

阅读设备

纸质书

不得不说，阅读纸质书的感觉很好，比如书本印刷的味道，还有翻书时的刷刷声。不过纸质书的收纳、整理和搬运就比较蛋疼了，高 ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[《深入剖析 Kubernetes》 笔记 - 容器和 Pod]]></title>
        <id>https://blog.lyh543.cn/posts/2024-05-12-deep-dive-into-kubernetes-note/1-pod.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-05-12-deep-dive-into-kubernetes-note/1-pod.html">
        </link>
        <updated>2024-04-02T19:55:49.000Z</updated>
        <summary type="html"><![CDATA[本篇是《深入剖析 Kubernetes》 的读书笔记，作者为张磊老师。

第五章《Kubernetes 编排原理》讲的内容都还比较实用，基本上都是在使用 Kubernetes 中就会接触到的概念和功能。

Kubectl Cheatsheet

创建/更新一个 yaml 文件：kubectl apply -f xxx.yaml
查询资源列表：kubectl get pods， ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[优化 AOSP 流畅度一记]]></title>
        <id>https://blog.lyh543.cn/posts/2024-03-30-keep-aosp-smooth.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-03-30-keep-aosp-smooth.html">
        </link>
        <updated>2024-03-23T03:59:00.000Z</updated>
        <summary type="html"><![CDATA[本文基于笔者使用安卓设备的经验而来，如有理论错误请指正。

为什么要优化

大学的时候，刷完 AOSP 会装一堆 Magisk 模块、XPosed 插件。现在养老了，懒得折腾了，只要不影响到我的体验。不过最近的体验确实不太好，表现在 12 GB 内存都不够用、杀后台、卡顿；另外手机发热、耗电很严重，几乎一天 24 小时都在发热，晚上不接电源睡一觉也能掉 80% 的电，平时的续航也只有三到 ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ubuntu Core 如何在 IoT 设备上实现 OTA]]></title>
        <id>https://blog.lyh543.cn/posts/2024-03-03-ota-design-of-ubuntu-core.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-03-03-ota-design-of-ubuntu-core.html">
        </link>
        <updated>2024-03-03T21:30:45.000Z</updated>
        <summary type="html"><![CDATA[白皮书入口 | 下载链接

OTA 的目标

OTA 的场景，和边 ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[从 EFI Shell 引导系统（转载）]]></title>
        <id>https://blog.lyh543.cn/posts/2024-02-29-boot-from-an-efi-shell.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-02-29-boot-from-an-efi-shell.html">
        </link>
        <updated>2024-02-28T17:29:16.000Z</updated>
        <summary type="html"><![CDATA[本文转载自 halfa 的博文 Boot from an EFI Shell，并进行了翻译。

今天启动 PVE 集群上的几个虚拟机的时候，出现了下图的报错。

![启动错误](/images/boot-error.png ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[为 TypeScript 项目的 JS 依赖补充类型]]></title>
        <id>https://blog.lyh543.cn/posts/2023-12-03-typescript-add-custom-typings.html</id>
        <link href="https://blog.lyh543.cn/posts/2023-12-03-typescript-add-custom-typings.html">
        </link>
        <updated>2024-01-08T23:12:48.000Z</updated>
        <summary type="html"><![CDATA[本文使用的 TypeScript 版本为 5.3.2。示例代码已上传到 GitHub。

在 TypeScript 项目中难免会用到一些 JS 库，TypeScript 官方支持使用 @types/ 的同名库来作为 JS 库的类型定义。如果 @types/ ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[调试 Flask 服务超时问题]]></title>
        <id>https://blog.lyh543.cn/posts/2024-01-06-debug-on-flask-memory-leak.html</id>
        <link href="https://blog.lyh543.cn/posts/2024-01-06-debug-on-flask-memory-leak.html">
        </link>
        <updated>2024-01-06T06:24:00.000Z</updated>
        <summary type="html"><![CDATA[最近在项目里遇到个 Flask 内存泄漏的问题，前前后后 debug 了几天。

起因是有人报错，发现某个 Flask 服务出现了请求超过 3 分钟还没有返回结果。查服务日志有很多的 WORKER TIMEOUT，是 gunicorn 的进程超时后 kill 的机制。但是日志只能看到超时的进程 id，看不到是哪个请求超时了。正好这个服务上有一个比较耗时的 API（下称 API A），平均耗时在 ...]]></summary>
    </entry>
    <entry>
        <title type="html"><![CDATA[开始做 iOS 和安卓双机党]]></title>
        <id>https://blog.lyh543.cn/posts/2023-12-02-start-using-ios-and-android-together.html</id>
        <link href="https://blog.lyh543.cn/posts/2023-12-02-start-using-ios-and-android-together.html">
        </link>
        <updated>2023-12-02T21:29:22.000Z</updated>
        <summary type="html"><![CDATA[最近买了第一部 iPhone，开始做安卓 + iOS 双持党。体验了半个月以后，觉得 iOS 和安卓各有优劣，双机党是个不错的选择。

为什么要做双机党

从准备买到下单 iPhone 只间隔了几个小时，很像是一次冲动消费。但其实我在之前很长一段时间都在考虑，用什么手机才能获得更好的体验。

在疫情那段时间（20 年初）我给自己的小米 MIX 2S 刷了类原生，从此对类原生的流畅不掉帧的动画 ...]]></summary>
    </entry>
</feed>