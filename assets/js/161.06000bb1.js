(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{562:function(a,e,o){"use strict";o.r(e);var t=o(3),d=Object(t.a)({},(function(){var a=this,e=a.$createElement,o=a._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[o("p",[a._v("偶然在群里看到了在服务上搭建的 Markdown 编辑器，叫 CodiMD，也想自己整一个。于是就找官方文档来安装。")]),a._v(" "),o("blockquote",[o("p",[a._v("项目链接：https://github.com/hackmdio/codimd\nCodiMD 文档：https://hackmd.io/c/codimd-documentation/%2Fs%2Fcodimd-docker-deployment")])]),a._v(" "),o("h2",{attrs:{id:"安装-docker-及-docker-compose"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker-及-docker-compose"}},[a._v("#")]),a._v(" 安装 Docker 及 Docker Compose")]),a._v(" "),o("p",[a._v("这两个部分已被迁移到一篇专门讲 Docker 的 "),o("a",{attrs:{href:"../docker#%E5%AE%89%E8%A3%85-Docker"}},[a._v("博客")]),a._v(" 中。")]),a._v(" "),o("h2",{attrs:{id:"安装-codimd"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#安装-codimd"}},[a._v("#")]),a._v(" 安装 CodiMD")]),a._v(" "),o("p",[a._v("现在准备工作做好了，就准备安装 CodiMD 了。")]),a._v(" "),o("p",[a._v("下面一份从 "),o("a",{attrs:{href:"https://hackmd.io/c/codimd-documentation/%2Fs%2Fcodimd-docker-deployment",target:"_blank",rel:"noopener noreferrer"}},[a._v("CodiMD 文档"),o("OutboundLink")],1),a._v(" 获得的配置文件。复制下面的代码，并在任意处保存为 "),o("code",[a._v("docker-compose.yml")]),a._v("。")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v('version: "3"\nservices:\n  database:\n    image: postgres:11.5\n    environment:\n      - POSTGRES_USER=codimd\n      - POSTGRES_PASSWORD=change_password\n      - POSTGRES_DB=codimd\n    volumes:\n      - "database-data:/var/lib/postgresql/data"\n    restart: always\n  codimd:\n    image: nabo.codimd.dev/hackmdio/hackmd:1.4.1\n    environment:\n      - CMD_DB_URL=postgres://codimd:change_password@database/codimd\n      - CMD_USECDN=false\n    depends_on:\n      - database\n    ports:\n      - "3000:3000"\n    volumes:\n      - upload-data:/home/hackmd/app/public/uploads\n    restart: always\nvolumes:\n  database-data: {}\n  upload-data: {}\n')])])]),o("blockquote",[o("p",[a._v("这里的原理是建立了两个容器（container），分别名为 "),o("code",[a._v("database")]),a._v(" 和 "),o("code",[a._v("codimd")]),a._v("。他们之后就是他们的设置。"),o("br"),a._v(" "),o("code",[a._v("database")]),a._v(" 先通过 6-7 行建立数据库的账户，"),o("code",[a._v("codimd")]),a._v(" 再通过 15 行 "),o("code",[a._v("CMD_DB_URL=postgres://codimd:change_password@database/codimd")]),a._v(" 登录 "),o("code",[a._v("database")]),a._v(" 进行数据交换。可以修改账户密码，但是记得 6-7 行和 15 行要同时改。")])]),a._v(" "),o("p",[a._v("最后在文件所在目录下，一键下载配置：")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("docker-compose up -d\n")])])]),o("p",[a._v("然后要等待漫长的镜像下载。")]),a._v(" "),o("h2",{attrs:{id:"可能错误"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#可能错误"}},[a._v("#")]),a._v(" 可能错误")]),a._v(" "),o("h3",{attrs:{id:"password-authentication-failed-for-user"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#password-authentication-failed-for-user"}},[a._v("#")]),a._v(" password authentication failed for user")]),a._v(" "),o("p",[a._v("首先检查 "),o("code",[a._v("docker-compose.yml")]),a._v(" 的两个容器的 6-7、15 是否对应。")]),a._v(" "),o("p",[a._v("如果是对的，但是仍然报错，可能需要先删除容器，再重新建立容器：")]),a._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[a._v("docker-compose down -v\ndocker-compose up -d\n")])])])])}),[],!1,null,null,null);e.default=d.exports}}]);