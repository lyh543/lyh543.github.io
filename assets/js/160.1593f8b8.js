(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{559:function(t,e,s){"use strict";s.r(e);var a=s(3),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("参考链接：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://ksmx.me/letsencrypt-ssl-https/",target:"_blank",rel:"noopener noreferrer"}},[t._v("LET'S ENCRYPT 给网站加 HTTPS 完全指南"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.pbeta.me/docker-nextcloud-ssl/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 搭建私有云 Nextcloud"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://blog.csdn.net/wzy_1988/article/details/8549290",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx强制使用https访问(http跳转到https)"),s("OutboundLink")],1)])])]),t._v(" "),s("p",[s("s",[t._v("哪个男孩不想要自己的网站全站 https 呢")])]),t._v(" "),s("p",[t._v("现在基本都要求各网站使用 "),s("code",[t._v("HTTPS")]),t._v(" 、"),s("code",[t._v("SSL")]),t._v(" 之类的。于是准备给自己的博客和网站也整一个。")]),t._v(" "),s("p",[t._v("这篇博客就简单说一下，如何在自己的网站上使用 https。")]),t._v(" "),s("p",[t._v("请把本文中出现的所有 "),s("code",[t._v("example.com")]),t._v(" 替换为你的域名，将 "),s("code",[t._v("yourip")]),t._v(" 替换为你的服务器的 ip。")]),t._v(" "),s("p",[t._v("本文假定你清楚哪些网站是架在服务器上，并且这些网址的域名解析记录已以 "),s("code",[t._v("A")]),t._v(" 的形式指向你的服务器。")]),t._v(" "),s("h2",{attrs:{id:"https、ssl、tls-相关术语介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#https、ssl、tls-相关术语介绍"}},[t._v("#")]),t._v(" HTTPS、SSL、TLS 相关术语介绍")]),t._v(" "),s("p",[t._v("参考"),s("a",{attrs:{href:"https://blog.csdn.net/enweitech/article/details/81781405",target:"_blank",rel:"noopener noreferrer"}},[t._v("这篇博客"),s("OutboundLink")],1),t._v("，可以知道 "),s("code",[t._v("HTTPS")]),t._v("、"),s("code",[t._v("SSL")]),t._v("、"),s("code",[t._v("TLS")]),t._v(" 的定义和区别。")]),t._v(" "),s("p",[t._v("简单来说，")]),t._v(" "),s("ul",[s("li",[t._v("SSL 是指安全套接字层，简而言之，它是一项标准技术，可确保互联网连接安全；")]),t._v(" "),s("li",[t._v("TLS（传输层安全）是更为安全的升级版 SSL。由于 SSL 这一术语更为常用，因此我们仍然可以将我们的 TLS 安全证书称作 SSL。但当您从赛门铁克购买 SSL 时，您真正购买的是最新的 TLS 证书；")]),t._v(" "),s("li",[t._v("TLS/SSL是一种加密通道的规范；")]),t._v(" "),s("li",[t._v("HTTPS 实际上就是 HTTP over SSL")])]),t._v(" "),s("p",[t._v("下面就开始正式内容。")]),t._v(" "),s("h2",{attrs:{id:"关闭-apache"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关闭-apache"}},[t._v("#")]),t._v(" 关闭 Apache")]),t._v(" "),s("p",[t._v("Apache 和 Nginx 都属于 Web 服务器。二者可以同时安装，但是（一般）不能同时运行，因为对于 "),s("code",[t._v("http")]),t._v(" 的 "),s("code",[t._v("80")]),t._v(" 端口只能由一个软件监听，而 "),s("code",[t._v("https")]),t._v(" 的 "),s("code",[t._v("443")]),t._v(" 同理。")]),t._v(" "),s("p",[t._v("由于本篇教材使用的是 Nginx，如果系统运行的是 Apache，则需要关闭。")]),t._v(" "),s("p",[t._v("如何查看自己的电脑是否运行的是 Apache 呢？")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("lsof -i:80\n")])])]),s("p",[t._v("如果看到了 "),s("code",[t._v("httpd")]),t._v(" 或 "),s("code",[t._v("apache")]),t._v(" 等字样，就说明你的服务器正运行了 Apache。")]),t._v(" "),s("p",[t._v("如果运行了 Apache，则需要关闭 Apache。这里请读者自己百度完成。")]),t._v(" "),s("p",[t._v("安装 Nginx 可以采用直接在系统上安装和使用 Docker 安装在容器里。")]),t._v(" "),s("h2",{attrs:{id:"在系统上安装-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在系统上安装-nginx"}},[t._v("#")]),t._v(" 在系统上安装 Nginx")]),t._v(" "),s("p",[t._v("对于 CentOS 7，安装并运行 nginx 的命令为：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx\nsystemctl start nginx\n")])])]),s("p",[t._v("停止 nginx 的命令为："),s("code",[t._v("systemctl stop nginx")]),s("br"),t._v("\n重启 nginx 的命令为："),s("code",[t._v("systemctl restart nginx")])]),t._v(" "),s("h2",{attrs:{id:"测试-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试-nginx"}},[t._v("#")]),t._v(" 测试 Nginx")]),t._v(" "),s("p",[t._v("在浏览器地址栏输入你的服务器 IP 并访问，如果看到了欢迎界面，则说明 Nginx 正常。")]),t._v(" "),s("h2",{attrs:{id:"申请-ssl-证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#申请-ssl-证书"}},[t._v("#")]),t._v(" 申请 SSL 证书")]),t._v(" "),s("p",[t._v("参考："),s("a",{attrs:{href:"https://www.pbeta.me/docker-nextcloud-ssl/#ssl",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 搭建私有云 Nextcloud -- 申请 SSL 证书"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("blockquote",[s("p",[t._v("2020.4.28 更新："),s("strong",[t._v("如果需要自动定期更新证书的")]),t._v("，请使用 "),s("a",{attrs:{href:"https://github.com/ywdblog/certbot-letencrypt-wildcardcertificates-alydns-au",target:"_blank",rel:"noopener noreferrer"}},[t._v("Certbot 自动脚本"),s("OutboundLink")],1),s("strong",[t._v("而不是以下讲的方法")]),t._v("。自动脚本不适用于中文域名。")])]),t._v(" "),s("p",[t._v("在服务器上下载 "),s("code",[t._v("autocert")]),t._v(" 软件并给予可执行权限：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://dl.eff.org/certbot-auto\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" a+x certbot-auto\n")])])]),s("p",[t._v("然后一行命令（记得替换两个 "),s("code",[t._v("example.com")]),t._v("）：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('./certbot-auto certonly -d "example.com" -d "*.example.com" --manual --preferred-challenges dns-01 --server https://acme-v02.api.letsencrypt.org/directory\n')])])]),s("p",[t._v("这样可以申请到 "),s("code",[t._v("example.com")]),t._v(" 及其下的所有子域名的证书。还可以继续增加域名（即使是别的域名）："),s("code",[t._v('-d "another.xyz"')]),t._v("。")]),t._v(" "),s("p",[t._v("注意：可以对中文域名申请 HTTPS 证书，但是域名不能使用中文，而应该是使用 "),s("code",[t._v("punycode")]),t._v(" 转码后的结果，以 "),s("code",[t._v("xn--")]),t._v(" 开头（也可以在 Chrome 中输入中文域名，复制出来的完整域名就是转码后的结果）。下文配置 Nginx 也应该使用 "),s("code",[t._v("punycode")]),t._v(" 编码。")]),t._v(" "),s("p",[t._v("过程中需要：")]),t._v(" "),s("ol",[s("li",[t._v("输入你的邮箱（可选）")]),t._v(" "),s("li",[t._v("是否同意条款（那必须得同意）")]),t._v(" "),s("li",[t._v("是否加入邮件列表（看你）")]),t._v(" "),s("li",[t._v("是否同意 IP 被公示（同意）")]),t._v(" "),s("li",[t._v("往你的域名加入一段 TXT（需要到对应域名的解析页面添加 TXT 解析，照着做就可以了），然后回车继续。这是在验证这确实是你的网站。")])]),t._v(" "),s("p",[t._v("之后如果看到了 "),s("code",[t._v("Congratulations")]),t._v("，就是成功了。")]),t._v(" "),s("p",[t._v("在完成这一步以后，文件夹 "),s("code",[t._v("/etc/letsencrypt/live/example.com")]),t._v(" 会有以下文件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# ls /etc/letsencrypt/live/example.com\ncert.pem  chain.pem  fullchain.pem  privkey.pem  README\n")])])]),s("p",[t._v("这四个都是证书文件，请妥善保管。具体哪个是什么，可以先不追究这些细节。")]),t._v(" "),s("h2",{attrs:{id:"域名解析添加-caa-记录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#域名解析添加-caa-记录"}},[t._v("#")]),t._v(" 域名解析添加 CAA 记录")]),t._v(" "),s("p",[t._v("接下来是可选、但是推荐的步骤。")]),t._v(" "),s("p",[s("code",[t._v("letsencrpyt.org")]),t._v(" 签发了你的证书，随后会公布到全网。")]),t._v(" "),s("p",[t._v("但是有个问题，如果别的人也伪造了你的网站的证书（HTTPS 劫持），该如何保证你的网站使用 "),s("code",[t._v("letsencrypt.org")]),t._v(" 的而不是他的证书呢？")]),t._v(" "),s("p",[t._v("我们可以在 DNS 解析中添加 "),s("code",[t._v("CAA")]),t._v(" 记录，当别人访问你的网站时，你告诉他们，你的证书是 "),s("code",[t._v("letsencrypt.org")]),t._v(" 签发的，就行了。")]),t._v(" "),s("p",[t._v("添加的方法可看 "),s("a",{attrs:{href:"https://help.aliyun.com/document_detail/65537.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用CAA记录防止域名证书劫持_最佳实践_云解析DNS-阿里云"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("顺便，如果你想把你的某域名作为 GitHub Pages 的别名（如这篇博客），需要在 pages 的仓库设置 "),s("code",[t._v("CNAME")]),t._v("。如果需要 "),s("code",[t._v("https")]),t._v("，还需要添加 "),s("code",[t._v("CAA")]),t._v(" 记录指向 "),s("code",[t._v("letsencrypt.org")]),t._v("，否则可能无法启用 "),s("code",[t._v("https")]),t._v("。")]),t._v(" "),s("h2",{attrs:{id:"对全站加载-ssl-证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对全站加载-ssl-证书"}},[t._v("#")]),t._v(" 对全站加载 SSL 证书")]),t._v(" "),s("p",[t._v("接下来我们要用 Nginx 做两件事：")]),t._v(" "),s("ul",[s("li",[t._v("将 "),s("code",[t._v("https://*.example.com/")]),t._v(" 加载 SSL 证书")]),t._v(" "),s("li",[t._v("将 "),s("code",[t._v("http://*.example.com/")]),t._v(" 转发到 "),s("code",[t._v("https://*.example.com/")])])]),t._v(" "),s("p",[t._v("我们要通过配置 nginx 服务来完成这一点。")]),t._v(" "),s("blockquote",[s("p",[t._v("如果你已经搭建过 nginx 服务，请直接参考修改 nginx 配置文件即可。")])]),t._v(" "),s("p",[t._v("我们在 "),s("code",[t._v("/etc/nginx/conf.d/")]),t._v(" 新建一个 "),s("code",[t._v("https.conf")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nano")]),t._v(" /etc/nginx/conf.d/https.conf\n")])])]),s("p",[t._v("然后添加以下内容）同样注意修改 3 个 "),s("code",[t._v("example.com")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-matlab extra-class"},[s("pre",{pre:!0,attrs:{class:"language-matlab"}},[s("code",[t._v("server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" default_server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("301")]),t._v(" https"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("$host$request_uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nserver "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v(" ssl http2 default_server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    ssl_certificate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("letsencrypt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("live"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fullchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_certificate_key "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("letsencrypt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("live"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("privkey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_trusted_certificate  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("letsencrypt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("live"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("chain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_protocols TLSv1 TLSv1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" TLSv1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_ciphers ECDHE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("RSA"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("AES128"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("GCM"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("SHA256"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("ECDHE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("ECDH"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("AES"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("HIGH"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("!")]),t._v("NULL"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("!")]),t._v("aNULL"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("!")]),t._v("MD5"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("!")]),t._v("ADH"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("!")]),t._v("RC4"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("!")]),t._v("DH"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("!")]),t._v("DHE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_prefer_server_ciphers on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_session_cache shared"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("SSL"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_session_timeout "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    add_header Strict"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Transport"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v('Security "max'),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("age"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("63072000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" includeSubdomains"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(' preload"'),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("第三行的 "),s("code",[t._v(".example.com")]),t._v(" 是 Nginx "),s("a",{attrs:{href:"http://nginx.org/en/docs/http/server_names.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方"),s("OutboundLink")],1),t._v("给出的，可以同时匹配 "),s("code",[t._v("*.example.com")]),t._v(" 和 "),s("code",[t._v("example.com")]),t._v(" 的形式。好评！")]),t._v(" "),s("p",[t._v("同时从官方链接可以看到 "),s("code",[t._v("server_name")]),t._v(" 可以使用四种方式匹配，这里就提一笔，略过了。")]),t._v(" "),s("p",[s("strong",[t._v("读者需要自行修改第 3、10-13 行中的 "),s("code",[t._v("example.com")])])]),t._v(" "),s("p",[t._v("保存并退出后，（根据自己安装 Nginx 的形式）重启 Nginx。")]),t._v(" "),s("p",[t._v("这之后，访问域名下的任意子域名都可以被强制跳转到 https 并且使用正确的加密。")]),t._v(" "),s("h2",{attrs:{id:"自动定期更新证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自动定期更新证书"}},[t._v("#")]),t._v(" 自动定期更新证书")]),t._v(" "),s("p",[t._v("方法请参考：https://github.com/ywdblog/certbot-letencrypt-wildcardcertificates-alydns-au")]),t._v(" "),s("p",[t._v("由于更新证书也需要进行 DNS Challenge，即在自己的添加 TXT 解析，所以如果前文提到的纯手动添加 TXT 解析的方法，是不能自动定期更新证书的。")]),t._v(" "),s("p",[t._v("只有使用以上方法调用阿里云/腾讯云/华为云/GoDaddy 的 API 添加解析，才可以实现自动更新证书。")]),t._v(" "),s("p",[t._v("另外，经我测试，该方法似乎不支持中文域名（可能是 "),s("code",[t._v("certbot")]),t._v(" 使用的是 "),s("code",[t._v("punycode")]),t._v(" 编码，但阿里云 API 需要的是 "),s("code",[t._v("GBK")]),t._v(" 编码，因此 API 对中文域名不能正常使用）。")])])}),[],!1,null,null,null);e.default=r.exports}}]);