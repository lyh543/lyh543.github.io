(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{458:function(t,a,v){"use strict";v.r(a);var e=v(3),_=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("blockquote",[a("p",[t._v("文章部分内容转自：https://www.colabug.com/2017/0627/228298/")])]),t._v(" "),a("p",[t._v("REST 是一种软件架构风格，如果你们的接口是 REST 接口，那么就可被认为你们的的接口是 RESTful 的，英文名词和形容词的区别。")]),t._v(" "),a("p",[t._v("REST 接口是围绕“资源”展开的，利用 HTTP 的协议。其实 REST 本也可以和 HTTP 无关，但是现在大家普遍的使用 REST 都是依托于HTTP协议。")]),t._v(" "),a("h2",{attrs:{id:"url-语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-语法"}},[t._v("#")]),t._v(" URL 语法")]),t._v(" "),a("p",[t._v("RFC 3986\n定义了通用的URI语法：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("URI = scheme “://” authority “/” path [ “?” query ][ “#” fragment ]\n")])])]),a("ul",[a("li",[a("code",[t._v("scheme")]),t._v(": 指底层用的协议，如 http、https、ftp")]),t._v(" "),a("li",[a("code",[t._v("host")]),t._v(": 服务器的 IP 地址或者域名")]),t._v(" "),a("li",[a("code",[t._v("port")]),t._v(": 端口，http 中默认 80")]),t._v(" "),a("li",[a("code",[t._v("path")]),t._v(": 访问资源的路径，就是咱们各种 web 框架中定义的 route 路由")]),t._v(" "),a("li",[a("code",[t._v("query")]),t._v(": 为发送给服务器的参数")]),t._v(" "),a("li",[a("code",[t._v("fragment")]),t._v(": 锚点，定位到页面的资源，锚点为资源id")])]),t._v(" "),a("h2",{attrs:{id:"restful-api-设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restful-api-设计"}},[t._v("#")]),t._v(" RESTful API 设计")]),t._v(" "),a("h3",{attrs:{id:"资源路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#资源路径"}},[t._v("#")]),t._v(" 资源路径")]),t._v(" "),a("p",[t._v("对于资源的定义，即 URL 的定义，是最重要的；想要设计出优雅的、易读的 REST 接口，其实还是很不容易的。")]),t._v(" "),a("h3",{attrs:{id:"url-中不能有动词"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-中不能有动词"}},[t._v("#")]),t._v(" URL 中不能有动词")]),t._v(" "),a("p",[t._v("在 RESTful 架构中，每个网址代表的是一种资源，所以网址中不能有动词，只能有名词，动词由 HTTP 的 "),a("code",[t._v("get")]),t._v("、"),a("code",[t._v("post")]),t._v("、"),a("code",[t._v("put")]),t._v("、"),a("code",[t._v("delete")]),t._v(" 四种方法来表示。")]),t._v(" "),a("h3",{attrs:{id:"url-结尾不应该包含斜杠"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-结尾不应该包含斜杠"}},[t._v("#")]),t._v(" URL 结尾不应该包含斜杠 "),a("code",[t._v("/")])]),t._v(" "),a("p",[t._v("这是作为 URL 路径中处理中最重要的规则之一，正斜杠 "),a("code",[t._v("/")]),t._v(" 不会增加语义值，且可能导致混淆。REST API 不允许一个尾部的斜杠，不应该将它们包含在提供给客户端的链接的结尾处。")]),t._v(" "),a("p",[t._v("许多Web组件和框架将平等对待以下两个URI：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("http://api.canvas.com/shapes/\nhttp://api.canvas.com/shapes\n")])])]),a("p",[t._v("但是，实际上URI中的每个字符都会计入资源的唯一身份的识别中。")]),t._v(" "),a("p",[t._v("两个不同的 URI 映射到两个不同的资源。如果 URI 不同，那么资源也是如此，反之亦然。因此，REST API 必须生成和传递精确的 URI，不能容忍任何的客户端尝试不精确的资源定位。")]),t._v(" "),a("p",[t._v("有些 API 碰到这种情况，可能设计为让客户端重定向到相应没有尾斜杠的 URI（也有可能会返回301 – 用来资源重定向）。")]),t._v(" "),a("h3",{attrs:{id:"正斜杠分隔符-必须用来指示层级关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#正斜杠分隔符-必须用来指示层级关系"}},[t._v("#")]),t._v(" 正斜杠分隔符 "),a("code",[t._v("/")]),t._v(" 必须用来指示层级关系")]),t._v(" "),a("p",[t._v("url 的路径中的正斜杠 "),a("code",[t._v("/")]),t._v(" 字符用于指示资源之间的层次关系。")]),t._v(" "),a("p",[t._v("例如：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("http://api.user.com/schools/grades/classes/boys\n– 学校中所有的男生\n\nhttp://api.college.com/students/3248234/courses\n– 检索id为3248234的学生学习的所有课程的清单。\n")])])]),a("h3",{attrs:{id:"应该使用连字符-来提高-url-的可读性-而不是使用下划线"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应该使用连字符-来提高-url-的可读性-而不是使用下划线"}},[t._v("#")]),t._v(" 应该使用连字符 "),a("code",[t._v("-")]),t._v(" 来提高 URL 的可读性，而不是使用下划线 "),a("code",[t._v("_")])]),t._v(" "),a("p",[t._v("为了使 URL 容易让人们理解，请使用连字符 "),a("code",[t._v("_")]),t._v(" 字符来提高长路径中名称的可读性。")]),t._v(" "),a("p",[t._v("一些文本查看器为了区分强调 URI，常常会在 URI 下加上下划线。这样下划线 "),a("code",[t._v("_")]),t._v(" 字符可能被文本查看器中默认的下划线部分地遮蔽或完全隐藏。")]),t._v(" "),a("p",[t._v("为避免这种混淆，请使用连字符 "),a("code",[t._v("-")]),t._v(" 而不是下划线")]),t._v(" "),a("h3",{attrs:{id:"url路径中首选小写字母"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url路径中首选小写字母"}},[t._v("#")]),t._v(" URL路径中首选小写字母")]),t._v(" "),a("p",[t._v("RFC 3986 将 URI 定义为区分大小写，但 scheme 和 host components 除外。")]),t._v(" "),a("h3",{attrs:{id:"url路径名词均为复数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url路径名词均为复数"}},[t._v("#")]),t._v(" URL路径名词均为复数")]),t._v(" "),a("p",[t._v("为了保证 url 格式的一致性，建议使用复数形式。")]),t._v(" "),a("h3",{attrs:{id:"restful-api对资源的操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restful-api对资源的操作"}},[t._v("#")]),t._v(" RESTful API对资源的操作")]),t._v(" "),a("p",[t._v("对于 REST api 资源的操作，由 HTTP 动词表示")]),t._v(" "),a("h4",{attrs:{id:"curd-操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#curd-操作"}},[t._v("#")]),t._v(" CURD 操作")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("GET")]),t._v("：获取资源")]),t._v(" "),a("li",[a("code",[t._v("POST")]),t._v("：新建资源")]),t._v(" "),a("li",[a("code",[t._v("PUT")]),t._v("：在服务器更新资源（向客户端提供改变后的所有资源）")]),t._v(" "),a("li",[a("code",[t._v("PATCH")]),t._v("：在服务器更新资源（向客户端提供改变的属性，一般不用，用 "),a("code",[t._v("PUT")]),t._v("）")]),t._v(" "),a("li",[a("code",[t._v("DELETE")]),t._v("：删除资源")])]),t._v(" "),a("h3",{attrs:{id:"资源过滤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#资源过滤"}},[t._v("#")]),t._v(" 资源过滤")]),t._v(" "),a("p",[t._v("在获取资源的时候，有可能需要获取某些“过滤”后的资源，例如指定前10行数据")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("http://api.user.com/schools/grades/classes/boys?page=1&page-size=10\n")])])]),a("h3",{attrs:{id:"返回状态码推荐标准http状态码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#返回状态码推荐标准http状态码"}},[t._v("#")]),t._v(" 返回状态码推荐标准HTTP状态码")]),t._v(" "),a("p",[t._v("有很多服务器将返回状态码一直设为 200，然后在返回 body 里面自定义一些状态码来表示服务器返回结果的状态码。由于 REST api 是直接使用的 HTTP 协议，所以它的状态码也要尽量使用 HTTP 协议的状态码。")]),t._v(" "),a("ul",[a("li",[t._v("200 OK 服务器返回用户请求的数据，该操作是幂等的")]),t._v(" "),a("li",[t._v("201 CREATED 新建或者修改数据成功")]),t._v(" "),a("li",[t._v("204 NOT CONTENT 删除数据成功")]),t._v(" "),a("li",[t._v("400 BAD REQUEST 用户发出的请求有问题，该操作是幂等的")]),t._v(" "),a("li",[t._v("401 Unauthoried 表示用户没有认证，无法进行操作")]),t._v(" "),a("li",[t._v("403 Forbidden 用户访问是被禁止的")]),t._v(" "),a("li",[t._v("422 Unprocesable Entity 当创建一个对象时，发生一个验证错误")]),t._v(" "),a("li",[t._v("500 INTERNAL SERVER ERROR 服务器内部错误，用户将无法判断发出的请求是否成功")]),t._v(" "),a("li",[t._v("503 Service Unavailable 服务不可用状态，多半是因为服务器问题，例如CPU占用率大，等等")])]),t._v(" "),a("p",[t._v("更多的可以参考维基百科，或者"),a("RouterLink",{attrs:{to:"/posts/2021-01-30-http-status-code.html"}},[t._v("这篇博客")]),t._v("。")],1),t._v(" "),a("h2",{attrs:{id:"具体情形具体分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#具体情形具体分析"}},[t._v("#")]),t._v(" 具体情形具体分析")]),t._v(" "),a("p",[t._v("REST API 是一个非常宏大的问题，只能说具体情形具体分析。")]),t._v(" "),a("p",[t._v("一个方法是参考现有的代码或后端框架等等，如 Django REST Framework 提供的教程就是一个带有简单权限管理的 Snippet。")]),t._v(" "),a("p",[t._v("还有一个方法就是在 Stack Overflow 上搜索你的行为 + "),a("code",[t._v("REST API")]),t._v(" 或 "),a("code",[t._v("http status code")]),t._v("，会出现大量的结果供参考，如 "),a("code",[t._v("logout http status code")]),t._v(" 会搜到关于注销应当返回什么，返回的状态码是否有意义这类问题。")]),t._v(" "),a("h3",{attrs:{id:"登录和登出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录和登出"}},[t._v("#")]),t._v(" 登录和登出")]),t._v(" "),a("ol",[a("li",[t._v("登录和登出应该使用不同的路径，如 "),a("code",[t._v("/login")]),t._v(" 和 "),a("code",[t._v("/logout")]),t._v("。"),a("a",{attrs:{href:"https://stackoverflow.com/questions/36220029/http-status-to-return-after-trying-to-logout-without-being-logged-in",target:"_blank",rel:"noopener noreferrer"}},[t._v("Stack Overflow"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("登录和登出都应该使用 "),a("code",[t._v("POST")]),t._v(" 方法，这是为了防浏览器预加载，以及防止搜索引擎的爬虫。"),a("a",{attrs:{href:"https://stackoverflow.com/questions/3521290/logout-get-or-post",target:"_blank",rel:"noopener noreferrer"}},[t._v("Stack Overflow"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("登出操作完成后应当返回一个 "),a("code",[t._v("HTTP 204 No Content")]),t._v(" 报文，虽然这对大部分前端都没什么用，但是说不定真的有人需要用接收报文作时间戳什么的。Stack Overflow")])]),t._v(" "),a("h3",{attrs:{id:"重置密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重置密码"}},[t._v("#")]),t._v(" 重置密码")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://stackoverflow.com/questions/3077229/restful-password-reset",target:"_blank",rel:"noopener noreferrer"}},[t._v("Stack Overflow"),a("OutboundLink")],1),t._v(" 中给出了相当多的方案：")])])}),[],!1,null,null,null);a.default=_.exports}}]);