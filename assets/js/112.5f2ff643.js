(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{501:function(t,s,a){"use strict";a.r(s);var e=a(3),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"帮助文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#帮助文档"}},[t._v("#")]),t._v(" 帮助文档")]),t._v(" "),s("p",[t._v("长的帮助： "),s("code",[t._v("man <command>")])]),t._v(" "),s("p",[t._v("短的帮助： "),s("code",[t._v("tldr <command>")])]),t._v(" "),s("p",[t._v("有了 "),s("code",[t._v("tldr")]),t._v(" 以后，很多教程都可以删掉了。")]),t._v(" "),s("h2",{attrs:{id:"更换镜像源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更换镜像源"}},[t._v("#")]),t._v(" 更换镜像源")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("源")]),t._v(" "),s("th",[t._v("镜像")]),t._v(" "),s("th",[t._v("命令")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("apt(ubuntu20)")]),t._v(" "),s("td",[s("a",{attrs:{href:"https://mirrors.cloud.tencent.com/help/ubuntu.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("腾讯"),s("OutboundLink")],1)]),t._v(" "),s("td",[s("code",[t._v("sudo wget -O /etc/apt/sources.list https://mirrors.cloud.tencent.com/repo/ubuntu20_sources.list")])])]),t._v(" "),s("tr",[s("td",[t._v("brew")]),t._v(" "),s("td",[s("a",{attrs:{href:"https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/",target:"_blank",rel:"noopener noreferrer"}},[t._v("清华"),s("OutboundLink")],1)]),t._v(" "),s("td",[s("code",[t._v('export HOMEBREW_API_DOMAIN="https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/api" && export HOMEBREW_BOTTLE_DOMAIN="https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles"')])])]),t._v(" "),s("tr",[s("td",[t._v("pip")]),t._v(" "),s("td",[t._v("清华")]),t._v(" "),s("td",[s("code",[t._v("pip3 config set global.index-url https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple")])])]),t._v(" "),s("tr",[s("td",[t._v("npm & pnpm")]),t._v(" "),s("td",[t._v("淘宝")]),t._v(" "),s("td",[t._v("见下")])]),t._v(" "),s("tr",[s("td",[t._v("yarn")]),t._v(" "),s("td",[t._v("淘宝")]),t._v(" "),s("td",[t._v("见下")])]),t._v(" "),s("tr",[s("td",[t._v("docker")]),t._v(" "),s("td",[s("a",{attrs:{href:"https://github.com/dongyubin/DockerHub",target:"_blank",rel:"noopener noreferrer"}},[t._v("dongyubin/DockerHub"),s("OutboundLink")],1)]),t._v(" "),s("td",[s("code",[t._v("sudo wget -O /etc/docker/daemon.json https://blog.lyh543.cn/mirrors/docker.json")])])]),t._v(" "),s("tr",[s("td",[t._v("docker(windows)")]),t._v(" "),s("td",[s("a",{attrs:{href:"https://github.com/dongyubin/DockerHub",target:"_blank",rel:"noopener noreferrer"}},[t._v("dongyubin/DockerHub"),s("OutboundLink")],1)]),t._v(" "),s("td",[s("code",[t._v("iwr -O ~/.docker/daemon.json https://blog.lyh543.cn/mirrors/docker-desktop-windows.json")])])]),t._v(" "),s("tr",[s("td",[t._v("maven")]),t._v(" "),s("td",[t._v("阿里云")]),t._v(" "),s("td",[s("code",[t._v("wget -O ~/.m2/settings.xml https://blog.lyh543.cn/mirrors/maven.xml")])])]),t._v(" "),s("tr",[s("td",[t._v("tlmgr")]),t._v(" "),s("td",[t._v("科大")]),t._v(" "),s("td",[s("code",[t._v("tlmgr option repository http://mirrors.ustc.edu.cn/CTAN/systems/texlive/tlnet")])])]),t._v(" "),s("tr",[s("td",[t._v("GitHub")]),t._v(" "),s("td",[s("code",[t._v("https://proxy.vvvv.ee/")])]),t._v(" "),s("td",[s("code",[t._v('git config --global url."https://proxy.vvvv.ee/https://github.com/".insteadOf "https://github.com/"')])])])])]),t._v(" "),s("p",[t._v("npm & pnpm & yarn:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置镜像源：https://www.npmjs.com/package/mirror-config-china")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g mirror-config-china --registry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npm.taobao.org\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" mirror-config-china --registry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npm.taobao.org\n")])])]),s("h2",{attrs:{id:"swap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swap"}},[t._v("#")]),t._v(" swap")]),t._v(" "),s("h3",{attrs:{id:"设置-swapfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置-swapfile"}},[t._v("#")]),t._v(" 设置 swapfile")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /swap\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/dev/zero "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("of")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/swap/swapfile "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("bs")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4194304")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4194304 为 4GiB")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),t._v(" /swap/swapfile\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkswap")]),t._v(" /swap/swapfile\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("swapon")]),t._v(" /swap/swapfile\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" -m "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 验证成功")]),t._v("\n")])])]),s("p",[t._v("将下面一行追加到 "),s("code",[t._v("/etc/fstab")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("/swap/swapfile                            swap swap defaults 0 0\n")])])]),s("h2",{attrs:{id:"文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件"}},[t._v("#")]),t._v(" 文件")]),t._v(" "),s("h3",{attrs:{id:"当前文件夹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#当前文件夹"}},[t._v("#")]),t._v(" 当前文件夹")]),t._v(" "),s("p",[s("code",[t._v("pushd")]),t._v(" 和 "),s("code",[t._v("popd")]),t._v(" 起了 "),s("code",[t._v("cd")]),t._v(" 的作用，还能自动将当前目录压栈、出栈。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),t._v("\n~\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pushd")]),t._v(" /tmp\n/tmp ~\n\n$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),t._v("\n/tmp\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("popd")]),t._v("\n~\n\n$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),t._v("\n~\n")])])]),s("p",[s("code",[t._v("pwd")]),t._v(" 查看当前文件夹，"),s("code",[t._v("dirname $0")]),t._v(" 查看运行的脚本所在文件夹。配合 "),s("code",[t._v("$()")]),t._v(" 语法可以直接切换到当前目录：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),t._v(" $0"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n")])])]),s("h3",{attrs:{id:"查看文件-文件夹-磁盘的大小"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看文件-文件夹-磁盘的大小"}},[t._v("#")]),t._v(" 查看文件/文件夹/磁盘的大小")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("中文")]),t._v(" "),s("th",[t._v("英文")]),t._v(" "),s("th",[t._v("命令")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("查看磁盘大小")]),t._v(" "),s("td",[s("strong",[t._v("d")]),t._v("isplay "),s("strong",[t._v("f")]),t._v("ilesystem")]),t._v(" "),s("td",[s("code",[t._v("df -h")])])]),t._v(" "),s("tr",[s("td",[t._v("查看目录下的文件大小")]),t._v(" "),s("td",[s("strong",[t._v("l")]),t._v("i"),s("strong",[t._v("s")]),t._v("t")]),t._v(" "),s("td",[s("code",[t._v("ls -hs")])])]),t._v(" "),s("tr",[s("td",[t._v("查看目录下的文件夹的大小")]),t._v(" "),s("td",[s("strong",[t._v("d")]),t._v("isk "),s("strong",[t._v("u")]),t._v("sage")]),t._v(" "),s("td",[s("code",[t._v("du -h --max-depth=1")])])])])]),t._v(" "),s("p",[t._v("以上的 "),s("code",[t._v("-h")]),t._v(" 都是 "),s("code",[t._v("--human-readable")]),t._v("，不使用这个开关，则会使用一个数字表示大小（单位为 "),s("code",[t._v("KB")]),t._v("）；使用开关后，则会使用 "),s("code",[t._v("200K")]),t._v("，"),s("code",[t._v("1.8G")]),t._v(" 的形式。"),s("br"),t._v("\n注意 "),s("code",[t._v("du")]),t._v(" 如不加 "),s("code",[t._v("--max-depth")]),t._v(" 参数，会统计完所有的目录。")]),t._v(" "),s("h2",{attrs:{id:"进程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进程"}},[t._v("#")]),t._v(" 进程")]),t._v(" "),s("h3",{attrs:{id:"任务管理器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#任务管理器"}},[t._v("#")]),t._v(" 任务管理器")]),t._v(" "),s("p",[t._v("可以使用 "),s("code",[t._v("top")]),t._v(" 或 "),s("code",[t._v("htop")]),t._v("（后者对鼠标、颜色支持更好）。")]),t._v(" "),s("h3",{attrs:{id:"进程后台运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进程后台运行"}},[t._v("#")]),t._v(" 进程后台运行")]),t._v(" "),s("h4",{attrs:{id:"使用-nohup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-nohup"}},[t._v("#")]),t._v(" 使用 nohup")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("nohup")]),t._v(" 的话，一行代码就 ok：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nohup <command> & &>/dev/null")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" ssserver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&>")]),t._v(" /dev/null\n")])])]),s("p",[t._v("可能会看到 "),s("code",[t._v("ignore input")]),t._v(" 之类的警告，不用管，"),s("code",[t._v("Ctrl+C")]),t._v(" 退出前台即可，此时 "),s("code",[t._v("ssserver")]),t._v(" 正在后台运行。")]),t._v(" "),s("h4",{attrs:{id:"使用-pm2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-pm2"}},[t._v("#")]),t._v(" 使用 pm2")]),t._v(" "),s("p",[t._v("这个要麻烦一点，要从 "),s("code",[t._v("npm")]),t._v(" 下载，所以还得先下载 "),s("code",[t._v("npm")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pm2 -g\npm2 --name s1 -f start http-server "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置 pm2")]),t._v("\n\npm2 save "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选命令，作用是保存当前的 pm2 状态")]),t._v("\npm2 startup "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选命令，下次开机的时候可以恢复到 save 的状态")]),t._v("\n\npm2 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选命令，列出当前 pm2 的任务")]),t._v("\n")])])]),s("h4",{attrs:{id:"使用-systemd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-systemd"}},[t._v("#")]),t._v(" 使用 systemd")]),t._v(" "),s("p",[t._v("也可以配置 systemd。以下是一个模板。")]),t._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("Unit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Frp Server Service")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("After")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("network.target")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("Service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("simple")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("lyh543")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("on-failure")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("RestartSec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("5s")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("ExecStart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("sudo /usr/bin/frps -c /etc/frp/frps.ini")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("Install")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("WantedBy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("multi-user.target")]),t._v("\n")])])]),s("p",[t._v("将其保存在 "),s("code",[t._v("/etc/systemd/system/xxx.service")]),t._v(" 后：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" /etc/systemd/system/xxx.service\nsystemctl start xxx\n")])])]),s("p",[t._v("即可。")]),t._v(" "),s("h3",{attrs:{id:"进程开机自启"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进程开机自启"}},[t._v("#")]),t._v(" 进程开机自启")]),t._v(" "),s("h4",{attrs:{id:"使用-etc-rc-local"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-etc-rc-local"}},[t._v("#")]),t._v(" 使用 /etc/rc.local")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("sudo /etc/rc.local")]),t._v(" 最后追加命令，然后给权限 "),s("code",[t._v("sudo chmod a+x /etc/rc.local")]),t._v(" 即可。")]),t._v(" "),s("p",[t._v("不过貌似 "),s("code",[t._v("alias")]),t._v(" 语句无效，可能 "),s("code",[t._v("alias")]),t._v(" 是用户级的命令，需要用户登录时执行。")]),t._v(" "),s("h4",{attrs:{id:"使用-systemd-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-systemd-2"}},[t._v("#")]),t._v(" 使用 systemd")]),t._v(" "),s("h3",{attrs:{id:"任务定时运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#任务定时运行"}},[t._v("#")]),t._v(" 任务定时运行")]),t._v(" "),s("h4",{attrs:{id:"使用-crontab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-crontab"}},[t._v("#")]),t._v(" 使用 crontab")]),t._v(" "),s("p",[t._v("编辑本用户的 "),s("code",[t._v("crontab")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("crontab -e\n")])])]),s("p",[t._v("如果命令复杂的话，推荐写成一个脚本，然后输入以下内容：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 文件格式說明\n#  ——分鐘（0 - 59）\n# |  ——小時（0 - 23）\n# | |  ——日（1 - 31）\n# | | |  ——月（1 - 12）\n# | | | |  ——星期（0 - 7，星期日=0或7）\n# | | | | |\n# * * * * * 被執行的命令\n  0 * * * * cd /path/to/script/ && ./script.sh >>cron.log 2>&1\n")])])]),s("p",[t._v("上面就是每小时的 0 分 0 秒，cd 到指定目录，然后执行脚本，将标准输出重定向到目录下 "),s("code",[t._v("cron.log")]),t._v("，将错误输出重定向到和标准输出一起。")]),t._v(" "),s("h2",{attrs:{id:"用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用户"}},[t._v("#")]),t._v(" 用户")]),t._v(" "),s("h3",{attrs:{id:"添加用户并给予-sudo-权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加用户并给予-sudo-权限"}},[t._v("#")]),t._v(" 添加用户并给予 sudo 权限")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("newuser"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --disabled-password  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁用密码，只允许 ssh 登录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("usermod")]),t._v(" -aG "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("newuser"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("             "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将用户加入 sudo 组")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("newuser"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("                           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 上号")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" ~/.ssh/authorized_keys "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ssh-rsa xx"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加 ssh 公钥")]),t._v("\n")])])]),s("p",[t._v("然后上号 "),s("code",[t._v("sudo")]),t._v(" 检查一下是不是可以了。如果不行，可以试试在 "),s("code",[t._v("/etc/sudoers")]),t._v(" 里面修改 "),s("code",[t._v("%sudo")]),t._v(" 一行：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("%sudo   "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ALL")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ALL:ALL"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" NOPASSWD:ALL\n")])])]),s("h2",{attrs:{id:"ssh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[t._v("#")]),t._v(" ssh")]),t._v(" "),s("p",[t._v("在使用 Git 和搭建服务器的时候都会用到 ssh，于是笔记也比较零散。")]),t._v(" "),s("p",[t._v("在这里丢几个链接：")]),t._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/notes/linux/git.html#在-Linux-下-git-使用-ssh-密钥"}},[t._v("创建 ssh 密钥并给 Git/服务器使用")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/notes/linux/build-shadowsocks.html#ssh-远程登录"}},[t._v("ssh 远程登录服务器")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/notes/linux/change-ssh-port.html"}},[t._v("修改 ssh 的端口")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/notes/microsoft/windows/setup-ssh-windows.html"}},[t._v("Windows 上使用 ssh")])],1)]),t._v(" "),s("h2",{attrs:{id:"log"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#log"}},[t._v("#")]),t._v(" log")]),t._v(" "),s("h3",{attrs:{id:"查看-shell-启动过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看-shell-启动过程"}},[t._v("#")]),t._v(" 查看 Shell 启动过程")]),t._v(" "),s("p",[t._v("可以用来追踪环境变量在哪里被修改。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bash")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PS4")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'+$BASH_SOURCE> '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BASH_XTRACEFD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" -xl "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("7")]),t._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&2")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# zsh")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("zsh")]),t._v(" -xl\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);